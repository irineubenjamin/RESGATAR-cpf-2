(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[718],{590:function(e,t,n){"use strict";n.d(t,{m:function(){return P}});var r,a=n(7458);n(2983);var i=n(4990),o=n(6256);n(8994);let s=e=>window.__ENV?window.__ENV[e]:void 0,l=o.z.enum(["true","false"]).transform(e=>"true"===e),d={server:{NODE_ENV:o.z.enum(["development","production","test"]).optional(),DATABASE_URL:o.z.string().url().refine(e=>e.startsWith("postgres")||e.startsWith("mysql")),ENCRYPTION_SECRET:o.z.string().length(32),NEXTAUTH_URL:o.z.string().url(),DISABLE_SIGNUP:l.optional().default("false"),ADMIN_EMAIL:o.z.string().email().optional(),DEFAULT_WORKSPACE_PLAN:o.z.enum(["FREE","STARTER","PRO","LIFETIME","UNLIMITED"]).refine(e=>["FREE","STARTER","PRO","LIFETIME","UNLIMITED"].includes(e)).default("FREE"),DEBUG:l.optional().default("false")},client:{NEXT_PUBLIC_E2E_TEST:l.optional(),NEXT_PUBLIC_VIEWER_URL:o.z.string().min(1).transform(e=>e.split(",")),NEXT_PUBLIC_VIEWER_INTERNAL_URL:o.z.string().url().optional(),NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID:o.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_E2E_TEST:s("NEXT_PUBLIC_E2E_TEST"),NEXT_PUBLIC_VIEWER_URL:s("NEXT_PUBLIC_VIEWER_URL"),NEXT_PUBLIC_VIEWER_INTERNAL_URL:s("NEXT_PUBLIC_VIEWER_INTERNAL_URL"),NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID:s("NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID")}},u={server:{GITHUB_CLIENT_ID:o.z.string().min(1).optional(),GITHUB_CLIENT_SECRET:o.z.string().min(1).optional()}},c={server:{FACEBOOK_CLIENT_ID:o.z.string().min(1).optional(),FACEBOOK_CLIENT_SECRET:o.z.string().min(1).optional()}},p={server:{SMTP_USERNAME:o.z.string().min(1).optional(),SMTP_PASSWORD:o.z.string().min(1).optional(),SMTP_HOST:o.z.string().min(1).optional(),SMTP_PORT:o.z.coerce.number().optional().default(25),SMTP_AUTH_DISABLED:l.optional().default("false"),SMTP_SECURE:l.optional().default("false")},client:{NEXT_PUBLIC_SMTP_FROM:o.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_SMTP_FROM:s("NEXT_PUBLIC_SMTP_FROM")}},m={server:{GITLAB_CLIENT_ID:o.z.string().min(1).optional(),GITLAB_CLIENT_SECRET:o.z.string().min(1).optional(),GITLAB_BASE_URL:o.z.string().url().optional().default("https://gitlab.com"),GITLAB_NAME:o.z.string().min(1).optional().default("GitLab"),GITLAB_REQUIRED_GROUPS:o.z.string().transform(e=>e?e.split(","):void 0).optional()}},h={server:{AZURE_AD_CLIENT_ID:o.z.string().min(1).optional(),AZURE_AD_CLIENT_SECRET:o.z.string().min(1).optional(),AZURE_AD_TENANT_ID:o.z.string().min(1).optional()}},g={server:{CUSTOM_OAUTH_NAME:o.z.string().min(1).optional().default("Custom OAuth"),CUSTOM_OAUTH_SCOPE:o.z.string().min(1).optional().default("openid profile email"),CUSTOM_OAUTH_CLIENT_ID:o.z.string().min(1).optional(),CUSTOM_OAUTH_CLIENT_SECRET:o.z.string().min(1).optional(),CUSTOM_OAUTH_WELL_KNOWN_URL:o.z.string().url().optional(),CUSTOM_OAUTH_USER_ID_PATH:o.z.string().min(1).optional().default("id"),CUSTOM_OAUTH_USER_EMAIL_PATH:o.z.string().min(1).optional().default("email"),CUSTOM_OAUTH_USER_NAME_PATH:o.z.string().min(1).optional().default("name"),CUSTOM_OAUTH_USER_IMAGE_PATH:o.z.string().min(1).optional().default("image")}},b={server:{GOOGLE_CLIENT_ID:o.z.string().min(1).optional(),GOOGLE_CLIENT_SECRET:o.z.string().min(1).optional()},client:{NEXT_PUBLIC_GOOGLE_API_KEY:o.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_GOOGLE_API_KEY:s("NEXT_PUBLIC_GOOGLE_API_KEY")}},f={server:{STRIPE_SECRET_KEY:o.z.string().min(1).optional(),STRIPE_WEBHOOK_SECRET:o.z.string().min(1).optional(),STRIPE_STARTER_PRODUCT_ID:o.z.string().min(1).optional(),STRIPE_STARTER_MONTHLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_STARTER_YEARLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_STARTER_CHATS_MONTHLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_STARTER_CHATS_YEARLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_STARTER_STORAGE_MONTHLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_STARTER_STORAGE_YEARLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_PRO_PRODUCT_ID:o.z.string().min(1).optional(),STRIPE_PRO_MONTHLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_PRO_YEARLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_PRO_CHATS_MONTHLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_PRO_CHATS_YEARLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_PRO_STORAGE_MONTHLY_PRICE_ID:o.z.string().min(1).optional(),STRIPE_PRO_STORAGE_YEARLY_PRICE_ID:o.z.string().min(1).optional()},client:{NEXT_PUBLIC_STRIPE_PUBLIC_KEY:o.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_STRIPE_PUBLIC_KEY:s("NEXT_PUBLIC_STRIPE_PUBLIC_KEY")}},y={server:{S3_ACCESS_KEY:o.z.string().min(1).optional(),S3_SECRET_KEY:o.z.string().min(1).optional(),S3_BUCKET:o.z.string().min(1).optional().default("typebot"),S3_PORT:o.z.coerce.number().optional(),S3_ENDPOINT:o.z.string().min(1).optional(),S3_SSL:l.optional().default("true"),S3_REGION:o.z.string().min(1).optional()}},v={client:{NEXT_PUBLIC_GIPHY_API_KEY:o.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_GIPHY_API_KEY:s("NEXT_PUBLIC_GIPHY_API_KEY")}},_={server:{VERCEL_TOKEN:o.z.string().min(1).optional(),VERCEL_TEAM_ID:o.z.string().min(1).optional(),VERCEL_GIT_COMMIT_SHA:o.z.string().min(1).optional()},client:{NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME:o.z.string().min(1).optional(),NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA:o.z.string().min(1).optional(),NEXT_PUBLIC_VERCEL_ENV:o.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME:s("NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME"),NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA:s("NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA"),NEXT_PUBLIC_VERCEL_ENV:s("NEXT_PUBLIC_VERCEL_ENV")}},E={server:{SLEEKPLAN_SSO_KEY:o.z.string().min(1).optional()}},x={client:{NEXT_PUBLIC_UNSPLASH_APP_NAME:o.z.string().min(1).optional(),NEXT_PUBLIC_UNSPLASH_ACCESS_KEY:o.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_UNSPLASH_APP_NAME:s("NEXT_PUBLIC_UNSPLASH_APP_NAME"),NEXT_PUBLIC_UNSPLASH_ACCESS_KEY:s("NEXT_PUBLIC_UNSPLASH_ACCESS_KEY")}},w={server:{META_SYSTEM_USER_TOKEN:o.z.string().min(1).optional(),WHATSAPP_PREVIEW_FROM_PHONE_NUMBER_ID:o.z.string().min(1).optional()}},I={server:{UPSTASH_REDIS_REST_URL:o.z.string().url().optional(),UPSTASH_REDIS_REST_TOKEN:o.z.string().min(1).optional()}},T={client:{NEXT_PUBLIC_SENTRY_DSN:o.z.string().min(1).optional()},server:{SENTRY_AUTH_TOKEN:o.z.string().min(1).optional(),SENTRY_PROJECT:o.z.string().min(1).optional(),SENTRY_ORG:o.z.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_SENTRY_DSN:s("NEXT_PUBLIC_SENTRY_DSN")}},S={server:{TELEMETRY_WEBHOOK_URL:o.z.string().url().optional(),TELEMETRY_WEBHOOK_BEARER_TOKEN:o.z.string().min(1).optional(),USER_CREATED_WEBHOOK_URL:o.z.string().url().optional()}},C={client:{NEXT_PUBLIC_POSTHOG_KEY:o.z.string().min(1).optional(),NEXT_PUBLIC_POSTHOG_HOST:o.z.string().min(1).optional().default("https://app.posthog.com")},runtimeEnv:{NEXT_PUBLIC_POSTHOG_KEY:s("NEXT_PUBLIC_POSTHOG_KEY"),NEXT_PUBLIC_POSTHOG_HOST:s("NEXT_PUBLIC_POSTHOG_HOST")}},j=(0,i.D)({server:{...d.server,...u.server,...c.server,...p.server,...b.server,...f.server,...y.server,..._.server,...E.server,...w.server,...I.server,...m.server,...h.server,...g.server,...T.server,...S.server},client:{...d.client,...p.client,...b.client,...f.client,...v.client,..._.client,...x.client,...T.client,...C.client},experimental__runtimeEnv:{...d.runtimeEnv,...p.runtimeEnv,...b.runtimeEnv,...f.runtimeEnv,...v.runtimeEnv,..._.runtimeEnv,...x.runtimeEnv,...T.runtimeEnv,...C.runtimeEnv},skipValidation:void 0===window.__ENV,onInvalidAccess:e=>{throw Error("❌ Attempted to access a server-side environment variable on the client: ".concat(e))}}),k=()=>null!==(r=j.NEXT_PUBLIC_VIEWER_INTERNAL_URL)&&void 0!==r?r:j.NEXT_PUBLIC_VIEWER_URL[0],P=e=>{let{error:t}=e;return(0,a.jsx)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"0 1rem"},children:k()?(0,a.jsx)("p",{style:{fontSize:"24px",textAlign:"center"},children:t.message}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{style:{fontWeight:"bold",fontSize:"30px"},children:"NEXT_PUBLIC_VIEWER_URL is missing"}),(0,a.jsxs)("h2",{children:["Make sure to configure the viewer properly (",(0,a.jsx)("a",{href:"https://docs.typebot.io/self-hosting/configuration#viewer",children:"https://docs.typebot.io/self-hosting/configuration#viewer"}),")"]})]})})}},3396:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var r=n(7458);let a=()=>(0,r.jsxs)("div",{style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,r.jsx)("h1",{style:{fontWeight:"bold",fontSize:"30px"},children:"404"}),(0,r.jsx)("h2",{children:"The bot you're looking for doesn't exist"})]})},9749:function(e,t,n){"use strict";n.d(t,{H:function(){return u}});var r=n(7458),a=n(3060),i=n(1518),o=n.n(i),s=n(8269),l=n.n(s),d=n(4455);let u=e=>{let{url:t,typebotName:n,metadata:{title:i,description:s,favIconUrl:u,imageUrl:c,googleTagManagerId:p}}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:null!=i?i:n}),(0,r.jsx)("meta",{name:"robots",content:"noindex"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",href:null!=u?u:"https://s3.typebot.io/favicon.png"}),(0,r.jsx)("meta",{name:"title",content:null!=i?i:n}),(0,r.jsx)("meta",{name:"description",content:null!=s?s:"Build beautiful conversational forms and embed them directly in your applications without a line of code. Triple your response rate and collect answers that has more value compared to a traditional form."}),(0,r.jsx)("meta",{property:"og:type",content:"website"}),(0,r.jsx)("meta",{property:"og:url",content:null!=t?t:"https://bot.typebot.io"}),(0,r.jsx)("meta",{property:"og:title",content:null!=i?i:n}),(0,r.jsx)("meta",{property:"og:site_name",content:null!=i?i:n}),(0,r.jsx)("meta",{property:"og:description",content:null!=s?s:"Build beautiful conversational forms and embed them directly in your applications without a line of code. Triple your response rate and collect answers that has more value compared to a traditional form."}),(0,r.jsx)("meta",{property:"og:image",itemProp:"image",content:null!=c?c:"https://bot.typebot.io/site-preview.png"}),(0,r.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{property:"twitter:url",content:null!=t?t:"https://bot.typebot.io"}),(0,r.jsx)("meta",{property:"twitter:title",content:null!=i?i:n}),(0,r.jsx)("meta",{property:"twitter:description",content:null!=s?s:"Build beautiful conversational forms and embed them directly in your applications without a line of code. Triple your response rate and collect answers that has more value compared to a traditional form."}),(0,r.jsx)("meta",{property:"twitter:image",content:null!=c?c:"https://bot.typebot.io/site-preview.png"})]},"seo"),(0,d.UE)(p)&&(0,r.jsx)(l(),{id:"google-tag-manager",children:(0,a.J)(p)})]})}},3143:function(e,t,n){"use strict";let r,a,i,o;n.d(t,{i:function(){return oZ}});var s,l=n(7458),d=n(6196),u=n(2983),c=n(2492),p=n(5689),m=n(3947),h=n(8443),g=n(4438),b=n(959),f=n(6163),y=n(1016),v=n(8994),_=((eo=_||{}).TEXT="text input",eo.NUMBER="number input",eo.EMAIL="email input",eo.URL="url input",eo.DATE="date input",eo.PHONE="phone number input",eo.CHOICE="choice input",eo.PICTURE_CHOICE="picture choice input",eo.PAYMENT="payment input",eo.RATING="rating input",eo.FILE="file input",eo),E=((es=E||{}).TEXT="text",es.IMAGE="image",es.VIDEO="video",es.EMBED="embed",es.AUDIO="audio",es),x=((el=x||{}).SET_VARIABLE="Set variable",el.CONDITION="Condition",el.REDIRECT="Redirect",el.SCRIPT="Code",el.TYPEBOT_LINK="Typebot link",el.WAIT="Wait",el.JUMP="Jump",el.AB_TEST="AB test",el),w=((ed=w||{}).GOOGLE_SHEETS="Google Sheets",ed.OPEN_AI="OpenAI",ed.GOOGLE_ANALYTICS="Google Analytics",ed.WEBHOOK="Webhook",ed.EMAIL="Email",ed.ZAPIER="Zapier",ed.MAKE_COM="Make.com",ed.PABBLY_CONNECT="Pabbly",ed.CHATWOOT="Chatwoot",ed.PIXEL="Pixel",ed),I=e=>(0,d.d)(void 0,null,function*(){try{let t="string"==typeof e?e:e.url,n=yield fetch(t,{method:"string"==typeof e?"GET":e.method,mode:"cors",headers:"string"!=typeof e&&T(e.body)?{"Content-Type":"application/json"}:void 0,body:"string"!=typeof e&&T(e.body)?JSON.stringify(e.body):void 0}),r=yield n.json();if(!n.ok)throw"error"in r?r.error:r;return{data:r}}catch(e){return console.error(e),{error:e}}}),T=e=>null!=e,S=e=>null==e,C=e=>null==e||""===e,j=e=>null!=e&&""!==e,k=e=>Object.values(_).includes(e.type),P=e=>Object.values(E).includes(e.type),N=e=>Object.values(x).includes(e.type),R=e=>"choice input"===e.type,A=e=>Object.values(w).includes(e.type),O=e=>Object.values(E).includes(e),L=e=>t=>t.id===e,U=e=>/^\{\{.*\}\}$/.test(e),B=e=>e.startsWith("http")||e.startsWith("mailto:")||e.startsWith("tel:")||e.startsWith("sms:")||U(e)?e:"https://".concat(e),M=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fieldToParse:"value",escapeForJson:!1};return n=>n&&""!==n?n.replace(/\{\{(.*?)\}\}/g,(n,r)=>{let a=r.replace(/{{|}}/g,""),i=e.find(e=>a===e.name&&("id"===t.fieldToParse||T(e.value)));if(!i)return"";if("id"===t.fieldToParse)return i.id;let{value:o}=i;return t.escapeForJson?Z("string"==typeof o?o:JSON.stringify(o)):D(o)||""}):""},D=e=>{if(S(e))return null;if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return console.warn("Failed to safely stringify variable value",e),null}},z=e=>{if(null===e)return null;if(void 0!==e){if(Array.isArray(e)||"number"==typeof e)return e;if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("undefined"!==e)try{return JSON.parse(e)}catch(t){return e}}},Z=e=>e.replace(/\n/g,"\\n").replace(/"/g,'\\"').replace(/\\[^n"]/g,"\\\\ "),V=(e,t)=>Object.keys(e).reduce((n,r)=>{let a=e[r];return(0,d.b)((0,d.a)({},n),{[r]:"string"==typeof a?M(t)(a):a})},{}),H=e=>{var t;return null==(t=e.filter(e=>P(e)||k(e)).pop())?void 0:t.type},G=e=>{var t;try{null==(t=window.top)||t.postMessage((0,d.a)({from:"typebot"},e),"*")}catch(e){console.error(e)}},F=(0,u.createContext)({}),Y=e=>{let{children:t,typebot:n,apiHost:r,isPreview:a,isLoading:i,onNewLog:o}=e,[s,c]=(0,u.useState)(n),[p,m]=(0,u.useState)([]),[h,g]=(0,u.useState)(n.typebotId),[b,f]=(0,u.useState)([]),[y,v]=(0,u.useState)([]);(0,u.useEffect)(()=>{c(e=>(0,d.b)((0,d.a)({},e),{theme:n.theme,settings:n.settings}))},[n.theme,n.settings]);let _=(e,t)=>{var n,r;let a=D(t);G({newVariableValue:{name:null!=(r=null==(n=s.variables.find(t=>t.id===e))?void 0:n.name)?r:"",value:null!=a?a:""}});let i=s.variables.find(t=>t.id===e),o=s.variables.filter(t=>t.name===(null==i?void 0:i.name)&&t.id!==e),l=[i,...o].filter(T);c(e=>(0,d.b)((0,d.a)({},e),{variables:e.variables.map(e=>l.some(t=>t.id===e.id)?(0,d.b)((0,d.a)({},e),{value:a}):e)}))},E=e=>{c(t=>(0,d.b)((0,d.a)({},t),{edges:[...t.edges,e]}))},x=e=>{let t=w(e.variables,s.variables),n={id:"typebotId"in e?e.typebotId:e.id,groups:e.groups,edges:e.edges,variables:t};return m(e=>[...e,n]),c((0,d.b)((0,d.a)({},s),{groups:[...s.groups,...n.groups],variables:[...s.variables,...n.variables],edges:[...s.edges,...n.edges]})),n},w=(e,t)=>e.map(e=>{var n;let r=t.find(t=>t.name===e.name);return(0,d.b)((0,d.a)({},e),{value:null!=(n=null==r?void 0:r.value)?n:e.value})}),I=e=>{v(t=>[...t,e])},S=e=>f(t=>[...t,e]),C=()=>{f(e=>e.slice(1)),v(e=>e.slice(1)),g(b[0].typebotId)};return(0,l.jsx)(F.Provider,{value:{typebot:s,linkedTypebots:p,apiHost:r,isPreview:a,updateVariableValue:_,createEdge:E,injectLinkedTypebot:x,onNewLog:o,linkedBotQueue:b,isLoading:i,parentTypebotIds:y,pushParentTypebotId:I,pushEdgeIdInLinkedTypebotQueue:S,popEdgeIdFromLinkedTypebotQueue:C,currentTypebotId:h,setCurrentTypebotId:g},children:t})},W=()=>(0,u.useContext)(F),K=()=>(0,l.jsx)("figure",{className:"flex justify-center items-center rounded-full text-white w-6 h-6 text-sm relative xs:w-10 xs:h-10 xs:text-xl","data-testid":"default-avatar",children:(0,l.jsxs)("svg",{width:"75",height:"75",viewBox:"0 0 75 75",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute top-0 left-0 w-6 h-6 xs:w-full xs:h-full xs:text-xl",children:[(0,l.jsx)("mask",{id:"mask0",x:"0",y:"0","mask-type":"alpha",children:(0,l.jsx)("circle",{cx:"37.5",cy:"37.5",r:"37.5",fill:"#0042DA"})}),(0,l.jsxs)("g",{mask:"url(#mask0)",children:[(0,l.jsx)("rect",{x:"-30",y:"-43",width:"131",height:"154",fill:"#0042DA"}),(0,l.jsx)("rect",{x:"2.50413",y:"120.333",width:"81.5597",height:"86.4577",rx:"2.5",transform:"rotate(-52.6423 2.50413 120.333)",stroke:"#FED23D",strokeWidth:"5"}),(0,l.jsx)("circle",{cx:"76.5",cy:"-1.5",r:"29",stroke:"#FF8E20",strokeWidth:"5"}),(0,l.jsx)("path",{d:"M-49.8224 22L-15.5 -40.7879L18.8224 22H-49.8224Z",stroke:"#F7F8FF",strokeWidth:"5"})]})]})}),X=e=>{let{avatarSrc:t}=e,[n]=(0,u.useState)(t);return""===n?(0,l.jsx)(l.Fragment,{}):T(n)?(0,l.jsx)("figure",{className:"flex justify-center items-center rounded-full text-white w-6 h-6 text-sm relative xs:w-10 xs:h-10 xs:text-xl",children:(0,l.jsx)("img",{src:n,alt:"Bot avatar",className:"rounded-full object-cover w-full h-full"})}):(0,l.jsx)(K,{})},q=(0,u.forwardRef)(function(e,t){let{hostAvatarSrc:n,keepShowing:r}=e,[a,i]=(0,u.useState)(!1),[o,s]=(0,u.useState)(0),d=()=>{if(!c.current||!h.current)return;let{height:e}=c.current.getBoundingClientRect(),{height:t}=h.current.getBoundingClientRect();s(e-t)},c=(0,u.useRef)(null),h=(0,u.useRef)(null);return(0,u.useImperativeHandle)(t,()=>({refreshTopOffset:d})),(0,u.useEffect)(()=>{if(!document)return;i(!0);let e=new m.do(d);return e.observe(document.body),()=>{e.disconnect()}},[]),(0,l.jsx)("div",{className:"flex w-6 xs:w-10 mr-2 mb-2 flex-shrink-0 items-center relative typebot-avatar-container ",ref:c,children:(0,l.jsx)(p.Z,{classNames:"bubble",timeout:500,in:a&&r,unmountOnExit:!0,children:(0,l.jsx)("div",{className:"absolute w-6 xs:w-10 h-6 xs:h-10 mb-4 xs:mb-2 flex items-center top-0",ref:h,style:{top:"".concat(o,"px"),transition:"top 350ms ease-out, opacity 500ms"},children:(0,l.jsx)(X,{avatarSrc:n})})})})});(eu=ec||(ec={})).assertEqual=e=>e,eu.assertIs=function(e){},eu.assertNever=function(e){throw Error()},eu.arrayToEnum=e=>{let t={};for(let n of e)t[n]=n;return t},eu.getValidEnumValues=e=>{let t=eu.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(let r of t)n[r]=e[r];return eu.objectValues(n)},eu.objectValues=e=>eu.objectKeys(e).map(function(t){return e[t]}),eu.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},eu.find=(e,t)=>{for(let n of e)if(t(n))return n},eu.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,eu.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map(e=>"string"==typeof e?"'".concat(e,"'"):e).join(t)},eu.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(ep||(ep={})).mergeShapes=(e,t)=>(0,d.a)((0,d.a)({},e),t);var J=ec.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$=e=>{switch(typeof e){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(e)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(e)?J.array:null===e?J.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?J.promise:"undefined"!=typeof Map&&e instanceof Map?J.map:"undefined"!=typeof Set&&e instanceof Set?J.set:"undefined"!=typeof Date&&e instanceof Date?J.date:J.object;default:return J.unknown}},Q=ec.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ee=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),et=class extends Error{get errors(){return this.issues}format(e){let t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(let a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(r);else if("invalid_return_type"===a.code)r(a.returnTypeError);else if("invalid_arguments"===a.code)r(a.argumentsError);else if(0===a.path.length)n._errors.push(t(a));else{let e=n,r=0;for(;r<a.path.length;){let n=a.path[r];r===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(a))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ec.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message,t={},n=[];for(let r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}};et.create=e=>new et(e);var en=(e,t)=>{let n;switch(e.code){case Q.invalid_type:n=e.received===J.undefined?"Required":"Expected ".concat(e.expected,", received ").concat(e.received);break;case Q.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(e.expected,ec.jsonStringifyReplacer));break;case Q.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(ec.joinValues(e.keys,", "));break;case Q.invalid_union:n="Invalid input";break;case Q.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(ec.joinValues(e.options));break;case Q.invalid_enum_value:n="Invalid enum value. Expected ".concat(ec.joinValues(e.options),", received '").concat(e.received,"'");break;case Q.invalid_arguments:n="Invalid function arguments";break;case Q.invalid_return_type:n="Invalid function return type";break;case Q.invalid_date:n="Invalid date";break;case Q.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n='Invalid input: must include "'.concat(e.validation.includes,'"'),"number"==typeof e.validation.position&&(n="".concat(n," at one or more positions greater than or equal to ").concat(e.validation.position))):"startsWith"in e.validation?n='Invalid input: must start with "'.concat(e.validation.startsWith,'"'):"endsWith"in e.validation?n='Invalid input: must end with "'.concat(e.validation.endsWith,'"'):ec.assertNever(e.validation):n="regex"!==e.validation?"Invalid ".concat(e.validation):"Invalid";break;case Q.too_small:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"more than"," ").concat(e.minimum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at least":"over"," ").concat(e.minimum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(e.minimum):"date"===e.type?"Date must be ".concat(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(e.minimum))):"Invalid input";break;case Q.too_big:n="array"===e.type?"Array must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"less than"," ").concat(e.maximum," element(s)"):"string"===e.type?"String must contain ".concat(e.exact?"exactly":e.inclusive?"at most":"under"," ").concat(e.maximum," character(s)"):"number"===e.type?"Number must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"bigint"===e.type?"BigInt must be ".concat(e.exact?"exactly":e.inclusive?"less than or equal to":"less than"," ").concat(e.maximum):"date"===e.type?"Date must be ".concat(e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(e.maximum))):"Invalid input";break;case Q.custom:n="Invalid input";break;case Q.invalid_intersection_types:n="Intersection results could not be merged";break;case Q.not_multiple_of:n="Number must be a multiple of ".concat(e.multipleOf);break;case Q.not_finite:n="Number must be finite";break;default:n=t.defaultError,ec.assertNever(e)}return{message:n}},er=en,ea=e=>{let{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o=(0,d.b)((0,d.a)({},a),{path:i}),s="";for(let e of r.filter(e=>!!e).slice().reverse())s=e(o,{data:t,defaultError:s}).message;return(0,d.b)((0,d.a)({},a),{path:i,message:a.message||s})};function ei(e,t){let n=ea({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,er,en].filter(e=>!!e)});e.common.issues.push(n)}var eo,es,el,ed,eu,ec,ep,em,eh=class{dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let r of t){if("aborted"===r.status)return eg;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static mergeObjectAsync(e,t){return(0,d.d)(this,null,function*(){let n=[];for(let e of t)n.push({key:yield e.key,value:yield e.value});return eh.mergeObjectSync(e,n)})}static mergeObjectSync(e,t){let n={};for(let r of t){let{key:t,value:a}=r;if("aborted"===t.status||"aborted"===a.status)return eg;"dirty"===t.status&&e.dirty(),"dirty"===a.status&&e.dirty(),(void 0!==a.value||r.alwaysSet)&&(n[t.value]=a.value)}return{status:e.value,value:n}}constructor(){this.value="valid"}},eg=Object.freeze({status:"aborted"}),eb=e=>({status:"dirty",value:e}),ef=e=>({status:"valid",value:e}),ey=e=>"aborted"===e.status,ev=e=>"dirty"===e.status,e_=e=>"valid"===e.status,eE=e=>"undefined"!=typeof Promise&&e instanceof Promise;(to=em||(em={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},to.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var ex=class{get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}},ew=(e,t)=>{if(e_(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new et(e.common.issues);return this._error=t,this._error}}};function eI(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:a}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=r?r:t.defaultError}:{message:null!=n?n:t.defaultError},description:a}}var eT=class{get description(){return this._def.description}_getType(e){return $(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:$(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new eh,ctx:{common:e.parent.common,data:e.data,parsedType:$(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(eE(t))throw Error("Synchronous parse encountered promise.");return t}_parseAsync(e){return Promise.resolve(this._parse(e))}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$(e)},a=this._parseSync({data:e,path:r.path,parent:r});return ew(r,a)}parseAsync(e,t){return(0,d.d)(this,null,function*(){let n=yield this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error})}safeParseAsync(e,t){return(0,d.d)(this,null,function*(){let n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$(e)},r=this._parse({data:e,path:n.path,parent:n}),a=yield eE(r)?r:Promise.resolve(r);return ew(n,a)})}refine(e,t){let n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let a=e(t),i=()=>r.addIssue((0,d.a)({code:Q.custom},n(t)));return"undefined"!=typeof Promise&&a instanceof Promise?a.then(e=>!!e||(i(),!1)):!!a||(i(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new te({schema:this,typeName:ts.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return tt.create(this,this._def)}nullable(){return tn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eW.create(this,this._def)}promise(){return e8.create(this,this._def)}or(e){return eX.create([this,e],this._def)}and(e){return e$.create(this,e,this._def)}transform(e){return new te((0,d.b)((0,d.a)({},eI(this._def)),{schema:this,typeName:ts.ZodEffects,effect:{type:"transform",transform:e}}))}default(e){return new tr((0,d.b)((0,d.a)({},eI(this._def)),{innerType:this,defaultValue:"function"==typeof e?e:()=>e,typeName:ts.ZodDefault}))}brand(){return new td((0,d.a)({typeName:ts.ZodBranded,type:this},eI(this._def)))}catch(e){return new ta((0,d.b)((0,d.a)({},eI(this._def)),{innerType:this,catchValue:"function"==typeof e?e:()=>e,typeName:ts.ZodCatch}))}describe(e){return new this.constructor((0,d.b)((0,d.a)({},this._def),{description:e}))}pipe(e){return tu.create(this,e)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}},eS=/^c[^\s-]{8,}$/i,eC=/^[a-z][a-z0-9]*$/,ej=/[0-9A-HJKMNP-TV-Z]{26}/,ek=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,eP=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\])|(\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\.[A-Za-z]{2,})+))$/,eN=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u"),eR=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,eA=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,eO=e=>e.precision?new RegExp(e.offset?"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(e.precision,"}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):"^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{".concat(e.precision,"}Z$")):0===e.precision?e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$"),eL=class extends eT{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.string,received:t.parsedType}),eg}let t=new eh,n;for(let i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(ei(n=this._getOrReturnCtx(e,n),{code:Q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(ei(n=this._getOrReturnCtx(e,n),{code:Q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){let r=e.data.length>i.value,a=e.data.length<i.value;(r||a)&&(n=this._getOrReturnCtx(e,n),r?ei(n,{code:Q.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ei(n,{code:Q.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)eP.test(e.data)||(ei(n=this._getOrReturnCtx(e,n),{validation:"email",code:Q.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)eN.test(e.data)||(ei(n=this._getOrReturnCtx(e,n),{validation:"emoji",code:Q.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)ek.test(e.data)||(ei(n=this._getOrReturnCtx(e,n),{validation:"uuid",code:Q.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)eS.test(e.data)||(ei(n=this._getOrReturnCtx(e,n),{validation:"cuid",code:Q.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)eC.test(e.data)||(ei(n=this._getOrReturnCtx(e,n),{validation:"cuid2",code:Q.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)ej.test(e.data)||(ei(n=this._getOrReturnCtx(e,n),{validation:"ulid",code:Q.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(r){ei(n=this._getOrReturnCtx(e,n),{validation:"url",code:Q.invalid_string,message:i.message}),t.dirty()}else{var r,a;"regex"===i.kind?(i.regex.lastIndex=0,i.regex.test(e.data)||(ei(n=this._getOrReturnCtx(e,n),{validation:"regex",code:Q.invalid_string,message:i.message}),t.dirty())):"trim"===i.kind?e.data=e.data.trim():"includes"===i.kind?e.data.includes(i.value,i.position)||(ei(n=this._getOrReturnCtx(e,n),{code:Q.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty()):"toLowerCase"===i.kind?e.data=e.data.toLowerCase():"toUpperCase"===i.kind?e.data=e.data.toUpperCase():"startsWith"===i.kind?e.data.startsWith(i.value)||(ei(n=this._getOrReturnCtx(e,n),{code:Q.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty()):"endsWith"===i.kind?e.data.endsWith(i.value)||(ei(n=this._getOrReturnCtx(e,n),{code:Q.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty()):"datetime"===i.kind?eO(i).test(e.data)||(ei(n=this._getOrReturnCtx(e,n),{code:Q.invalid_string,validation:"datetime",message:i.message}),t.dirty()):"ip"===i.kind?(r=e.data,("v4"===(a=i.version)||!a)&&eR.test(r)||("v6"===a||!a)&&eA.test(r)||(ei(n=this._getOrReturnCtx(e,n),{validation:"ip",code:Q.invalid_string,message:i.message}),t.dirty())):ec.assertNever(i)}return{status:t.value,value:e.data}}_addCheck(e){return new eL((0,d.b)((0,d.a)({},this._def),{checks:[...this._def.checks,e]}))}email(e){return this._addCheck((0,d.a)({kind:"email"},em.errToObj(e)))}url(e){return this._addCheck((0,d.a)({kind:"url"},em.errToObj(e)))}emoji(e){return this._addCheck((0,d.a)({kind:"emoji"},em.errToObj(e)))}uuid(e){return this._addCheck((0,d.a)({kind:"uuid"},em.errToObj(e)))}cuid(e){return this._addCheck((0,d.a)({kind:"cuid"},em.errToObj(e)))}cuid2(e){return this._addCheck((0,d.a)({kind:"cuid2"},em.errToObj(e)))}ulid(e){return this._addCheck((0,d.a)({kind:"ulid"},em.errToObj(e)))}ip(e){return this._addCheck((0,d.a)({kind:"ip"},em.errToObj(e)))}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck((0,d.a)({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t},em.errToObj(null==e?void 0:e.message)))}regex(e,t){return this._addCheck((0,d.a)({kind:"regex",regex:e},em.errToObj(t)))}includes(e,t){return this._addCheck((0,d.a)({kind:"includes",value:e,position:null==t?void 0:t.position},em.errToObj(null==t?void 0:t.message)))}startsWith(e,t){return this._addCheck((0,d.a)({kind:"startsWith",value:e},em.errToObj(t)))}endsWith(e,t){return this._addCheck((0,d.a)({kind:"endsWith",value:e},em.errToObj(t)))}min(e,t){return this._addCheck((0,d.a)({kind:"min",value:e},em.errToObj(t)))}max(e,t){return this._addCheck((0,d.a)({kind:"max",value:e},em.errToObj(t)))}length(e,t){return this._addCheck((0,d.a)({kind:"length",value:e},em.errToObj(t)))}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}constructor(){super(...arguments),this._regex=(e,t,n)=>this.refinement(t=>e.test(t),(0,d.a)({validation:t,code:Q.invalid_string},em.errToObj(n))),this.nonempty=e=>this.min(1,em.errToObj(e)),this.trim=()=>new eL((0,d.b)((0,d.a)({},this._def),{checks:[...this._def.checks,{kind:"trim"}]})),this.toLowerCase=()=>new eL((0,d.b)((0,d.a)({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]})),this.toUpperCase=()=>new eL((0,d.b)((0,d.a)({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}};eL.create=e=>{var t;return new eL((0,d.a)({checks:[],typeName:ts.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t},eI(e)))};var eU=class extends eT{_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.number,received:t.parsedType}),eg}let t,n=new eh;for(let r of this._def.checks)"int"===r.kind?ec.isInteger(e.data)||(ei(t=this._getOrReturnCtx(e,t),{code:Q.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==function(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r;return parseInt(e.toFixed(a).replace(".",""))%parseInt(t.toFixed(a).replace(".",""))/Math.pow(10,a)}(e.data,r.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(ei(t=this._getOrReturnCtx(e,t),{code:Q.not_finite,message:r.message}),n.dirty()):ec.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,em.toString(t))}gt(e,t){return this.setLimit("min",e,!1,em.toString(t))}lte(e,t){return this.setLimit("max",e,!0,em.toString(t))}lt(e,t){return this.setLimit("max",e,!1,em.toString(t))}setLimit(e,t,n,r){return new eU((0,d.b)((0,d.a)({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:em.toString(r)}]}))}_addCheck(e){return new eU((0,d.b)((0,d.a)({},this._def),{checks:[...this._def.checks,e]}))}int(e){return this._addCheck({kind:"int",message:em.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:em.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:em.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:em.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:em.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:em.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:em.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:em.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:em.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&ec.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}};eU.create=e=>new eU((0,d.a)({checks:[],typeName:ts.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1},eI(e)));var eB=class extends eT{_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.bigint,received:t.parsedType}),eg}let t,n=new eh;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(ei(t=this._getOrReturnCtx(e,t),{code:Q.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):ec.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,em.toString(t))}gt(e,t){return this.setLimit("min",e,!1,em.toString(t))}lte(e,t){return this.setLimit("max",e,!0,em.toString(t))}lt(e,t){return this.setLimit("max",e,!1,em.toString(t))}setLimit(e,t,n,r){return new eB((0,d.b)((0,d.a)({},this._def),{checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:em.toString(r)}]}))}_addCheck(e){return new eB((0,d.b)((0,d.a)({},this._def),{checks:[...this._def.checks,e]}))}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:em.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:em.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:em.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:em.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:em.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}};eB.create=e=>{var t;return new eB((0,d.a)({checks:[],typeName:ts.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t},eI(e)))};var eM=class extends eT{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.boolean,received:t.parsedType}),eg}return ef(e.data)}};eM.create=e=>new eM((0,d.a)({typeName:ts.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1},eI(e)));var eD=class extends eT{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.date,received:t.parsedType}),eg}if(isNaN(e.data.getTime()))return ei(this._getOrReturnCtx(e),{code:Q.invalid_date}),eg;let t=new eh,n;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(ei(n=this._getOrReturnCtx(e,n),{code:Q.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(ei(n=this._getOrReturnCtx(e,n),{code:Q.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):ec.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new eD((0,d.b)((0,d.a)({},this._def),{checks:[...this._def.checks,e]}))}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:em.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:em.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};eD.create=e=>new eD((0,d.a)({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:ts.ZodDate},eI(e)));var ez=class extends eT{_parse(e){if(this._getType(e)!==J.symbol){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.symbol,received:t.parsedType}),eg}return ef(e.data)}};ez.create=e=>new ez((0,d.a)({typeName:ts.ZodSymbol},eI(e)));var eZ=class extends eT{_parse(e){if(this._getType(e)!==J.undefined){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.undefined,received:t.parsedType}),eg}return ef(e.data)}};eZ.create=e=>new eZ((0,d.a)({typeName:ts.ZodUndefined},eI(e)));var eV=class extends eT{_parse(e){if(this._getType(e)!==J.null){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.null,received:t.parsedType}),eg}return ef(e.data)}};eV.create=e=>new eV((0,d.a)({typeName:ts.ZodNull},eI(e)));var eH=class extends eT{_parse(e){return ef(e.data)}constructor(){super(...arguments),this._any=!0}};eH.create=e=>new eH((0,d.a)({typeName:ts.ZodAny},eI(e)));var eG=class extends eT{_parse(e){return ef(e.data)}constructor(){super(...arguments),this._unknown=!0}};eG.create=e=>new eG((0,d.a)({typeName:ts.ZodUnknown},eI(e)));var eF=class extends eT{_parse(e){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.never,received:t.parsedType}),eg}};eF.create=e=>new eF((0,d.a)({typeName:ts.ZodNever},eI(e)));var eY=class extends eT{_parse(e){if(this._getType(e)!==J.undefined){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.void,received:t.parsedType}),eg}return ef(e.data)}};eY.create=e=>new eY((0,d.a)({typeName:ts.ZodVoid},eI(e)));var eW=class extends eT{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==J.array)return ei(t,{code:Q.invalid_type,expected:J.array,received:t.parsedType}),eg;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,a=t.data.length<r.exactLength.value;(e||a)&&(ei(t,{code:e?Q.too_big:Q.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(ei(t,{code:Q.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(ei(t,{code:Q.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new ex(t,e,t.path,n)))).then(e=>eh.mergeArray(n,e));let a=[...t.data].map((e,n)=>r.type._parseSync(new ex(t,e,t.path,n)));return eh.mergeArray(n,a)}get element(){return this._def.type}min(e,t){return new eW((0,d.b)((0,d.a)({},this._def),{minLength:{value:e,message:em.toString(t)}}))}max(e,t){return new eW((0,d.b)((0,d.a)({},this._def),{maxLength:{value:e,message:em.toString(t)}}))}length(e,t){return new eW((0,d.b)((0,d.a)({},this._def),{exactLength:{value:e,message:em.toString(t)}}))}nonempty(e){return this.min(1,e)}};eW.create=(e,t)=>new eW((0,d.a)({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ts.ZodArray},eI(t)));var eK=class extends eT{_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=ec.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==J.object){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.object,received:t.parsedType}),eg}let{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof eF&&"strip"===this._def.unknownKeys))for(let e in n.data)a.includes(e)||i.push(e);let o=[];for(let e of a){let t=r[e],a=n.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new ex(n,a,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof eF){let e=this._def.unknownKeys;if("passthrough"===e)for(let e of i)o.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)i.length>0&&(ei(n,{code:Q.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of i){let r=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new ex(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(()=>(0,d.d)(this,null,function*(){let e=[];for(let t of o){let n=yield t.key;e.push({key:n,value:yield t.value,alwaysSet:t.alwaysSet})}return e})).then(e=>eh.mergeObjectSync(t,e)):eh.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return em.errToObj,new eK((0,d.a)((0,d.b)((0,d.a)({},this._def),{unknownKeys:"strict"}),void 0!==e?{errorMap:(t,n)=>{var r,a,i,o;let s=null!==(i=null===(a=(r=this._def).errorMap)||void 0===a?void 0:a.call(r,t,n).message)&&void 0!==i?i:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=em.errToObj(e).message)&&void 0!==o?o:s}:{message:s}}}:{}))}strip(){return new eK((0,d.b)((0,d.a)({},this._def),{unknownKeys:"strip"}))}passthrough(){return new eK((0,d.b)((0,d.a)({},this._def),{unknownKeys:"passthrough"}))}extend(e){return new eK((0,d.b)((0,d.a)({},this._def),{shape:()=>(0,d.a)((0,d.a)({},this._def.shape()),e)}))}merge(e){return new eK({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>(0,d.a)((0,d.a)({},this._def.shape()),e._def.shape()),typeName:ts.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new eK((0,d.b)((0,d.a)({},this._def),{catchall:e}))}pick(e){let t={};return ec.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])}),new eK((0,d.b)((0,d.a)({},this._def),{shape:()=>t}))}omit(e){let t={};return ec.objectKeys(this.shape).forEach(n=>{e[n]||(t[n]=this.shape[n])}),new eK((0,d.b)((0,d.a)({},this._def),{shape:()=>t}))}deepPartial(){return function e(t){if(!(t instanceof eK))return t instanceof eW?new eW((0,d.b)((0,d.a)({},t._def),{type:e(t.element)})):t instanceof tt?tt.create(e(t.unwrap())):t instanceof tn?tn.create(e(t.unwrap())):t instanceof eQ?eQ.create(t.items.map(t=>e(t))):t;{let n={};for(let r in t.shape){let a=t.shape[r];n[r]=tt.create(e(a))}return new eK((0,d.b)((0,d.a)({},t._def),{shape:()=>n}))}}(this)}partial(e){let t={};return ec.objectKeys(this.shape).forEach(n=>{let r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}),new eK((0,d.b)((0,d.a)({},this._def),{shape:()=>t}))}required(e){let t={};return ec.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof tt;)e=e._def.innerType;t[n]=e}}),new eK((0,d.b)((0,d.a)({},this._def),{shape:()=>t}))}keyof(){return e9(ec.objectKeys(this.shape))}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}};eK.create=(e,t)=>new eK((0,d.a)({shape:()=>e,unknownKeys:"strip",catchall:eF.create(),typeName:ts.ZodObject},eI(t))),eK.strictCreate=(e,t)=>new eK((0,d.a)({shape:()=>e,unknownKeys:"strict",catchall:eF.create(),typeName:ts.ZodObject},eI(t))),eK.lazycreate=(e,t)=>new eK((0,d.a)({shape:e,unknownKeys:"strip",catchall:eF.create(),typeName:ts.ZodObject},eI(t)));var eX=class extends eT{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(e=>(0,d.d)(this,null,function*(){let n=(0,d.b)((0,d.a)({},t),{common:(0,d.b)((0,d.a)({},t.common),{issues:[]}),parent:null});return{result:yield e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;let n=e.map(e=>new et(e.ctx.common.issues));return ei(t,{code:Q.invalid_union,unionErrors:n}),eg});{let e,r=[];for(let a of n){let n=(0,d.b)((0,d.a)({},t),{common:(0,d.b)((0,d.a)({},t.common),{issues:[]}),parent:null}),i=a._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let a=r.map(e=>new et(e));return ei(t,{code:Q.invalid_union,unionErrors:a}),eg}}get options(){return this._def.options}};eX.create=(e,t)=>new eX((0,d.a)({options:e,typeName:ts.ZodUnion},eI(t)));var eq=e=>e instanceof e4?eq(e.schema):e instanceof te?eq(e.innerType()):e instanceof e3?[e.value]:e instanceof e6?e.options:e instanceof e7?Object.keys(e.enum):e instanceof tr?eq(e._def.innerType):e instanceof eZ?[void 0]:e instanceof eV?[null]:null,eJ=class extends eT{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==J.object)return ei(t,{code:Q.invalid_type,expected:J.object,received:t.parsedType}),eg;let n=this.discriminator,r=t.data[n],a=this.optionsMap.get(r);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(ei(t,{code:Q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),eg)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){let r=new Map;for(let n of t){let t=eq(n.shape[e]);if(!t)throw Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(let a of t){if(r.has(a))throw Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(a)));r.set(a,n)}}return new eJ((0,d.a)({typeName:ts.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r},eI(n)))}},e$=class extends eT{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(ey(e)||ey(r))return eg;let a=function e(t,n){let r=$(t),a=$(n);if(t===n)return{valid:!0,data:t};if(r===J.object&&a===J.object){let r=ec.objectKeys(n),a=ec.objectKeys(t).filter(e=>-1!==r.indexOf(e)),i=(0,d.a)((0,d.a)({},t),n);for(let r of a){let a=e(t[r],n[r]);if(!a.valid)return{valid:!1};i[r]=a.data}return{valid:!0,data:i}}if(r!==J.array||a!==J.array)return r===J.date&&a===J.date&&+t==+n?{valid:!0,data:t}:{valid:!1};{if(t.length!==n.length)return{valid:!1};let r=[];for(let a=0;a<t.length;a++){let i=e(t[a],n[a]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}}(e.value,r.value);return a.valid?((ev(e)||ev(r))&&t.dirty(),{status:t.value,value:a.data}):(ei(n,{code:Q.invalid_intersection_types}),eg)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(e=>{let[t,n]=e;return r(t,n)}):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};e$.create=(e,t,n)=>new e$((0,d.a)({left:e,right:t,typeName:ts.ZodIntersection},eI(n)));var eQ=class extends eT{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return ei(n,{code:Q.invalid_type,expected:J.array,received:n.parsedType}),eg;if(n.data.length<this._def.items.length)return ei(n,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),eg;!this._def.rest&&n.data.length>this._def.items.length&&(ei(n,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...n.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new ex(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>eh.mergeArray(t,e)):eh.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new eQ((0,d.b)((0,d.a)({},this._def),{rest:e}))}};eQ.create=(e,t)=>{if(!Array.isArray(e))throw Error("You must pass an array of schemas to z.tuple([ ... ])");return new eQ((0,d.a)({items:e,typeName:ts.ZodTuple,rest:null},eI(t)))};var e0=class extends eT{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return ei(n,{code:Q.invalid_type,expected:J.object,received:n.parsedType}),eg;let r=[],a=this._def.keyType,i=this._def.valueType;for(let e in n.data)r.push({key:a._parse(new ex(n,e,n.path,e)),value:i._parse(new ex(n,n.data[e],n.path,e))});return n.common.async?eh.mergeObjectAsync(t,r):eh.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new e0(t instanceof eT?(0,d.a)({keyType:e,valueType:t,typeName:ts.ZodRecord},eI(n)):(0,d.a)({keyType:eL.create(),valueType:e,typeName:ts.ZodRecord},eI(t)))}},e1=class extends eT{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return ei(n,{code:Q.invalid_type,expected:J.map,received:n.parsedType}),eg;let r=this._def.keyType,a=this._def.valueType,i=[...n.data.entries()].map((e,t)=>{let[i,o]=e;return{key:r._parse(new ex(n,i,n.path,[t,"key"])),value:a._parse(new ex(n,o,n.path,[t,"value"]))}});if(n.common.async){let e=new Map;return Promise.resolve().then(()=>(0,d.d)(this,null,function*(){for(let n of i){let r=yield n.key,a=yield n.value;if("aborted"===r.status||"aborted"===a.status)return eg;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}))}{let e=new Map;for(let n of i){let r=n.key,a=n.value;if("aborted"===r.status||"aborted"===a.status)return eg;("dirty"===r.status||"dirty"===a.status)&&t.dirty(),e.set(r.value,a.value)}return{status:t.value,value:e}}}};e1.create=(e,t,n)=>new e1((0,d.a)({valueType:t,keyType:e,typeName:ts.ZodMap},eI(n)));var e2=class extends eT{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return ei(n,{code:Q.invalid_type,expected:J.set,received:n.parsedType}),eg;let r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(ei(n,{code:Q.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(ei(n,{code:Q.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let a=this._def.valueType;function i(e){let n=new Set;for(let r of e){if("aborted"===r.status)return eg;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}let o=[...n.data.values()].map((e,t)=>a._parse(new ex(n,e,n.path,t)));return n.common.async?Promise.all(o).then(e=>i(e)):i(o)}min(e,t){return new e2((0,d.b)((0,d.a)({},this._def),{minSize:{value:e,message:em.toString(t)}}))}max(e,t){return new e2((0,d.b)((0,d.a)({},this._def),{maxSize:{value:e,message:em.toString(t)}}))}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};e2.create=(e,t)=>new e2((0,d.a)({valueType:e,minSize:null,maxSize:null,typeName:ts.ZodSet},eI(t)));var e5=class extends eT{_parse(e){var t=this;let{ctx:n}=this._processInputParams(e);if(n.parsedType!==J.function)return ei(n,{code:Q.invalid_type,expected:J.function,received:n.parsedType}),eg;function r(e,t){return ea({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,er,en].filter(e=>!!e),issueData:{code:Q.invalid_arguments,argumentsError:t}})}function a(e,t){return ea({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,er,en].filter(e=>!!e),issueData:{code:Q.invalid_return_type,returnTypeError:t}})}let i={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof e8?ef(function(){for(var e=arguments.length,n=Array(e),s=0;s<e;s++)n[s]=arguments[s];return(0,d.d)(t,null,function*(){let e=new et([]),t=yield this._def.args.parseAsync(n,i).catch(t=>{throw e.addIssue(r(n,t)),e}),s=yield o(...t);return yield this._def.returns._def.type.parseAsync(s,i).catch(t=>{throw e.addIssue(a(s,t)),e})})}):ef(function(){for(var e=arguments.length,n=Array(e),s=0;s<e;s++)n[s]=arguments[s];let l=t._def.args.safeParse(n,i);if(!l.success)throw new et([r(n,l.error)]);let d=o(...l.data),u=t._def.returns.safeParse(d,i);if(!u.success)throw new et([a(d,u.error)]);return u.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new e5((0,d.b)((0,d.a)({},this._def),{args:eQ.create(t).rest(eG.create())}))}returns(e){return new e5((0,d.b)((0,d.a)({},this._def),{returns:e}))}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new e5((0,d.a)({args:e||eQ.create([]).rest(eG.create()),returns:t||eG.create(),typeName:ts.ZodFunction},eI(n)))}constructor(){super(...arguments),this.validate=this.implement}},e4=class extends eT{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};e4.create=(e,t)=>new e4((0,d.a)({getter:e,typeName:ts.ZodLazy},eI(t)));var e3=class extends eT{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return ei(t,{received:t.data,code:Q.invalid_literal,expected:this._def.value}),eg}return{status:"valid",value:e.data}}get value(){return this._def.value}};function e9(e,t){return new e6((0,d.a)({values:e,typeName:ts.ZodEnum},eI(t)))}e3.create=(e,t)=>new e3((0,d.a)({value:e,typeName:ts.ZodLiteral},eI(t)));var e6=class extends eT{_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),n=this._def.values;return ei(t,{expected:ec.joinValues(n),received:t.parsedType,code:Q.invalid_type}),eg}if(-1===this._def.values.indexOf(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return ei(t,{received:t.data,code:Q.invalid_enum_value,options:n}),eg}return ef(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e){return e6.create(e)}exclude(e){return e6.create(this.options.filter(t=>!e.includes(t)))}};e6.create=e9;var e7=class extends eT{_parse(e){let t=ec.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let e=ec.objectValues(t);return ei(n,{expected:ec.joinValues(e),received:n.parsedType,code:Q.invalid_type}),eg}if(-1===t.indexOf(e.data)){let e=ec.objectValues(t);return ei(n,{received:n.data,code:Q.invalid_enum_value,options:e}),eg}return ef(e.data)}get enum(){return this._def.values}};e7.create=(e,t)=>new e7((0,d.a)({values:e,typeName:ts.ZodNativeEnum},eI(t)));var e8=class extends eT{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);return t.parsedType!==J.promise&&!1===t.common.async?(ei(t,{code:Q.invalid_type,expected:J.promise,received:t.parsedType}),eg):ef((t.parsedType===J.promise?t.data:Promise.resolve(t.data)).then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}};e8.create=(e,t)=>new e8((0,d.a)({type:e,typeName:ts.ZodPromise},eI(t)));var te=class extends eT{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ts.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null;if("preprocess"===r.type){let e=r.transform(n.data);return n.common.async?Promise.resolve(e).then(e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n})):this._def.schema._parseSync({data:e,path:n.path,parent:n})}let a={addIssue:e=>{ei(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"refinement"===r.type){let e=e=>{let t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?eg:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))));{let r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?eg:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}}if("transform"===r.type){if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>e_(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);{let e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!e_(e))return e;let i=r.transform(e.value,a);if(i instanceof Promise)throw Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}}ec.assertNever(r)}};te.create=(e,t,n)=>new te((0,d.a)({schema:e,typeName:ts.ZodEffects,effect:t},eI(n))),te.createWithPreprocess=(e,t,n)=>new te((0,d.a)({schema:t,effect:{type:"preprocess",transform:e},typeName:ts.ZodEffects},eI(n)));var tt=class extends eT{_parse(e){return this._getType(e)===J.undefined?ef(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};tt.create=(e,t)=>new tt((0,d.a)({innerType:e,typeName:ts.ZodOptional},eI(t)));var tn=class extends eT{_parse(e){return this._getType(e)===J.null?ef(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};tn.create=(e,t)=>new tn((0,d.a)({innerType:e,typeName:ts.ZodNullable},eI(t)));var tr=class extends eT{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};tr.create=(e,t)=>new tr((0,d.a)({innerType:e,typeName:ts.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default},eI(t)));var ta=class extends eT{_parse(e){let{ctx:t}=this._processInputParams(e),n=(0,d.b)((0,d.a)({},t),{common:(0,d.b)((0,d.a)({},t.common),{issues:[]})}),r=this._def.innerType._parse({data:n.data,path:n.path,parent:(0,d.a)({},n)});return eE(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new et(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new et(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ta.create=(e,t)=>new ta((0,d.a)({innerType:e,typeName:ts.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch},eI(t)));var ti=class extends eT{_parse(e){if(this._getType(e)!==J.nan){let t=this._getOrReturnCtx(e);return ei(t,{code:Q.invalid_type,expected:J.nan,received:t.parsedType}),eg}return{status:"valid",value:e.data}}};ti.create=e=>new ti((0,d.a)({typeName:ts.ZodNaN},eI(e)));var to,ts,tl=Symbol("zod_brand"),td=class extends eT{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},tu=class extends eT{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(0,d.d)(this,null,function*(){let e=yield this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?eg:"dirty"===e.status?(t.dirty(),eb(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})});{let e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?eg:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new tu({in:e,out:t,typeName:ts.ZodPipeline})}},tc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e?eH.create().superRefine((r,a)=>{var i,o;if(!e(r)){let e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,s=null===(o=null!==(i=e.fatal)&&void 0!==i?i:n)||void 0===o||o;a.addIssue((0,d.b)((0,d.a)({code:"custom"},"string"==typeof e?{message:e}:e),{fatal:s}))}}):eH.create()},tp={object:eK.lazycreate};(aA=ts||(ts={})).ZodString="ZodString",aA.ZodNumber="ZodNumber",aA.ZodNaN="ZodNaN",aA.ZodBigInt="ZodBigInt",aA.ZodBoolean="ZodBoolean",aA.ZodDate="ZodDate",aA.ZodSymbol="ZodSymbol",aA.ZodUndefined="ZodUndefined",aA.ZodNull="ZodNull",aA.ZodAny="ZodAny",aA.ZodUnknown="ZodUnknown",aA.ZodNever="ZodNever",aA.ZodVoid="ZodVoid",aA.ZodArray="ZodArray",aA.ZodObject="ZodObject",aA.ZodUnion="ZodUnion",aA.ZodDiscriminatedUnion="ZodDiscriminatedUnion",aA.ZodIntersection="ZodIntersection",aA.ZodTuple="ZodTuple",aA.ZodRecord="ZodRecord",aA.ZodMap="ZodMap",aA.ZodSet="ZodSet",aA.ZodFunction="ZodFunction",aA.ZodLazy="ZodLazy",aA.ZodLiteral="ZodLiteral",aA.ZodEnum="ZodEnum",aA.ZodEffects="ZodEffects",aA.ZodNativeEnum="ZodNativeEnum",aA.ZodOptional="ZodOptional",aA.ZodNullable="ZodNullable",aA.ZodDefault="ZodDefault",aA.ZodCatch="ZodCatch",aA.ZodPromise="ZodPromise",aA.ZodBranded="ZodBranded",aA.ZodPipeline="ZodPipeline";var tm=eL.create,th=eU.create,tg=ti.create,tb=eB.create,tf=eM.create,ty=eD.create,tv=ez.create,t_=eZ.create,tE=eV.create,tx=eH.create,tw=eG.create,tI=eF.create,tT=eY.create,tS=eW.create,tC=eK.create,tj=eK.strictCreate,tk=eX.create,tP=eJ.create,tN=e$.create,tR=eQ.create,tA=e0.create,tO=e1.create,tL=e2.create,tU=e5.create,tB=e4.create,tM=e3.create,tD=e6.create,tz=e7.create,tZ=e8.create,tV=te.create,tH=tt.create,tG=tn.create,tF=te.createWithPreprocess,tY=tu.create,tW=()=>th().optional(),tK=()=>tf().optional(),tX=Object.freeze({__proto__:null,defaultErrorMap:en,setErrorMap:function(e){er=e},getErrorMap:function(){return er},makeIssue:ea,EMPTY_PATH:[],addIssueToContext:ei,ParseStatus:eh,INVALID:eg,DIRTY:eb,OK:ef,isAborted:ey,isDirty:ev,isValid:e_,isAsync:eE,get util(){return ec},get objectUtil(){return ep},ZodParsedType:J,getParsedType:$,ZodType:eT,ZodString:eL,ZodNumber:eU,ZodBigInt:eB,ZodBoolean:eM,ZodDate:eD,ZodSymbol:ez,ZodUndefined:eZ,ZodNull:eV,ZodAny:eH,ZodUnknown:eG,ZodNever:eF,ZodVoid:eY,ZodArray:eW,ZodObject:eK,ZodUnion:eX,ZodDiscriminatedUnion:eJ,ZodIntersection:e$,ZodTuple:eQ,ZodRecord:e0,ZodMap:e1,ZodSet:e2,ZodFunction:e5,ZodLazy:e4,ZodLiteral:e3,ZodEnum:e6,ZodNativeEnum:e7,ZodPromise:e8,ZodEffects:te,ZodTransformer:te,ZodOptional:tt,ZodNullable:tn,ZodDefault:tr,ZodCatch:ta,ZodNaN:ti,BRAND:tl,ZodBranded:td,ZodPipeline:tu,custom:tc,Schema:eT,ZodSchema:eT,late:tp,get ZodFirstPartyTypeKind(){return ts},coerce:{string:e=>eL.create((0,d.b)((0,d.a)({},e),{coerce:!0})),number:e=>eU.create((0,d.b)((0,d.a)({},e),{coerce:!0})),boolean:e=>eM.create((0,d.b)((0,d.a)({},e),{coerce:!0})),bigint:e=>eB.create((0,d.b)((0,d.a)({},e),{coerce:!0})),date:e=>eD.create((0,d.b)((0,d.a)({},e),{coerce:!0}))},any:tx,array:tS,bigint:tb,boolean:tf,date:ty,discriminatedUnion:tP,effect:tV,enum:tD,function:tU,instanceof:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:"Input not instance of ".concat(e.name)};return tc(t=>t instanceof e,t)},intersection:tN,lazy:tB,literal:tM,map:tO,nan:tg,nativeEnum:tz,never:tI,null:tE,nullable:tG,number:th,object:tC,oboolean:tK,onumber:tW,optional:tH,ostring:()=>tm().optional(),pipeline:tY,preprocess:tF,promise:tZ,record:tA,set:tL,strictObject:tj,string:tm,symbol:tv,transformer:tV,tuple:tR,undefined:t_,union:tk,unknown:tw,void:tT,NEVER:eg,ZodIssueCode:Q,quotelessJson:ee,ZodError:et}),tq=tX.object({id:tX.string(),groupId:tX.string(),outgoingEdgeId:tX.string().optional()}),tJ=tX.object({variableId:tX.string().optional()}),t$=tX.object({id:tX.string(),createdAt:tX.date(),workspaceId:tX.string(),name:tX.string(),iv:tX.string()}),tQ=tX.object({url:tX.string().optional(),isAutoplayEnabled:tX.boolean().optional()}),t0=tq.merge(tX.object({type:tX.enum(["audio"]),content:tQ})),t1=tX.custom(e=>/^{{.+}}$/g.test(e)),t2=tX.object({url:tX.string().optional(),height:tX.number().or(t1)}),t5=tq.merge(tX.object({type:tX.enum(["embed"]),content:t2})),t4=tX.object({url:tX.string().optional(),clickLink:tX.object({url:tX.string().optional(),alt:tX.string().optional()}).optional()}),t3=tq.merge(tX.object({type:tX.enum(["image"]),content:t4})),t9=tX.object({html:tX.string().optional(),richText:tX.array(tX.any()),plainText:tX.string().optional()}),t6=tq.merge(tX.object({type:tX.enum(["text"]),content:t9})),t7=((aO=t7||{}).URL="url",aO.YOUTUBE="youtube",aO.VIMEO="vimeo",aO),t8=tX.object({url:tX.string().optional(),id:tX.string().optional(),type:tX.nativeEnum(t7).optional()}),ne=tq.merge(tX.object({type:tX.enum(["video"]),content:t8})),nt=tX.object({id:tX.string(),blockId:tX.string().optional().describe("Deprecated"),outgoingEdgeId:tX.string().optional()}),nn=((aL=nn||{}).OR="OR",aL.AND="AND",aL),nr=((aU=nr||{}).EQUAL="Equal to",aU.NOT_EQUAL="Not equal",aU.CONTAINS="Contains",aU.NOT_CONTAINS="Does not contain",aU.GREATER="Greater than",aU.LESS="Less than",aU.IS_SET="Is set",aU.IS_EMPTY="Is empty",aU.STARTS_WITH="Starts with",aU.ENDS_WITH="Ends with",aU.MATCHES_REGEX="Matches regex",aU.NOT_MATCH_REGEX="Does not match regex",aU),na=tX.object({id:tX.string(),variableId:tX.string().optional(),comparisonOperator:tX.nativeEnum(nr).optional(),value:tX.string().optional()}),ni=tX.object({logicalOperator:tX.nativeEnum(nn),comparisons:tX.array(na)}),no=nt.merge(tX.object({type:tX.literal(1),content:ni})),ns=tq.merge(tX.object({type:tX.enum(["Condition"]),items:tX.array(no)})),nl=tJ.merge(tX.object({isMultipleChoice:tX.boolean(),buttonLabel:tX.string(),dynamicVariableId:tX.string().optional(),isSearchable:tX.boolean().optional(),searchInputPlaceholder:tX.string().optional()})),nd=nt.merge(tX.object({type:tX.literal(0),content:tX.string().optional(),displayCondition:tX.object({isEnabled:tX.boolean().optional(),condition:ni.optional()}).optional()})),nu=tq.merge(tX.object({type:tX.enum(["choice input"]),items:tX.array(nd),options:nl})),nc=tJ.merge(tX.object({labels:tX.object({button:tX.string(),from:tX.string(),to:tX.string()}),hasTime:tX.boolean(),isRange:tX.boolean(),format:tX.string().optional()})),np=tq.merge(tX.object({type:tX.enum(["date input"]),options:nc})),nm=tX.object({labels:tX.object({placeholder:tX.string(),button:tX.string()})}),nh=nm.merge(tJ).merge(tX.object({isLong:tX.boolean()})),ng=tq.merge(tX.object({type:tX.enum(["text input"]),options:nh})),nb=tJ.merge(nm).merge(tX.object({retryMessageContent:tX.string().optional()})),nf=tq.merge(tX.object({type:tX.enum(["email input"]),options:nb})),ny=tJ.merge(tX.object({isRequired:tX.boolean().optional(),isMultipleAllowed:tX.boolean(),labels:tX.object({placeholder:tX.string(),button:tX.string(),clear:tX.string().optional(),skip:tX.string().optional()}),sizeLimit:tX.number().optional()})),nv=tq.merge(tX.object({type:tX.literal("file input"),options:ny})),n_={isRequired:!0,isMultipleAllowed:!1,labels:{placeholder:"<strong>\n      Click to upload\n    </strong> or drag and drop<br>\n    (size limit: 10MB)",button:"Upload",clear:"Clear",skip:"Skip"}},nE=tJ.merge(nm).merge(tX.object({min:tX.number().or(t1).optional(),max:tX.number().or(t1).optional(),step:tX.number().or(t1).optional()})),nx=tq.merge(tX.object({type:tX.enum(["number input"]),options:nE})),nw=((aB=nw||{}).STRIPE="Stripe",aB),nI=tX.object({country:tX.string().optional(),line1:tX.string().optional(),line2:tX.string().optional(),state:tX.string().optional(),city:tX.string().optional(),postalCode:tX.string().optional()}),nT=tJ.merge(tX.object({provider:tX.nativeEnum(nw),labels:tX.object({button:tX.string(),success:tX.string().optional()}),additionalInformation:tX.object({description:tX.string().optional(),name:tX.string().optional(),email:tX.string().optional(),phoneNumber:tX.string().optional(),address:nI.optional()}).optional(),credentialsId:tX.string().optional(),currency:tX.string(),amount:tX.string().optional(),retryMessageContent:tX.string().optional()})),nS=tX.object({paymentIntentSecret:tX.string(),amountLabel:tX.string(),publicKey:tX.string()}),nC=tq.merge(tX.object({type:tX.enum(["payment input"]),options:nT})),nj=tX.object({type:tX.literal("stripe"),data:tX.object({live:tX.object({secretKey:tX.string(),publicKey:tX.string()}),test:tX.object({secretKey:tX.string().optional(),publicKey:tX.string().optional()})})}).merge(t$),nk=tJ.merge(nm).merge(tX.object({retryMessageContent:tX.string(),defaultCountryCode:tX.string().optional()})),nP=tq.merge(tX.object({type:tX.enum(["phone number input"]),options:nk})),nN=tJ.merge(tX.object({buttonType:tX.literal("Icons").or(tX.literal("Numbers")),length:tX.number(),labels:tX.object({left:tX.string().optional(),right:tX.string().optional(),button:tX.string()}),customIcon:tX.object({isEnabled:tX.boolean(),svg:tX.string().optional()}),isOneClickSubmitEnabled:tX.boolean().optional()})),nR=tq.merge(tX.object({type:tX.literal("rating input"),options:nN})),nA=tJ.merge(nm).merge(tX.object({retryMessageContent:tX.string()})),nO=tq.merge(tX.object({type:tX.enum(["url input"]),options:nA})),nL=tJ.merge(tX.object({isMultipleChoice:tX.boolean().optional(),isSearchable:tX.boolean().optional(),buttonLabel:tX.string(),searchInputPlaceholder:tX.string(),dynamicItems:tX.object({isEnabled:tX.boolean().optional(),titlesVariableId:tX.string().optional(),descriptionsVariableId:tX.string().optional(),pictureSrcsVariableId:tX.string().optional()}).optional()})),nU=nt.merge(tX.object({type:tX.literal(3),pictureSrc:tX.string().optional(),title:tX.string().optional(),description:tX.string().optional(),displayCondition:tX.object({isEnabled:tX.boolean().optional(),condition:ni.optional()}).optional()})),nB=tq.merge(tX.object({type:tX.enum(["picture choice input"]),items:tX.array(nU),options:nL})),nM=tX.object({task:tX.enum(["Show widget","Close widget"]).optional(),baseUrl:tX.string(),websiteToken:tX.string(),user:tX.object({id:tX.string().optional(),email:tX.string().optional(),name:tX.string().optional(),avatarUrl:tX.string().optional(),phoneNumber:tX.string().optional()}).optional()}),nD=tq.merge(tX.object({type:tX.enum(["Chatwoot"]),options:nM})),nz=tX.object({trackingId:tX.string().optional(),category:tX.string().optional(),action:tX.string().optional(),label:tX.string().optional(),value:tX.number().or(t1).optional(),sendTo:tX.string().optional()}),nZ=tq.merge(tX.object({type:tX.enum(["Google Analytics"]),options:nz})),nV=tX.object({column:tX.string().optional(),value:tX.string().optional(),id:tX.string()}),nH=tX.object({column:tX.string().optional(),id:tX.string(),variableId:tX.string().optional()}),nG=tX.object({credentialsId:tX.string().optional(),sheetId:tX.string().optional(),spreadsheetId:tX.string().optional()}),nF=tX.object({id:tX.string(),column:tX.string().optional(),comparisonOperator:tX.nativeEnum(nr).optional(),value:tX.string().optional()}),nY=nG.merge(tX.object({action:tX.undefined()})),nW=nG.merge(tX.object({action:tX.enum(["Get data from sheet"]),referenceCell:nV.optional().describe("Deprecated. Use `filter` instead."),filter:tX.object({comparisons:tX.array(nF),logicalOperator:tX.nativeEnum(nn)}).optional(),cellsToExtract:tX.array(nH),totalRowsToExtract:tX.enum(["All","First","Last","Random"]).optional()})),nK=nG.merge(tX.object({action:tX.enum(["Insert a row"]),cellsToInsert:tX.array(nV)})),nX=nG.merge(tX.object({action:tX.enum(["Update a row"]),cellsToUpsert:tX.array(nV),referenceCell:nV.optional().describe("Deprecated. Use `filter` instead."),filter:tX.object({comparisons:tX.array(nF),logicalOperator:tX.nativeEnum(nn)}).optional()})),nq=tX.discriminatedUnion("action",[nW,nK,nX,nY]),nJ=tq.merge(tX.object({type:tX.enum(["Google Sheets"]),options:nq})),n$=tX.object({type:tX.literal("google sheets"),data:tX.object({refresh_token:tX.string().nullish(),expiry_date:tX.number().nullish(),access_token:tX.string().nullish(),token_type:tX.string().nullish(),id_token:tX.string().nullish(),scope:tX.string().optional()})}).merge(t$),nQ=((aM=nQ||{}).POST="POST",aM.GET="GET",aM.PUT="PUT",aM.DELETE="DELETE",aM.PATCH="PATCH",aM.HEAD="HEAD",aM.CONNECT="CONNECT",aM.OPTIONS="OPTIONS",aM.TRACE="TRACE",aM),n0=tX.object({id:tX.string(),variableId:tX.string().optional(),value:tX.string().optional()}),n1=tX.object({id:tX.string(),variableId:tX.string().optional(),bodyPath:tX.string().optional()}),n2=tX.object({id:tX.string(),key:tX.string().optional(),value:tX.string().optional()}),n5=tX.object({id:tX.string(),queryParams:n2.array(),headers:n2.array(),method:tX.nativeEnum(nQ),url:tX.string().optional(),body:tX.string().optional()}),n4=tX.object({variablesForTest:tX.array(n0),responseVariableMapping:tX.array(n1),isAdvancedConfig:tX.boolean().optional(),isCustomBody:tX.boolean().optional(),isExecutedOnClient:tX.boolean().optional(),webhook:n5.optional()}),n3=tq.merge(tX.object({type:tX.enum(["Webhook"]),options:n4,webhookId:tX.string().describe("Deprecated, now integrated in webhook block options").optional()})),n9=tX.object({url:tX.string(),headers:tX.record(tX.string()).optional(),body:tX.unknown().optional(),method:tX.nativeEnum(nQ).optional()}),n6=tq.merge(tX.object({type:tX.enum(["Make.com"]),options:n4,webhookId:tX.string().describe("Deprecated, use webhook.id instead").optional()})),n7=tq.merge(tX.object({type:tX.enum(["Pabbly"]),options:n4,webhookId:tX.string().describe("Deprecated, use webhook.id instead").optional()})),n8=tX.object({credentialsId:tX.string(),isCustomBody:tX.boolean().optional(),isBodyCode:tX.boolean().optional(),recipients:tX.array(tX.string()),subject:tX.string().optional(),body:tX.string().optional(),replyTo:tX.string().optional(),cc:tX.array(tX.string()).optional(),bcc:tX.array(tX.string()).optional(),attachmentsVariableId:tX.string().optional()}),re=tq.merge(tX.object({type:tX.enum(["Email"]),options:n8})),rt=tX.object({type:tX.literal("smtp"),data:tX.object({host:tX.string().optional(),username:tX.string().optional(),password:tX.string().optional(),isTlsEnabled:tX.boolean().optional(),port:tX.number(),from:tX.object({email:tX.string().optional(),name:tX.string().optional()})})}).merge(t$),rn=tq.merge(tX.object({type:tX.enum(["Zapier"]),options:n4,webhookId:tX.string().describe("Deprecated, use webhook.id instead").optional()})),rr=["Lead","Contact","CompleteRegistration","Schedule","SubmitApplication","ViewContent","AddPaymentInfo","AddToCart","AddToWishlist","CustomizeProduct","Donate","FindLocation","InitiateCheckout","Purchase","Search","StartTrial","Subscribe"];[...rr];var ra=tX.object({pixelId:tX.string().optional(),isInitSkip:tX.boolean().optional(),params:tX.array(tX.object({id:tX.string(),key:tX.string().optional(),value:tX.any().optional()})).optional()}),ri=ra.merge(tX.object({eventType:tX.undefined()})),ro=ra.merge(tX.object({eventType:tX.enum(rr)})),rs=ra.merge(tX.object({eventType:tX.enum(["Custom"]),name:tX.string().optional()})),rl=tX.discriminatedUnion("eventType",[ri,ro,rs]),rd=tq.merge(tX.object({type:tX.enum(["Pixel"]),options:rl})),ru=tX.object({name:tX.string(),content:tX.string().optional(),shouldExecuteInParentContext:tX.boolean().optional()}),rc=tq.merge(tX.object({type:tX.enum(["Code"]),options:ru})),rp=tX.object({url:tX.string().optional(),isNewTab:tX.boolean()}),rm=tq.merge(tX.object({type:tX.enum(["Redirect"]),options:rp})),rh=tX.object({variableId:tX.string().optional(),expressionToEvaluate:tX.string().optional(),isCode:tX.boolean().optional(),type:tX.enum(["Custom","Empty","User ID","Now","Today","Yesterday","Tomorrow","Random ID","Moment of the day","Map item with same index","Phone number","Contact name"]).optional(),mapListItemParams:tX.object({baseItemVariableId:tX.string().optional(),baseListVariableId:tX.string().optional(),targetListVariableId:tX.string().optional()}).optional(),isExecutedOnClient:tX.boolean().optional()}),rg=tq.merge(tX.object({type:tX.enum(["Set variable"]),options:rh})),rb=tX.object({typebotId:tX.string().optional(),groupId:tX.string().optional(),mergeResults:tX.boolean().optional()}),rf=tq.merge(tX.object({type:tX.enum(["Typebot link"]),options:rb})),ry=tX.object({secondsToWaitFor:tX.string().optional(),shouldPause:tX.boolean().optional()}),rv=tq.merge(tX.object({type:tX.enum(["Wait"]),options:ry})),r_=nt.extend({type:tX.literal(2),path:tX.literal("a")}),rE=nt.extend({type:tX.literal(2),path:tX.literal("b")}),rx=tq.merge(tX.object({type:tX.enum(["AB test"]),items:tX.tuple([r_,rE]),options:tX.object({aPercent:tX.number().min(0).max(100)})})),rw=tq.merge(tX.object({type:tX.literal("start"),label:tX.string()})),rI=tX.object({credentialsId:tX.string().optional(),baseUrl:tX.string().default("https://api.openai.com/v1"),apiVersion:tX.string().optional()}),rT=tX.object({task:tX.undefined()}).merge(rI),rS=tX.object({id:tX.string(),role:tX.enum(["system","user","assistant"]).optional(),content:tX.string().optional(),name:tX.string().optional()}),rC=tX.object({id:tX.string(),role:tX.enum(["Messages sequence ✨"]),content:tX.object({assistantMessagesVariableId:tX.string().optional(),userMessagesVariableId:tX.string().optional()}).optional()}),rj=tX.object({task:tX.literal("Create chat completion"),model:tX.string(),messages:tX.array(tX.union([rS,rC])),advancedSettings:tX.object({temperature:tX.number().or(t1).optional()}).optional(),responseMapping:tX.array(tX.object({id:tX.string(),valueToExtract:tX.preprocess(e=>e||"Message content",tX.enum(["Message content","Total tokens"])),variableId:tX.string().optional()}))}).merge(rI),rk=tX.object({task:tX.literal("Create image"),prompt:tX.string().optional(),advancedOptions:tX.object({size:tX.enum(["256x256","512x512","1024x1024"]).optional()}),responseMapping:tX.array(tX.object({id:tX.string(),valueToExtract:tX.enum(["Image URL"]),variableId:tX.string().optional()}))}).merge(rI),rP=tq.merge(tX.object({type:tX.enum(["OpenAI"]),options:tX.discriminatedUnion("task",[rT,rj,rk])})),rN=tX.object({type:tX.literal("openai"),data:tX.object({apiKey:tX.string()})}).merge(t$),rR=tX.object({groupId:tX.string().optional(),blockId:tX.string().optional()}),rA=tq.merge(tX.object({type:tX.enum(["Jump"]),options:rR})),rO=[ng,nu,nf,nx,nO,nP,np,nC,nR,nv,nB],rL=tX.discriminatedUnion("type",[rw,t6,t3,ne,t5,t0,...rO,rc,ns,rm,rg,rf,rv,rA,rx,nD,nZ,nJ,n6,rP,n7,re,n3,rn,rd]),rU=tX.object({link:tX.string()}),rB=tX.object({type:tX.literal("image"),image:rU}).or(tX.object({type:tX.literal("video"),video:rU})).or(tX.object({type:tX.literal("text"),text:tX.string()})),rM=tX.object({text:tX.string()}),rD=tX.object({buttons:tX.array(tX.object({type:tX.literal("reply"),reply:tX.object({id:tX.string(),title:tX.string()})}))}),rz=tX.object({name:tX.literal("preview_initial_message"),language:tX.object({code:tX.literal("en")})}),rZ=tX.object({type:tX.literal("button"),header:rB.optional(),body:rM.optional(),action:rD}),rV=(tX.discriminatedUnion("type",[tX.object({type:tX.literal("text"),text:tX.object({body:tX.string(),preview_url:tX.boolean().optional()}),preview_url:tX.boolean().optional()}),tX.object({type:tX.literal("image"),image:rU}),tX.object({type:tX.literal("audio"),audio:rU}),tX.object({type:tX.literal("video"),video:rU}),tX.object({type:tX.literal("interactive"),interactive:rZ}),tX.object({type:tX.literal("template"),template:rz})]),tX.discriminatedUnion("type",[tX.object({from:tX.string(),type:tX.literal("text"),text:tX.object({body:tX.string()}),timestamp:tX.string()}),tX.object({from:tX.string(),type:tX.literal("button"),button:tX.object({text:tX.string(),payload:tX.string()}),timestamp:tX.string()}),tX.object({from:tX.string(),type:tX.literal("interactive"),interactive:tX.object({button_reply:tX.object({id:tX.string(),title:tX.string()})}),timestamp:tX.string()}),tX.object({from:tX.string(),type:tX.literal("image"),image:tX.object({id:tX.string()}),timestamp:tX.string()}),tX.object({from:tX.string(),type:tX.literal("video"),video:tX.object({id:tX.string()}),timestamp:tX.string()}),tX.object({from:tX.string(),type:tX.literal("audio"),audio:tX.object({id:tX.string()}),timestamp:tX.string()}),tX.object({from:tX.string(),type:tX.literal("document"),document:tX.object({id:tX.string()}),timestamp:tX.string()})])),rH=(tX.object({entry:tX.array(tX.object({changes:tX.array(tX.object({value:tX.object({contacts:tX.array(tX.object({profile:tX.object({name:tX.string()})})).optional(),metadata:tX.object({display_phone_number:tX.string()}),messages:tX.array(rV).optional()})}))}))}),tX.object({type:tX.literal("whatsApp"),data:tX.object({systemUserAccessToken:tX.string(),phoneNumberId:tX.string()})}).merge(t$)),rG=(tX.object({id:tX.string(),comparisonOperator:tX.nativeEnum(nr).optional(),value:tX.string().optional()}),tX.object({logicalOperator:tX.nativeEnum(nn),comparisons:tX.array(tX.object({id:tX.string(),comparisonOperator:tX.nativeEnum(nr).optional(),value:tX.string().optional()}))})),rF=tX.object({credentialsId:tX.string().optional(),startCondition:rG.optional()}),rY=tX.object({isBrandingEnabled:tX.boolean(),isTypingEmulationEnabled:tX.boolean().optional(),isInputPrefillEnabled:tX.boolean().optional(),isHideQueryParamsEnabled:tX.boolean().optional(),isNewResultOnRefreshEnabled:tX.boolean().optional(),rememberUser:tX.object({isEnabled:tX.boolean().optional(),storage:tX.enum(["session","local"]).optional()}).optional()}),rW=tX.object({enabled:tX.boolean(),speed:tX.number(),maxDelay:tX.number()}),rK=tX.object({title:tX.string().optional(),description:tX.string().optional(),imageUrl:tX.string().optional(),favIconUrl:tX.string().optional(),customHeadCode:tX.string().optional(),googleTagManagerId:tX.string().optional()}),rX=tX.object({general:rY,typingEmulation:rW,metadata:rK,whatsApp:rF.optional()}),rq=((aD=rq||{}).COLOR="Color",aD.IMAGE="Image",aD.NONE="None",aD),rJ=tX.object({isEnabled:tX.boolean(),url:tX.string().optional()}),r$=tX.object({backgroundColor:tX.string(),color:tX.string()}),rQ=r$.merge(tX.object({placeholderColor:tX.string()})),r0=tX.object({hostAvatar:rJ.optional(),guestAvatar:rJ.optional(),hostBubbles:r$,guestBubbles:r$,buttons:r$,inputs:rQ,roundness:tX.enum(["none","medium","large"]).optional()}),r1=tX.object({type:tX.nativeEnum(rq),content:tX.string().optional()}),r2=tX.object({font:tX.string(),background:r1}),r5=tX.object({general:r2,chat:r0,customCss:tX.string().optional()});tX.object({id:tX.string(),name:tX.string(),theme:r5,workspaceId:tX.string(),createdAt:tX.date(),updatedAt:tX.date()});var r4=tX.array(tX.string().nullable()),r3=tX.object({id:tX.string(),name:tX.string(),value:tX.string().or(r4).nullish()}),r9=tX.object({id:tX.string(),name:tX.string(),value:tX.string().or(r4)});tX.object({id:tX.string(),name:tX.string(),value:tX.unknown()});var r6=tX.object({groupId:tX.string(),blockId:tX.string(),itemId:tX.string().optional()}),r7=tX.object({groupId:tX.string(),blockId:tX.string().optional()}),r8=tX.object({id:tX.string(),from:r6,to:r7}),ae=e=>{var t;return e&&"5"!==e.version?(0,d.b)((0,d.a)({},e),{version:void 0===e.version?null:e.version,groups:e.groups?e.groups.map(at):[],edges:e.edges?null==(t=e.edges)?void 0:t.filter(e=>r8.safeParse(e).success):[]}):e},at=e=>(0,d.b)((0,d.a)({},e),{blocks:e.blocks.map(t=>an(t,{groupId:e.id}))}),an=(e,t)=>{var n;let{groupId:r}=t;return(0,d.b)((0,d.a)({},e),{groupId:null!=(n=e.groupId)?n:r})},ar=tX.object({id:tX.string(),title:tX.string(),graphCoordinates:tX.object({x:tX.number(),y:tX.number()}),blocks:tX.array(rL)}),aa=tX.object({columnsOrder:tX.array(tX.string()),columnsVisibility:tX.record(tX.string(),tX.boolean()),columnsWidth:tX.record(tX.string(),tX.number())}),ai=e=>/^(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(?:\/[\w-\/]*)?)$/.test(e),ao=tX.preprocess(ae,tX.object({version:tX.enum(["3","4","5"]).nullable(),id:tX.string(),name:tX.string(),groups:tX.array(ar),edges:tX.array(r8),variables:tX.array(r3),theme:r5,selectedThemeTemplateId:tX.string().nullable(),settings:rX,createdAt:tX.date(),updatedAt:tX.date(),icon:tX.string().nullable(),folderId:tX.string().nullable(),publicId:tX.string().refine(e=>/^[a-zA-Z0-9-.]+$/.test(e)).nullable(),customDomain:tX.string().refine(ai).nullable(),workspaceId:tX.string(),resultsTablePreferences:aa.nullable(),isArchived:tX.boolean(),isClosed:tX.boolean(),whatsAppPhoneNumberId:tX.string().nullable()}));ao._def.schema.pick({name:!0,icon:!0,selectedThemeTemplateId:!0,groups:!0,theme:!0,settings:!0,folderId:!0,variables:!0,edges:!0,resultsTablePreferences:!0,publicId:!0,customDomain:!0}).partial();var as=tX.preprocess(ae,tX.object({id:tX.string(),version:tX.enum(["3","4","5"]).nullable(),createdAt:tX.date(),updatedAt:tX.date(),typebotId:tX.string(),groups:tX.array(ar),edges:tX.array(r8),variables:tX.array(r3),theme:r5,settings:rX})),al=tX.object({createdAt:tX.date(),resultId:tX.string(),blockId:tX.string(),itemId:tX.string().nullable(),groupId:tX.string(),variableId:tX.string().nullable(),content:tX.string(),storageUsed:tX.number().nullable()}),ad=al.omit({createdAt:!0,resultId:!0,variableId:!0,storageUsed:!0}).merge(tX.object({variableId:tX.string().nullish(),storageUsed:tX.number().nullish(),itemId:tX.string().nullish()})),au=tX.object({id:tX.string(),createdAt:tX.date(),typebotId:tX.string(),variables:tX.array(r9),isCompleted:tX.boolean(),hasStarted:tX.boolean().nullable(),isArchived:tX.boolean().nullable()}),ac=(au.merge(tX.object({answers:tX.array(al)})),au.merge(tX.object({answers:tX.array(ad)})),tX.object({id:tX.string(),createdAt:tX.date(),resultId:tX.string(),status:tX.string(),description:tX.string(),details:tX.string().nullable()}));tX.discriminatedUnion("type",[rt,n$,nj,rN,rH]);var ap=tX.preprocess(ae,as._def.schema.pick({version:!0,id:!0,groups:!0,edges:!0,variables:!0})),am=tX.object({hostAvatarUrl:tX.string().optional(),guestAvatarUrl:tX.string().optional()}),ah=al.pick({content:!0,blockId:!0,variableId:!0}),ag=tX.object({key:tX.string(),value:tX.string()}),ab=au.pick({variables:!0}).merge(tX.object({answers:tX.array(ah),id:tX.string().optional()})),af=tX.object({typebot:ap,dynamicTheme:am.optional(),linkedTypebots:tX.object({typebots:tX.array(ap),queue:tX.array(tX.object({edgeId:tX.string(),typebotId:tX.string()}))}),currentTypebotId:tX.string(),result:ab,currentBlock:tX.object({blockId:tX.string(),groupId:tX.string()}).optional(),isStreamEnabled:tX.boolean().optional()}),ay=tX.object({version:tX.literal("2"),typebotsQueue:tX.array(tX.object({edgeIdToTriggerWhenDone:tX.string().optional(),isMergingWithParent:tX.boolean().optional(),resultId:tX.string().optional(),answers:tX.array(ag),typebot:ap})),dynamicTheme:am.optional(),currentBlock:tX.object({blockId:tX.string(),groupId:tX.string()}).optional(),isStreamEnabled:tX.boolean().optional(),whatsApp:tX.object({contact:tX.object({name:tX.string(),phoneNumber:tX.string()}),credentialsId:tX.string().optional()}).optional(),typingEmulation:rX.shape.typingEmulation.optional()}),av=af.or(ay).transform(e=>"version"in e?e:{version:"2",typebotsQueue:[{typebot:e.typebot,resultId:e.result.id,answers:e.result.answers.map(t=>{var n,r,a;return{key:null!=(a=t.variableId?null==(n=e.typebot.variables.find(e=>e.id===t.variableId))?void 0:n.name:null==(r=e.typebot.groups.find(e=>e.blocks.find(e=>e.id===t.blockId)))?void 0:r.title)?a:"",value:t.content}}),isMergingWithParent:!0,edgeIdToTriggerWhenDone:e.linkedTypebots.queue.length>0?e.linkedTypebots.queue[0].edgeId:void 0},...e.linkedTypebots.typebots.map((t,n)=>{var r;return{typebot:t,resultId:e.result.id,answers:e.result.answers.map(t=>{var n,r,a;return{key:null!=(a=t.variableId?null==(n=e.typebot.variables.find(e=>e.id===t.variableId))?void 0:n.name:null==(r=e.typebot.groups.find(e=>e.blocks.find(e=>e.id===t.blockId)))?void 0:r.title)?a:"",value:t.content}}),edgeIdToTriggerWhenDone:null==(r=e.linkedTypebots.queue.at(n+1))?void 0:r.edgeId}})],dynamicTheme:e.dynamicTheme,currentBlock:e.currentBlock,isStreamEnabled:e.isStreamEnabled});tX.object({id:tX.string(),createdAt:tX.date(),updatedAt:tX.date(),state:av});var a_=tX.object({type:tX.literal("text"),content:t9}),aE=tX.object({type:tX.enum(["image"]),content:t4}),ax=tX.object({type:tX.enum(["video"]),content:t8}),aw=tX.object({type:tX.enum(["audio"]),content:tQ}),aI=tX.object({type:tX.enum(["embed"]),content:t2.omit({height:!0}).merge(tX.object({height:tX.number().optional()}))}),aT=tX.object({id:tX.string()}).and(tX.discriminatedUnion("type",[a_,aE,ax,aw,aI])),aS=tX.object({content:tX.string(),args:tX.array(tX.object({id:tX.string(),value:tX.string().or(tX.number()).or(tX.boolean()).or(r4).nullish()}))}),aC=tX.preprocess(ae,ao._def.schema.pick({version:!0,id:!0,groups:!0,edges:!0,variables:!0,settings:!0,theme:!0})),aj=tX.object({typebot:aC.or(tX.string()).describe("Either a Typebot ID or a Typebot object. If you provide a Typebot object, it will be executed in preview mode. ([How can I find my typebot ID?](https://docs.typebot.io/api#how-to-find-my-typebotid))."),isPreview:tX.boolean().optional().describe("If set to `true`, it will start a Preview session with the unpublished bot and it won't be saved in the Results tab. You need to be authenticated with a bearer token for this to work."),resultId:tX.string().optional().describe("Provide it if you'd like to overwrite an existing result."),startGroupId:tX.string().optional().describe("Start chat from a specific group."),prefilledVariables:tX.record(tX.unknown()).optional().describe("[More info about prefilled variables.](https://docs.typebot.io/editor/variables#prefilled-variables)"),isStreamEnabled:tX.boolean().optional().describe("Set this to `true` if you intend to stream OpenAI completions on a client."),isOnlyRegistering:tX.boolean().optional().describe("If set to `true`, it will only register the session and not start the chat. This is used for other chat platform integration as it can require a session to be registered before sending the first message.")}),ak=ac.pick({status:!0,description:!0}).merge(tX.object({details:tX.unknown().optional()})),aP=(tX.object({message:tX.string().optional().describe("The answer to the previous chat input. Do not provide it if you are starting a new chat."),sessionId:tX.string().optional().describe("Session ID that you get from the initial chat request to a bot. If not provided, it will create a new session."),startParams:aj.optional(),clientLogs:tX.array(ak).optional().describe("Logs while executing client side actions")}),nS.optional()),aN=tX.object({googleAnalyticsId:tX.string().optional(),pixelId:tX.string().optional(),gtmId:tX.string().optional(),customHeadCode:tX.string().optional()}),aR=tX.object({lastBubbleBlockId:tX.string().optional(),expectsDedicatedReply:tX.boolean().optional()}).and(tX.object({scriptToExecute:aS}).or(tX.object({redirect:rp})).or(tX.object({chatwoot:tX.object({scriptToExecute:aS})})).or(tX.object({googleAnalytics:nz})).or(tX.object({wait:tX.object({secondsToWaitFor:tX.number()})})).or(tX.object({setVariable:tX.object({scriptToExecute:aS})})).or(tX.object({streamOpenAiChatCompletion:tX.object({messages:tX.array(rS.pick({content:!0,role:!0})),displayStream:tX.boolean().optional()})})).or(tX.object({webhookToExecute:n9})).or(tX.object({startPropsToInject:aN})).or(tX.object({pixel:rl})));tX.object({messages:tX.array(aT),input:tX.discriminatedUnion("type",[...rO]).and(tX.object({prefilledValue:tX.string().optional(),runtimeOptions:aP.optional()})).optional(),clientSideActions:tX.array(aR).optional(),sessionId:tX.string().optional(),typebot:ao._def.schema.pick({id:!0,theme:!0,settings:!0}).optional(),resultId:tX.string().optional(),dynamicTheme:am.optional(),logs:tX.array(ak).optional(),lastMessageNewFormat:tX.string().optional().describe("The sent message is validated and formatted on the backend. This is set only if the message differs from the formatted version.")}),tX.object({workspaceId:tX.string(),user:tX.object({name:tX.string().nullable(),email:tX.string().nullable(),image:tX.string().nullable()}),role:tX.nativeEnum(h.WorkspaceRole)}),tX.object({createdAt:tX.date(),updatedAt:tX.date(),email:tX.string(),type:tX.nativeEnum(h.WorkspaceRole)}),tX.object({id:tX.string(),createdAt:tX.date(),updatedAt:tX.date(),name:tX.string(),icon:tX.string().nullable(),plan:tX.nativeEnum(h.Plan),stripeId:tX.string().nullable(),additionalChatsIndex:tX.number(),additionalStorageIndex:tX.number(),chatsLimitFirstEmailSentAt:tX.date().nullable(),chatsLimitSecondEmailSentAt:tX.date().nullable(),storageLimitFirstEmailSentAt:tX.date().nullable(),storageLimitSecondEmailSentAt:tX.date().nullable(),customChatsLimit:tX.number().nullable(),customStorageLimit:tX.number().nullable(),customSeatsLimit:tX.number().nullable(),isQuarantined:tX.boolean(),isSuspended:tX.boolean()}),tX.union([nd,no,nU,r_,rE]);var aA,aO,aL,aU,aB,aM,aD,az,aZ=()=>(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-2 h-2 mr-1 rounded-full bubble1"}),(0,l.jsx)("div",{className:"w-2 h-2 mr-1 rounded-full bubble2"}),(0,l.jsx)("div",{className:"w-2 h-2 rounded-full bubble3"})]}),aV=e=>{let{url:t,onTransitionEnd:n}=e,{typebot:r,isLoading:a}=W(),i=(0,u.useRef)(null),[o,s]=(0,u.useState)(!0),[d]=(0,u.useState)(M(r.variables)(t));return(0,u.useEffect)(()=>{if(!o||a)return;let e=setTimeout(()=>{s(!1),setTimeout(()=>{n()},400)},500);return()=>{clearTimeout(e)}},[a,o,n]),(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)("div",{className:"flex mb-2 w-full lg:w-11/12 items-center",children:(0,l.jsxs)("div",{className:"flex relative z-10 items-start typebot-host-bubble",children:[(0,l.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing z-10 ",style:{width:o?"4rem":"100%",height:o?"2rem":"100%"},children:o?(0,l.jsx)(aZ,{}):null}),(0,l.jsx)("audio",{ref:i,src:d,className:"z-10 content-opacity m-2 "+(o?"opacity-0":"opacity-100"),style:{height:o?"2rem":"revert"},autoPlay:!0,controls:!0})]})})})},aH=e=>{var t;let{block:n,onTransitionEnd:r}=e,{typebot:a,isLoading:i}=W(),o=(0,u.useRef)(null),[s,d]=(0,u.useState)(!0),[c]=(0,u.useState)(M(a.variables)(null==(t=n.content)?void 0:t.url)),p=(0,u.useCallback)(()=>{d(!1),setTimeout(()=>{r()},400)},[r]);(0,u.useEffect)(()=>{if(!s||i)return;let e=setTimeout(()=>{d(!1),p()},1e3);return()=>{clearTimeout(e)}},[i,s,p]);let m=n.content.height?"string"==typeof n.content.height?M(a.variables)(n.content.height)+"px":n.content.height:"2rem";return(0,l.jsx)("div",{className:"flex flex-col w-full",ref:o,children:(0,l.jsx)("div",{className:"flex mb-2 w-full lg:w-11/12 items-center",children:(0,l.jsxs)("div",{className:"flex relative z-10 items-start typebot-host-bubble w-full",children:[(0,l.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing z-10 ",style:{width:s?"4rem":"100%",height:s?"2rem":"100%"},children:s?(0,l.jsx)(aZ,{}):(0,l.jsx)(l.Fragment,{})}),(0,l.jsx)("iframe",{id:"embed-bubble-content",src:c,className:"w-full z-20 p-4 content-opacity "+(s?"opacity-0":"opacity-100"),style:{height:s?"2rem":m,borderRadius:"15px"}})]})})})},aG=e=>{var t;let{block:n,onTransitionEnd:r}=e,{typebot:a,isLoading:i}=W(),o=(0,u.useRef)(null),s=(0,u.useRef)(null),[d,c]=(0,u.useState)(!0),[p]=(0,u.useState)(M(a.variables)(null==(t=n.content)?void 0:t.url)),m=(0,u.useCallback)(()=>{c(!1),setTimeout(()=>{r()},400)},[r]);return(0,u.useEffect)(()=>{if(!d||i)return;let e=setTimeout(()=>{c(!1),m()},5e3);return()=>{clearTimeout(e)}},[i,d,m]),(0,u.useEffect)(()=>{let e=s.current;if(!(!e||i||!d))return e.onload=()=>{c(!1),m()},()=>{e.onload=null}},[i,d,m]),(0,l.jsx)("div",{className:"flex flex-col",ref:o,children:(0,l.jsx)("div",{className:"flex mb-2 w-full lg:w-11/12 items-center",children:(0,l.jsxs)("div",{className:"flex relative z-10 items-start typebot-host-bubble",children:[(0,l.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing z-10 ",style:{width:d?"4rem":"100%",height:d?"2rem":"100%"},children:d?(0,l.jsx)(aZ,{}):null}),(0,l.jsx)("img",{ref:s,src:p,className:"p-4 content-opacity z-10 w-auto rounded-lg "+(d?"opacity-0":"opacity-100"),style:{maxHeight:"32rem",height:d?"2rem":"auto",maxWidth:"100%"},alt:"Bubble image"})]})})})},aF=(e,t)=>{var n,r;let a=null!=(r=null==(n=e.match(/(\w+)/g))?void 0:n.length)?r:0;0===a&&(a=e.length);let i=t.speed,o=t.enabled?a/i*6e4:0;return o>1e3*t.maxDelay&&(o=1e3*t.maxDelay),o},aY={enabled:!0,speed:300,maxDelay:1.5},aW=e=>{var t;let{block:n,onTransitionEnd:r}=e,{typebot:a,isLoading:i}=W(),o=(0,u.useRef)(null),[s,d]=(0,u.useState)(!0),[c]=(0,u.useState)(M(a.variables)(n.content.html)),p=(0,u.useCallback)(()=>{d(!1),setTimeout(()=>{r()},400)},[r]);return(0,u.useEffect)(()=>{var e,t,r;if(!s||i)return;let o=setTimeout(()=>{p()},aF(null!=(e=n.content.plainText)?e:"",null!=(r=null==(t=a.settings)?void 0:t.typingEmulation)?r:aY));return()=>{clearTimeout(o)}},[n.content.plainText,i,s,p,null==(t=a.settings)?void 0:t.typingEmulation]),(0,l.jsx)("div",{className:"flex flex-col",ref:o,children:(0,l.jsx)("div",{className:"flex mb-2 w-full items-center",children:(0,l.jsxs)("div",{className:"flex relative items-start typebot-host-bubble",children:[(0,l.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing ",style:{width:s?"4rem":"100%",height:s?"2rem":"100%"},"data-testid":"host-bubble",children:s?(0,l.jsx)(aZ,{}):null}),"text"===n.type&&(0,l.jsx)("p",{style:{textOverflow:"ellipsis"},className:"overflow-hidden content-opacity mx-4 my-2 whitespace-pre-wrap slate-html-container relative "+(s?"opacity-0 h-6":"opacity-100 h-full"),dangerouslySetInnerHTML:{__html:c}})]})})})},aK=e=>{let{block:t,onTransitionEnd:n}=e,{typebot:r,isLoading:a}=W(),i=(0,u.useRef)(null),[o,s]=(0,u.useState)(!0),d=(0,u.useCallback)(()=>{s(!1),setTimeout(()=>{n()},400)},[n]);return(0,u.useEffect)(()=>{if(!o||a)return;let e=setTimeout(()=>{s(!1),d()},1e3);return()=>{clearTimeout(e)}},[a,o,d]),(0,l.jsx)("div",{className:"flex flex-col",ref:i,children:(0,l.jsx)("div",{className:"flex mb-2 w-full lg:w-11/12 items-center",children:(0,l.jsxs)("div",{className:"flex relative z-10 items-start typebot-host-bubble",children:[(0,l.jsx)("div",{className:"flex items-center absolute px-4 py-2 rounded-lg bubble-typing z-10 ",style:{width:o?"4rem":"100%",height:o?"2rem":"100%"},children:o?(0,l.jsx)(aZ,{}):(0,l.jsx)(l.Fragment,{})}),(0,l.jsx)(aX,{content:t.content,isTyping:o,variables:r.variables})]})})})},aX=e=>{let{content:t,isTyping:n,variables:r}=e,[a]=(0,u.useState)(M(r)(null==t?void 0:t.url));if(!(null!=t&&t.type))return(0,l.jsx)(l.Fragment,{});switch(t.type){case"url":{let e=window.navigator.vendor.match(/apple/i);return(0,l.jsxs)("video",{controls:!0,className:"p-4 focus:outline-none w-full z-10 content-opacity rounded-md "+(n?"opacity-0":"opacity-100"),style:{height:n?"2rem":"auto",maxHeight:e?"40vh":""},autoPlay:!0,children:[(0,l.jsx)("source",{src:a,type:"video/mp4"}),"Sorry, your browser doesn't support embedded videos."]})}case"vimeo":case"youtube":{let e="vimeo"===t.type?"https://player.vimeo.com/video":"https://www.youtube.com/embed";return(0,l.jsx)("iframe",{src:"".concat(e,"/").concat(t.id),className:"w-full p-4 content-opacity z-10 rounded-md "+(n?"opacity-0":"opacity-100"),height:n?"2rem":"200px",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}}},aq=e=>{let{block:t,onTransitionEnd:n}=e;switch(t.type){case"text":return(0,l.jsx)(aW,{block:t,onTransitionEnd:n});case"image":return(0,l.jsx)(aG,{block:t,onTransitionEnd:n});case"video":return(0,l.jsx)(aK,{block:t,onTransitionEnd:n});case"embed":return(0,l.jsx)(aH,{block:t,onTransitionEnd:n});case"audio":return(0,l.jsx)(aV,{url:t.content.url,onTransitionEnd:n})}},aJ=(0,u.createContext)({}),a$=e=>{let{children:t,resultId:n,onNewAnswer:r,onVariablesUpdated:a}=e,[i,o]=(0,u.useState)({answers:[],variables:[],createdAt:new Date}),s=e=>t=>{var n,a;return t.variableId&&c([{id:t.variableId,value:t.content,name:null!=(a=null==(n=e.find(e=>e.id===t.variableId))?void 0:n.name)?a:""}]),o(e=>(0,d.b)((0,d.a)({},e),{answers:[...e.answers,t]})),r&&r(t)},c=e=>{let t=e.map(e=>(0,d.b)((0,d.a)({},e),{value:D(e.value)}));o(e=>{let n=[...e.variables.filter(e=>t.every(t=>t.id!==e.id||t.name!==e.name)),...t].filter(e=>T(e.value));return a&&a(n),(0,d.b)((0,d.a)({},e),{variables:n})})};return(0,l.jsx)(aJ.Provider,{value:{resultId:n,resultValues:i,addAnswer:s,updateVariables:c},children:t})},aQ=()=>(0,u.useContext)(aJ),a0=e=>{let{message:t,showAvatar:n,avatarSrc:r}=e,[a]=(0,u.useState)(t);return(0,l.jsx)(p.Z,{classNames:"bubble",timeout:1e3,children:(0,l.jsxs)("div",{className:"flex justify-end mb-2 items-end",style:{marginLeft:"50px"},children:[(0,l.jsx)("span",{className:"px-4 py-2 rounded-lg mr-2 whitespace-pre-wrap max-w-full typebot-guest-bubble cursor-pointer","data-testid":"guest-bubble",children:a}),n&&(0,l.jsx)(X,{avatarSrc:r})]})})},a1=window.matchMedia("only screen and (max-width: 760px)").matches,a2=window.parent&&window.location!==(null==(az=window.top)?void 0:az.location),a5=(e,t,n)=>{var r;return{status:e?"error":"success",description:e?n:t,details:null!=(r=e&&JSON.stringify(e,null,2).substring(0,1e3))?r:null}},a4=u.forwardRef(function(e,t){var{onChange:n}=e,r=(0,d.c)(e,["onChange"]);return(0,l.jsx)("input",(0,d.a)({ref:t,className:"focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input",type:"text",style:{fontSize:"16px"},autoFocus:!a1,onChange:e=>n(e.target.value)},r))}),a3=e=>(0,l.jsx)("svg",(0,d.b)((0,d.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"19px",color:"white"},e),{children:(0,l.jsx)("path",{d:"M476.59 227.05l-.16-.07L49.35 49.84A23.56 23.56 0 0027.14 52 24.65 24.65 0 0016 72.59v113.29a24 24 0 0019.52 23.57l232.93 43.07a4 4 0 010 7.86L35.53 303.45A24 24 0 0016 327v113.31A23.57 23.57 0 0026.59 460a23.94 23.94 0 0013.22 4 24.55 24.55 0 009.52-1.93L476.4 285.94l.19-.09a32 32 0 000-58.8z"})})),a9=e=>{var{label:t,isDisabled:n,isLoading:r,disableIcon:a}=e,i=(0,d.c)(e,["label","isDisabled","isLoading","disableIcon"]);return(0,l.jsxs)("button",(0,d.b)((0,d.a)({type:"submit",disabled:n||r},i),{className:"py-2 px-4 justify-center font-semibold rounded-md text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 typebot-button "+i.className,children:[r&&(0,l.jsx)(a6,{className:"text-white"}),(0,l.jsx)("span",{className:"xs:flex "+(a?"":"hidden"),children:t}),(0,l.jsx)(a3,{className:"send-icon flex "+(a?"hidden":"xs:hidden")})]}))},a6=e=>(0,l.jsxs)("svg",(0,d.b)((0,d.a)({},e),{className:"animate-spin -ml-1 mr-3 h-5 w-5 "+e.className,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","data-testid":"loading-spinner",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})),a7=e=>{var t,n,r,a,i,o;let{block:s,onSubmit:d,defaultValue:c,hasGuestAvatar:p}=e,[m,h]=(0,u.useState)(null!=c?c:""),g=(0,u.useRef)(null),b=e=>h(e),f=()=>{var e;return""!==m&&(null==(e=g.current)?void 0:e.reportValidity())},y=()=>{f()&&d({value:m})};return(0,l.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:p?"50px":"0.5rem",maxWidth:"350px"},onKeyDown:e=>{"Enter"===e.key&&y()},children:[(0,l.jsx)(a4,{ref:g,value:m,placeholder:null!=(r=null==(n=null==(t=s.options)?void 0:t.labels)?void 0:n.placeholder)?r:"Type your email...",onChange:b,type:"email",autoComplete:"email"}),(0,l.jsx)(a9,{type:"button",label:null!=(o=null==(i=null==(a=s.options)?void 0:a.labels)?void 0:i.button)?o:"Send",isDisabled:""===m,className:"my-2 ml-2",onClick:y})]})},a8=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,ie=e=>a8.test(e),it=e=>{var t,n,r,a;let{block:i,onSubmit:o,defaultValue:s,hasGuestAvatar:d}=e,[c,p]=(0,u.useState)(null!=s?s:""),m=(0,u.useRef)(null),h=e=>p(e),b=()=>{var e;return""!==c&&(null==(e=m.current)?void 0:e.reportValidity())},f=()=>{b()&&o({value:c})};return(0,l.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:d?"50px":"0.5rem",maxWidth:"350px"},onKeyDown:e=>{"Enter"===e.key&&f()},children:[(0,l.jsx)(g.ZP,{ref:m,value:c,onChange:h,placeholder:null!=(t=i.options.labels.placeholder)?t:"Your phone number...",defaultCountry:i.options.defaultCountryCode,autoFocus:!a1}),(0,l.jsx)(a9,{type:"button",label:null!=(a=null==(r=null==(n=i.options)?void 0:n.labels)?void 0:r.button)?a:"Send",isDisabled:""===c,className:"my-2 ml-2",onClick:f})]})},ir=e=>(0,g.tm)(e),ia=e=>{var t,n,r,a,i,o;let{block:s,onSubmit:d,defaultValue:c,hasGuestAvatar:p}=e,[m,h]=(0,u.useState)(null!=c?c:""),g=(0,u.useRef)(null),b=e=>{if(!e.startsWith("https://"))return"https:/"===e?void 0:h("https://".concat(e));h(e)},f=()=>{var e;return""!==m&&(null==(e=g.current)?void 0:e.reportValidity())},y=()=>{f()&&d({value:m})};return(0,l.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:p?"50px":"0.5rem",maxWidth:"350px"},onKeyDown:e=>{"Enter"===e.key&&y()},children:[(0,l.jsx)(a4,{ref:g,value:m,placeholder:null!=(r=null==(n=null==(t=s.options)?void 0:t.labels)?void 0:n.placeholder)?r:"Type your URL...",onChange:b,type:"url",autoComplete:"url"}),(0,l.jsx)(a9,{type:"button",label:null!=(o=null==(i=null==(a=s.options)?void 0:a.labels)?void 0:i.button)?o:"Send",isDisabled:""===m,className:"my-2 ml-2",onClick:y})]})},ii=/^(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})$/,io=e=>ii.test(e),is=(e,t)=>{switch(t){case"email input":return ie(e);case"phone number input":return ir(e);case"url input":return io(e)}return!0},il=e=>k(e)&&"retryMessageContent"in e.options,id=(e,t,n)=>{let r=M(t)(e.options.retryMessageContent),a=e.id+1e3*Math.random(),i={id:(1e3*Math.random()).toString(),from:{blockId:a,groupId:e.groupId},to:{groupId:e.groupId,blockId:e.id}};return n(i),{groupId:e.groupId,id:a,type:"text",content:{html:"<div>".concat(r,"</div>"),richText:[],plainText:r},outgoingEdgeId:i.id}},iu=u.forwardRef(function(e,t){var{onChange:n}=e,r=(0,d.c)(e,["onChange"]);return(0,l.jsx)("textarea",(0,d.a)({ref:t,className:"focus:outline-none bg-transparent px-4 py-4 flex-1 w-full text-input",rows:6,"data-testid":"textarea",required:!0,style:{fontSize:"16px"},autoFocus:!a1,onChange:e=>n(e.target.value)},r))}),ic=e=>{var t,n,r,a,i,o,s,d,c,p;let{block:m,onSubmit:h,defaultValue:g,hasGuestAvatar:b}=e,[f,y]=(0,u.useState)(null!=g?g:""),v=(0,u.useRef)(null),_=null==(t=m.options)?void 0:t.isLong,E=e=>y(e),x=()=>{var e;return""!==f&&(null==(e=v.current)?void 0:e.reportValidity())},w=()=>{x()&&h({value:f})};return(0,l.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:b?"50px":"0.5rem",maxWidth:_?void 0:"350px"},onKeyDown:e=>{_||"Enter"===e.key&&w()},children:[_?(0,l.jsx)(iu,{ref:v,onChange:E,value:f,placeholder:null!=(a=null==(r=null==(n=m.options)?void 0:n.labels)?void 0:r.placeholder)?a:"Type your answer..."}):(0,l.jsx)(a4,{ref:v,onChange:E,value:f,placeholder:null!=(s=null==(o=null==(i=m.options)?void 0:i.labels)?void 0:o.placeholder)?s:"Type your answer..."}),(0,l.jsx)(a9,{type:"button",label:null!=(p=null==(c=null==(d=m.options)?void 0:d.labels)?void 0:c.button)?p:"Send",isDisabled:""===f,className:"my-2 ml-2",onClick:w})]})},ip=e=>{var t,n,r,a,i,o,s,d,c,p;let{block:m,onSubmit:h,defaultValue:g,hasGuestAvatar:b}=e,[f,y]=(0,u.useState)(null!=g?g:""),v=(0,u.useRef)(null),_=e=>y(e),E=()=>{var e;return""!==f&&(null==(e=v.current)?void 0:e.reportValidity())},x=()=>{E()&&h({value:f})};return(0,l.jsxs)("div",{className:"flex items-end justify-between rounded-lg pr-2 typebot-input w-full","data-testid":"input",style:{marginRight:b?"50px":"0.5rem",maxWidth:"350px"},onKeyDown:e=>{"Enter"===e.key&&x()},children:[(0,l.jsx)(a4,{ref:v,value:f,placeholder:null!=(r=null==(n=null==(t=m.options)?void 0:t.labels)?void 0:n.placeholder)?r:"Type your answer...",onChange:_,type:"number",style:{appearance:"auto"},min:null==(a=m.options)?void 0:a.min,max:null==(i=m.options)?void 0:i.max,step:null!=(s=null==(o=m.options)?void 0:o.step)?s:"any"}),(0,l.jsx)(a9,{type:"button",label:null!=(p=null==(c=null==(d=m.options)?void 0:d.labels)?void 0:c.button)?p:"Send",isDisabled:""===f,className:"my-2 ml-2",onClick:x})]})},im=e=>{let{from:t,to:n,hasTime:r,isRange:a}=e,i=window.navigator.language,o={day:"2-digit",month:"2-digit",year:"numeric",hour:r?"2-digit":void 0,minute:r?"2-digit":void 0},s=new Date(r?t:t.replace(/-/g,"/")).toLocaleString(i,o),l=new Date(r?n:n.replace(/-/g,"/")).toLocaleString(i,o);return"".concat(s).concat(a?" to ".concat(l):"")},ih=e=>{var t,n,r;let{onSubmit:a,options:i}=e,{hasTime:o,isRange:s,labels:c}=null!=i?i:{},[p,m]=(0,u.useState)({from:"",to:""});return(0,l.jsx)("div",{className:"flex flex-col w-full lg:w-4/6",children:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsxs)("form",{className:"flex justify-between rounded-lg typebot-input pr-2 items-end",onSubmit:e=>{""===p.from&&""===p.to||(e.preventDefault(),a({value:"".concat(p.from).concat(s?" to ".concat(p.to):""),label:im((0,d.b)((0,d.a)({},p),{hasTime:o,isRange:s}))}))},children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center p-4 "+(s?"pb-0":""),children:[s&&(0,l.jsx)("p",{className:"font-semibold mr-2",children:null!=(t=null==c?void 0:c.from)?t:"From:"}),(0,l.jsx)("input",{className:"focus:outline-none flex-1 w-full text-input",style:{minHeight:"2rem",minWidth:"100px",fontSize:"16px"},type:o?"datetime-local":"date",onChange:e=>m((0,d.b)((0,d.a)({},p),{from:e.target.value})),"data-testid":"from-date"})]}),s&&(0,l.jsxs)("div",{className:"flex items-center p-4",children:[s&&(0,l.jsx)("p",{className:"font-semibold",children:null!=(n=null==c?void 0:c.to)?n:"To:"}),(0,l.jsx)("input",{className:"focus:outline-none flex-1 w-full text-input ml-2",style:{minHeight:"2rem",minWidth:"100px",fontSize:"16px"},type:o?"datetime-local":"date",onChange:e=>m((0,d.b)((0,d.a)({},p),{to:e.target.value})),"data-testid":"to-date"})]})]}),(0,l.jsx)(a9,{label:null!=(r=null==c?void 0:c.button)?r:"Send",isDisabled:""===p.to&&""===p.from,className:"my-2 ml-2"})]})})})},ig=e=>{var t,n;let{block:r,onSubmit:a}=e,{typebot:{variables:i}}=W(),{resultValues:o}=aQ(),[s,d]=(0,u.useState)([]),c=e=>t=>{var n;t.preventDefault(),null!=(n=r.options)&&n.isMultipleChoice?p(e):a({value:M(i)(r.items[e].content),itemId:r.items[e].id})},p=e=>{let t=s.indexOf(e);-1!==t?(s.splice(t,1),d([...s])):d([...s,e])},m=()=>a({value:s.map(e=>M(i)(r.items[e].content)).join(", ")}),h=o&&0===o.answers.length&&1===r.items.length;return(0,l.jsxs)("form",{className:"flex flex-col items-end",onSubmit:m,children:[(0,l.jsx)("div",{className:"flex flex-wrap justify-end",children:r.items.map((e,t)=>{var n,a;return(0,l.jsxs)("span",{className:"relative inline-flex ml-2 mb-2",children:[(0,l.jsx)("button",{role:null!=(n=r.options)&&n.isMultipleChoice?"checkbox":"button",onClick:c(t),className:"py-2 px-4 text-left font-semibold rounded-md transition-all filter hover:brightness-90 active:brightness-75 duration-100 focus:outline-none typebot-button "+(s.includes(t)||!(null!=(a=r.options)&&a.isMultipleChoice)?"":"selectable"),"data-testid":"button","data-itemid":e.id,children:M(i)(e.content)}),h&&(0,l.jsxs)("span",{className:"flex h-3 w-3 absolute top-0 right-0 -mt-1 -mr-1 ping",children:[(0,l.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full brightness-225 opacity-75"}),(0,l.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 brightness-200"})]})]},e.id)})}),(0,l.jsx)("div",{className:"flex",children:s.length>0&&(0,l.jsx)(a9,{label:null!=(n=null==(t=r.options)?void 0:t.buttonLabel)?n:"Send",disableIcon:!0})})]})},ib=e=>new Promise(t=>{if(e.getElementById("stripe-script"))return t();let n=e.createElement("script");n.src="https://js.stripe.com/v3",n.id="stripe-script",e.body.appendChild(n),n.onload=()=>{t()}}),iy=(0,u.createContext)({}),iv=e=>{let{children:t,onScroll:n}=e;return(0,l.jsx)(iy.Provider,{value:{scroll:n},children:t})},i_=()=>(0,u.useContext)(iy),iE=e=>{let{apiHost:t,isPreview:n,inputOptions:r,variables:a}=e;return I({url:"".concat(t,"/api/integrations/stripe/createPaymentIntent"),method:"POST",body:{inputOptions:r,isPreview:n,variables:a}})},ix=e=>{let{options:t,onSuccess:n}=e,{apiHost:r,isPreview:a,typebot:{variables:i},onNewLog:o}=W(),[s,c]=(0,u.useState)(null),[p,m]=(0,u.useState)(""),[h,g]=(0,u.useState)("");return(0,u.useEffect)(()=>{(0,d.d)(void 0,null,function*(){let{data:e,error:n}=yield iE({apiHost:r,isPreview:a,variables:i,inputOptions:t});if(n)return o({status:"error",description:n.name+" "+n.message,details:n.message});e&&document&&(yield ib(document),null!=window&&window.Stripe&&(c(window.Stripe(e.publicKey)),m(e.clientSecret),g(e.amountLabel)))})},[]),s&&p?(0,l.jsx)(b.Elements,{stripe:s,options:{clientSecret:p},children:(0,l.jsx)(iw,{onSuccess:n,clientSecret:p,amountLabel:h,options:t,variables:i,viewerHost:r})}):(0,l.jsx)(a6,{className:"text-blue-500"})},iw=e=>{let{onSuccess:t,clientSecret:n,amountLabel:r,options:a,variables:i,viewerHost:o}=e,{scroll:s}=i_(),[c,p]=(0,u.useState)(!0),m=(0,b.useStripe)(),h=(0,b.useElements)(),[g,f]=(0,u.useState)(),[y,v]=(0,u.useState)(!1),[_,E]=(0,u.useState)(!1);return(0,u.useEffect)(()=>{if(!(!m||!n)){if(c)return p(!1);m.retrievePaymentIntent(n).then(e=>{let{paymentIntent:t}=e;switch(null==t?void 0:t.status){case"succeeded":f("Payment succeeded!");break;case"processing":f("Your payment is processing.");break;case"requires_payment_method":f("Your payment was not successful, please try again.");break;default:f("Something went wrong.")}})}},[m,n]),(0,l.jsxs)("form",{id:"payment-form",onSubmit:e=>(0,d.d)(void 0,null,function*(){var n,r,s,l,d,u;if(e.preventDefault(),!m||!h)return;v(!0);let{error:c,paymentIntent:p}=yield m.confirmPayment({elements:h,confirmParams:{return_url:o,payment_method_data:{billing_details:{name:null!=(n=a.additionalInformation)&&n.name?M(i)(null==(r=a.additionalInformation)?void 0:r.name):void 0,email:null!=(s=a.additionalInformation)&&s.email?M(i)(null==(l=a.additionalInformation)?void 0:l.email):void 0,phone:null!=(d=a.additionalInformation)&&d.phoneNumber?M(i)(null==(u=a.additionalInformation)?void 0:u.phoneNumber):void 0}}},redirect:"if_required"});if(v(!1),(null==c?void 0:c.type)!=="validation_error"){if((null==c?void 0:c.type)==="card_error")return f(c.message);if(!c&&"succeeded"===p.status)return t()}}),className:"flex flex-col rounded-lg p-4 typebot-input w-full items-center",children:[(0,l.jsx)(b.PaymentElement,{id:"payment-element",className:"w-full",onReady:()=>{E(!0),s()}}),_&&(0,l.jsx)(a9,{label:"".concat(a.labels.button," ").concat(r),isDisabled:y||!m||!h,isLoading:y,className:"mt-4 w-full max-w-lg",disableIcon:!0}),g&&(0,l.jsx)("div",{id:"payment-message",className:"typebot-input-error-message mt-4 text-center",children:g})]})},iI=e=>{let{onSuccess:t,options:n}=e;if("Stripe"===n.provider)return(0,l.jsx)(ix,{onSuccess:t,options:n})},iT=e=>{var t,n;let{block:r,onSubmit:a}=e,[i,o]=(0,u.useState)(),s=e=>{e.preventDefault(),S(i)||a({value:i.toString()})},c=e=>{r.options.isOneClickSubmitEnabled&&a({value:e.toString()}),o(e)};return(0,l.jsxs)("form",{className:"flex flex-col",onSubmit:s,children:[r.options.labels.left&&(0,l.jsx)("span",{className:"text-sm w-full mb-2 rating-label",children:r.options.labels.left}),(0,l.jsx)("div",{className:"flex flex-wrap justify-center",children:Array.from(Array(r.options.length+("Numbers"===r.options.buttonType?1:0))).map((e,t)=>(0,u.createElement)(iS,(0,d.b)((0,d.a)({},r.options),{key:t,rating:i,idx:t+("Numbers"===r.options.buttonType?0:1),onClick:c})))}),r.options.labels.right&&(0,l.jsx)("span",{className:"text-sm w-full text-right mb-2 pr-2 rating-label",children:r.options.labels.right}),(0,l.jsx)("div",{className:"flex justify-end mr-2",children:T(i)&&(0,l.jsx)(a9,{label:null!=(n=null==(t=r.options)?void 0:t.labels.button)?n:"Send",disableIcon:!0})})]})},iS=e=>{let{rating:t,idx:n,buttonType:r,customIcon:a,onClick:i}=e;return"Numbers"===r?(0,l.jsx)("button",{onClick:e=>{e.preventDefault(),i(n)},className:"py-2 px-4 mr-2 mb-2 text-left font-semibold rounded-md transition-all filter hover:brightness-90 active:brightness-75 duration-100 focus:outline-none typebot-button "+(T(t)&&n<=t?"":"selectable"),children:n}):(0,l.jsx)("div",{className:"flex justify-center items-center rating-icon-container cursor-pointer mr-2 mb-2 "+(T(t)&&n<=t?"selected":""),onClick:()=>i(n),dangerouslySetInnerHTML:{__html:a.isEnabled&&!C(a.svg)?a.svg:iC}})},iC='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-star"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>',ij=e=>(0,d.d)(void 0,[e],function*(e){let{basePath:t="/api",files:n,onUploadProgress:r}=e,a=[],i=0;for(let{file:e,path:o}of n){r&&r(i/n.length*100),i+=1;let{data:s}=yield I("".concat(t,"/storage/upload-url?filePath=").concat(encodeURIComponent(o),"&fileType=").concat(e.type));if(!(null!=s&&s.presignedUrl))continue;let l=s.presignedUrl;if(s.hasReachedStorageLimit)a.push(null);else{if(!(yield fetch(l,{method:"PUT",body:e})).ok)continue;a.push(l.split("?")[0])}}return a}),ik=e=>{var t,n;let{block:{id:r,options:{isMultipleAllowed:a,labels:i,sizeLimit:o,isRequired:s}},onSubmit:c,onSkip:p}=e,{isPreview:m,currentTypebotId:h}=W(),{resultId:g}=aQ(),[b,f]=(0,u.useState)([]),[y,v]=(0,u.useState)(!1),[_,E]=(0,u.useState)(0),[x,w]=(0,u.useState)(!1),[I,T]=(0,u.useState)(),S=e=>(0,d.d)(void 0,null,function*(){e.target.files&&C(e.target.files)}),C=e=>{T(void 0);let t=Array.from(e);return t.some(e=>e.size>(null!=o?o:10)*1048576)?T("A file is larger than ".concat(null!=o?o:10,"MB")):!a&&e?k(t[0]):void f([...b,...t])},j=e=>(0,d.d)(void 0,null,function*(){e.preventDefault(),0!==b.length&&P(b)}),k=e=>(0,d.d)(void 0,null,function*(){var t;if(m)return c({label:"File uploaded",value:"http://fake-upload-url.com"});v(!0);let n=yield ij({basePath:"/api/typebots/".concat(h,"/blocks/").concat(r),files:[{file:e,path:"public/results/".concat(g,"/").concat(r,"/").concat(e.name)}]});if(v(!1),n.length)return c({label:"File uploaded",value:null!=(t=n[0])?t:""});T("An error occured while uploading the file")}),P=e=>(0,d.d)(void 0,null,function*(){if(m)return c({label:"".concat(e.length," file").concat(e.length>1?"s":""," uploaded"),value:e.map((e,t)=>"http://fake-upload-url.com/".concat(t)).join(", ")});v(!0);let t=yield ij({basePath:"/api/typebots/".concat(h,"/blocks/").concat(r),files:e.map(e=>({file:e,path:"public/results/".concat(g,"/").concat(r,"/").concat(e.name)})),onUploadProgress:E});if(v(!1),E(0),t.length!==e.length)return T("An error occured while uploading the files");c({label:"".concat(t.length," file").concat(t.length>1?"s":""," uploaded"),value:t.join(", ")})}),N=e=>{e.preventDefault(),w(!0)},R=()=>w(!1),A=e=>{e.preventDefault(),e.stopPropagation(),e.dataTransfer.files&&C(e.dataTransfer.files)},O=()=>f([]);return(0,l.jsxs)("form",{className:"flex flex-col w-full",onSubmit:j,children:[(0,l.jsx)("label",{htmlFor:"dropzone-file",className:"typebot-upload-input py-6 flex flex-col justify-center items-center w-full bg-gray-50 rounded-lg border-2 border-gray-300 border-dashed cursor-pointer hover:bg-gray-100 px-8 mb-2 "+(x?"dragging-over":""),onDragOver:N,onDragLeave:R,onDrop:A,children:y?(0,l.jsx)(l.Fragment,{children:1===b.length?(0,l.jsx)(a6,{}):(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,l.jsx)("div",{className:"upload-progress-bar h-2.5 rounded-full",style:{width:"".concat(_>0?_:10,"%"),transition:"width 150ms cubic-bezier(0.4, 0, 0.2, 1)"}})})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[b.length?(0,l.jsxs)("span",{className:"relative",children:[(0,l.jsx)(iN,{}),(0,l.jsx)("div",{className:"total-files-indicator flex items-center justify-center absolute -right-1 rounded-full px-1 h-4",style:{bottom:"5px"},children:b.length})]}):(0,l.jsx)(iP,{}),(0,l.jsx)("p",{className:"text-sm text-gray-500 text-center",dangerouslySetInnerHTML:{__html:i.placeholder}})]}),(0,l.jsx)("input",{id:"dropzone-file",type:"file",className:"hidden",multiple:a,onChange:S})]})}),0===b.length&&!1===s&&(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)("button",{className:"py-2 px-4 justify-center font-semibold rounded-md text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 typebot-button ",onClick:p,children:null!=(t=i.skip)?t:n_.labels.skip})}),a&&b.length>0&&!y&&(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsxs)("div",{className:"flex",children:[b.length&&(0,l.jsx)("button",{className:"secondary-button py-2 px-4 justify-center font-semibold rounded-md text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 mr-2",onClick:O,children:null!=(n=i.clear)?n:n_.labels.clear}),(0,l.jsx)(a9,{type:"submit",label:i.button===n_.labels.button?"".concat(i.button," ").concat(b.length," file").concat(b.length>1?"s":""):i.button,disableIcon:!0})]})}),I&&(0,l.jsx)("p",{className:"text-red-500 text-sm",children:I})]})},iP=()=>(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mb-3",children:[(0,l.jsx)("polyline",{points:"16 16 12 12 8 16"}),(0,l.jsx)("line",{x1:"12",y1:"12",x2:"12",y2:"21"}),(0,l.jsx)("path",{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"}),(0,l.jsx)("polyline",{points:"16 16 12 12 8 16"})]}),iN=()=>(0,l.jsxs)("svg",{className:"mb-3",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}),(0,l.jsx)("polyline",{points:"13 2 13 9 20 9"})]}),iR=e=>{var t,n,r,a,i;let{block:o,hasAvatar:s,hasGuestAvatar:c,onTransitionEnd:p,onSkip:m}=e,{typebot:h,isLoading:g}=W(),{addAnswer:b}=aQ(),[f,y]=(0,u.useState)(),[v,_]=(0,u.useState)(!1),{variableId:E}=o.options,x=(null==(t=h.settings.general.isInputPrefillEnabled)||t)&&E?null==(n=h.variables.find(e=>{var t;return e.name===(null==(t=h.variables.find(L(E)))?void 0:t.name)}))?void 0:n.value:void 0,w=e=>(0,d.d)(void 0,[e],function*(e){let{label:t,value:n,itemId:r}=e;y(null!=t?t:n);let a=!is(n,o.type);!a&&b&&(yield b(h.variables)({blockId:o.id,groupId:o.groupId,content:n,variableId:E,uploadedFiles:"file input"===o.type})),v||p({label:t,value:n,itemId:r},a),_(!1)});if(g)return null;if(f){let e=null==(r=h.theme.chat.guestAvatar)?void 0:r.url;return(0,l.jsx)(a0,{message:f,showAvatar:null!=(i=null==(a=h.theme.chat.guestAvatar)?void 0:a.isEnabled)&&i,avatarSrc:e&&M(h.variables)(e)})}return(0,l.jsxs)("div",{className:"flex justify-end",children:[s&&(0,l.jsx)("div",{className:"flex w-6 xs:w-10 h-6 xs:h-10 mr-2 mb-2 mt-1 flex-shrink-0 items-center"}),(0,l.jsx)(iA,{block:o,onSubmit:w,onSkip:m,defaultValue:null==x?void 0:x.toString(),hasGuestAvatar:c})]})},iA=e=>{let{block:t,onSubmit:n,onSkip:r,defaultValue:a,hasGuestAvatar:i}=e;switch(t.type){case"text input":return(0,l.jsx)(ic,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"number input":return(0,l.jsx)(ip,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"email input":return(0,l.jsx)(a7,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"url input":return(0,l.jsx)(ia,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"phone number input":return(0,l.jsx)(it,{block:t,onSubmit:n,defaultValue:a,hasGuestAvatar:i});case"date input":return(0,l.jsx)(ih,{options:t.options,onSubmit:n});case"choice input":return(0,l.jsx)(ig,{block:t,onSubmit:n});case"payment input":return(0,l.jsx)(iI,{options:t.options,onSuccess:()=>{var e;return n({value:null!=(e=t.options.labels.success)?e:"Success"})}});case"rating input":return(0,l.jsx)(iT,{block:t,onSubmit:n});case"file input":return(0,l.jsx)(ik,{block:t,onSubmit:n,onSkip:r});default:return null}},iO=e=>{var t;return'\nwindow.$chatwoot.setUser("'.concat(null!=(t=null==e?void 0:e.id)?t:"",'", {\n  email: ').concat(null!=e&&e.email?'"'.concat(e.email,'"'):"undefined",",\n  name: ").concat(null!=e&&e.name?'"'.concat(e.name,'"'):"undefined",",\n  avatar_url: ").concat(null!=e&&e.avatarUrl?'"'.concat(e.avatarUrl,'"'):"undefined",",\n  phone_number: ").concat(null!=e&&e.phoneNumber?'"'.concat(e.phoneNumber,'"'):"undefined",",\n});\n\n")},iL=e=>{let{baseUrl:t,websiteToken:n,user:r}=e;return"\nif (window.$chatwoot) {\n  if(".concat(!!r,") {\n    ").concat(iO(r),'\n  }\n  window.$chatwoot.toggle("open");\n} else {\n  (function (d, t) {\n    var BASE_URL = "').concat(t,'";\n    var g = d.createElement(t),\n      s = d.getElementsByTagName(t)[0];\n    g.src = BASE_URL + "/packs/js/sdk.js";\n    g.defer = true;\n    g.async = true;\n    s.parentNode.insertBefore(g, s);\n    g.onload = function () {\n      window.chatwootSDK.run({\n        websiteToken: "').concat(n,'",\n        baseUrl: BASE_URL,\n      });\n      window.addEventListener("chatwoot:ready", function () {\n        if(').concat(!!((null==r?void 0:r.id)||(null==r?void 0:r.email)),") {\n          ").concat(iO(r),'\n        }\n        window.$chatwoot.toggle("open");\n      });\n    };\n  })(document, "script");\n}')},iU=(e,t)=>{let{variables:n,isPreview:r,onNewLog:a}=t;if(r)a({status:"info",description:"Chatwoot won't open in preview mode",details:null});else if(a2)G({closeChatBubble:!0}),G({codeToExecute:M(n)(iL(e.options))});else{let t=Function(M(n)(iL(e.options)));try{t()}catch(e){console.error(e)}}return e.outgoingEdgeId},iB=(e,t)=>(0,d.d)(void 0,[e,t],function*(e,t){var r;let{variables:a}=t;if(!(null!=(r=e.options)&&r.trackingId))return e.outgoingEdgeId;let{default:i}=yield n.e(671).then(n.bind(n,3671));return yield i(e.options.trackingId),(0,d.e)(V(e.options,a)),e.outgoingEdgeId}),iM=(e,t)=>(0,d.d)(void 0,null,function*(){if(!("action"in e.options))return e.outgoingEdgeId;switch(e.options.action){case"Insert a row":iD(e.options,t);break;case"Update a row":iz(e.options,t);break;case"Get data from sheet":yield iZ(e.options,t)}return e.outgoingEdgeId}),iD=(e,t)=>{let{variables:n,apiHost:r,onNewLog:a,resultId:i}=t;if(!e.cellsToInsert){a({status:"warning",description:"Cells to insert are undefined",details:null});return}I({url:"".concat(r,"/api/integrations/google-sheets/spreadsheets/").concat(e.spreadsheetId,"/sheets/").concat(e.sheetId),method:"POST",body:{action:"Insert a row",credentialsId:e.credentialsId,resultId:i,values:iV(e.cellsToInsert,n)}}).then(e=>{let{error:t}=e;a(a5(t,"Succesfully inserted a row in the sheet","Failed to insert a row in the sheet"))})},iz=(e,t)=>{var n;let{variables:r,apiHost:a,onNewLog:i,resultId:o}=t;e.cellsToUpsert&&e.referenceCell&&I({url:"".concat(a,"/api/integrations/google-sheets/spreadsheets/").concat(e.spreadsheetId,"/sheets/").concat(e.sheetId),method:"POST",body:{action:"Update a row",credentialsId:e.credentialsId,values:iV(e.cellsToUpsert,r),resultId:o,referenceCell:{column:e.referenceCell.column,value:M(r)(null!=(n=e.referenceCell.value)?n:"")}}}).then(e=>{let{error:t}=e;i(a5(t,"Succesfully updated a row in the sheet","Failed to update a row in the sheet"))})},iZ=(e,t)=>(0,d.d)(void 0,[e,t],function*(e,t){var n,r,a;let{variables:i,updateVariableValue:o,updateVariables:s,apiHost:l,onNewLog:u,resultId:c}=t;if(!e.cellsToExtract)return;let{data:p,error:m}=yield I({url:"".concat(l,"/api/integrations/google-sheets/spreadsheets/").concat(e.spreadsheetId,"/sheets/").concat(e.sheetId),method:"POST",body:{action:"Get data from sheet",credentialsId:e.credentialsId,referenceCell:e.referenceCell?{column:e.referenceCell.column,value:M(i)(null!=(n=e.referenceCell.value)?n:"")}:void 0,filter:e.filter?{comparisons:e.filter.comparisons.map(e=>(0,d.b)((0,d.a)({},e),{value:M(i)(e.value)})),logicalOperator:null!=(a=null==(r=e.filter)?void 0:r.logicalOperator)?a:"AND"}:void 0,columns:e.cellsToExtract.map(e=>e.column),resultId:c}});u(a5(m,"Succesfully fetched data from sheet","Failed to fetch data from sheet")),p&&s(e.cellsToExtract.reduce((e,t)=>{var n,r;let a=i.find(L(t.variableId)),s=p.rows,l=null!=(r=s[Math.floor(Math.random()*s.length)][null!=(n=t.column)?n:""])?r:null;return a?(o(a.id,l),[...e,(0,d.b)((0,d.a)({},a),{value:l})]):e},[]))}),iV=(e,t)=>e.reduce((e,n)=>n.column&&n.value?(0,d.b)((0,d.a)({},e),{[n.column]:M(t)(n.value)}):e,{}),iH=(e,t)=>{var n,r,a,i,o;let{variables:s,apiHost:l,isPreview:d,onNewLog:u,resultId:c,typebotId:p,resultValues:m}=t;if(d)return u({status:"info",description:"Emails are not sent in preview mode",details:null}),e.outgoingEdgeId;let{options:h}=e;return I({url:"".concat(l,"/api/typebots/").concat(p,"/integrations/email?resultId=").concat(c),method:"POST",body:{credentialsId:h.credentialsId,recipients:h.recipients.map(M(s)),subject:M(s)(null!=(n=h.subject)?n:""),body:M(s)(null!=(r=h.body)?r:""),cc:(null!=(a=h.cc)?a:[]).map(M(s)),bcc:(null!=(i=h.bcc)?i:[]).map(M(s)),replyTo:h.replyTo?M(s)(h.replyTo):void 0,fileUrls:null==(o=s.find(L(h.attachmentsVariableId)))?void 0:o.value,isCustomBody:h.isCustomBody,isBodyCode:h.isBodyCode,resultValues:m}}).then(e=>{let{error:t}=e;u(a5(t,"Succesfully sent an email","Failed to send an email"))}),e.outgoingEdgeId},iG=(e,t)=>(0,d.d)(void 0,[e,t],function*(e,t){let{blockId:n,variables:r,updateVariableValue:a,updateVariables:i,typebotId:o,apiHost:s,resultValues:l,onNewLog:u,resultId:c,parentTypebotIds:p}=t,m=(0,f.stringify)({resultId:c}),{data:h,error:g}=yield I({url:"".concat(s,"/api/typebots/").concat(o,"/blocks/").concat(n,"/executeWebhook?").concat(m),method:"POST",body:{variables:r,resultValues:l,parentTypebotIds:p}}),b=null==h?void 0:h.statusCode.toString(),y=!b||(null==b?void 0:b.startsWith("4"))||(null==b?void 0:b.startsWith("5"));return u({status:g?"error":y?"warning":"success",description:y?"Webhook returned an error":"Webhook successfuly executed",details:JSON.stringify(null!=g?g:h,null,2).substring(0,1e3)}),i(e.options.responseVariableMapping.reduce((e,t)=>{if(!(null!=t&&t.bodyPath)||!t.variableId)return e;let n=r.find(L(t.variableId));if(!n)return e;let i=Function("data","return data.".concat(M(r)(null==t?void 0:t.bodyPath)));try{let t=i(h);return a(null==n?void 0:n.id,t),[...e,(0,d.b)((0,d.a)({},n),{value:t})]}catch(t){return e}},[])),e.outgoingEdgeId}),iF=e=>{let{block:t,context:n}=e;switch(t.type){case"Google Sheets":return iM(t,n);case"Google Analytics":return iB(t,n);case"Zapier":case"Make.com":case"Pabbly":case"Webhook":return iG(t,n);case"Email":return iH(t,n);case"Chatwoot":return iU(t,n);default:return}},iY=(e,t)=>{let{typebot:{variables:n}}=t,r=e.items.find(e=>{let{content:t}=e;return"AND"===t.logicalOperator?t.comparisons.every(iW(n)):t.comparisons.some(iW(n))});return r?r.outgoingEdgeId:e.outgoingEdgeId},iW=e=>t=>{var n,r;if(!(null!=t&&t.variableId))return!1;let a=(null!=(r=null==(n=e.find(e=>e.id===t.variableId))?void 0:n.value)?r:"").toString().trim(),i=M(e)(t.value).trim();return!S(i)&&!!t.comparisonOperator&&iK(a,t.comparisonOperator,i)},iK=(e,t,n)=>{switch(t){case"Contains":return e.toLowerCase().includes(n.toLowerCase());case"Equal to":return e===n;case"Not equal":return e!==n;case"Greater than":return parseFloat(e)>parseFloat(n);case"Less than":return parseFloat(e)<parseFloat(n);case"Is set":return T(e)&&e.length>0}},iX=(e,t)=>{var n,r;let{typebot:{variables:a}}=t;if(!(null!=(n=e.options)&&n.url))return{nextEdgeId:e.outgoingEdgeId};let i=B(M(a)(e.options.url)),o=window.parent&&window.location!==(null==(r=window.top)?void 0:r.location),s=null;if(o){if(!e.options.isNewTab)return window.top.location.href=i,{nextEdgeId:e.outgoingEdgeId};try{s=window.open(i)}catch(e){G({redirectUrl:i})}}else s=window.open(i,e.options.isNewTab?"_blank":"_self");return{nextEdgeId:e.outgoingEdgeId,blockedPopupUrl:s?void 0:i}},iq=(e,t)=>{var n;let{typebot:{variables:r},updateVariableValue:a,updateVariables:i}=t;if(!(null!=(n=e.options)&&n.variableId))return e.outgoingEdgeId;let o=e.options.expressionToEvaluate?iJ(r)(e.options.expressionToEvaluate):void 0,s=r.find(L(e.options.variableId));return s&&(a(s.id,o),i([(0,d.b)((0,d.a)({},s),{value:o})])),e.outgoingEdgeId},iJ=e=>t=>{let n=M(e,{fieldToParse:"id"})(t.includes("return ")?t:"return ".concat(t));try{return Function(...e.map(e=>e.id),n)(...e.map(e=>z(e.value)))}catch(n){return M(e)(t)}},i$=(e,t)=>(0,d.d)(void 0,[e,t],function*(e,t){let{apiHost:n,injectLinkedTypebot:r,isPreview:a}=t,{data:i,error:o}=a?yield I("/api/typebots/".concat(e.options.typebotId)):yield I("".concat(n,"/api/publicTypebots/").concat(e.options.typebotId));if(!(!i||o))return r(i.typebot)}),iQ=(e,t)=>(0,d.d)(void 0,null,function*(){var n,r,a;let{typebot:i,linkedTypebots:o,onNewLog:s,createEdge:l,setCurrentTypebotId:u,pushEdgeIdInLinkedTypebotQueue:c,pushParentTypebotId:p,currentTypebotId:m}=t,h="current"===e.options.typebotId?i:null!=(n=[i,...o].find(t=>"typebotId"in t?t.typebotId===e.options.typebotId:t.id===e.options.typebotId))?n:yield i$(e,t);if(!h)return s({status:"error",description:"Failed to link typebot",details:""}),{nextEdgeId:e.outgoingEdgeId};e.outgoingEdgeId&&c({edgeId:e.outgoingEdgeId,typebotId:m}),p(m),u("typebotId"in h?h.typebotId:h.id);let g=null!=(a=e.options.groupId)?a:null==(r=h.groups.find(e=>e.blocks.some(e=>"start"===e.type)))?void 0:r.id;if(!g)return{nextEdgeId:e.outgoingEdgeId};let b={id:(1e3*Math.random()).toString(),from:{blockId:"",groupId:""},to:{groupId:g}};return l(b),{nextEdgeId:b.id,linkedTypebot:(0,d.b)((0,d.a)({},h),{edges:[...h.edges,b]})}}),i0=(e,t)=>(0,d.d)(void 0,[e,t],function*(e,t){let{typebot:{variables:n}}=t;if(!e.options.secondsToWaitFor)return e.outgoingEdgeId;let r=M(n)(e.options.secondsToWaitFor);return isNaN(r)||(yield new Promise(e=>setTimeout(e,1e3*parseInt(r)))),e.outgoingEdgeId}),i1=(e,t)=>(0,d.d)(void 0,[e,t],function*(e,t){let{typebot:{variables:n}}=t;if(e.options.content){if(e.options.shouldExecuteInParentContext&&a2)G({codeToExecute:M(n)(e.options.content)});else{let t=Function(...n.map(e=>e.id),M(n,{fieldToParse:"id"})(e.options.content));try{yield t(...n.map(e=>z(e.value)))}catch(e){console.error(e)}}return e.outgoingEdgeId}}),i2=(e,t)=>(0,d.d)(void 0,null,function*(){switch(e.type){case"Set variable":return{nextEdgeId:iq(e,t)};case"Condition":return{nextEdgeId:iY(e,t)};case"Redirect":return iX(e,t);case"Code":return{nextEdgeId:yield i1(e,t)};case"Typebot link":return iQ(e,t);case"Wait":return{nextEdgeId:yield i0(e,t)};default:return{}}}),i5=e=>{let{url:t,onLinkClick:n}=e;return(0,l.jsxs)("div",{className:"w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow flex flex-col gap-2",role:"alert",children:[(0,l.jsx)("span",{className:"mb-1 text-sm font-semibold text-gray-900",children:"Popup blocked"}),(0,l.jsx)("div",{className:"mb-2 text-sm font-normal",children:"The bot wants to open a new tab but it was blocked by your broswer. It needs a manual approval."}),(0,l.jsx)("a",{href:t,target:"_blank",className:"py-1 px-4 justify-center text-sm font-semibold rounded-md text-white focus:outline-none flex items-center disabled:opacity-50 disabled:cursor-not-allowed disabled:brightness-100 transition-all filter hover:brightness-90 active:brightness-75 typebot-button",rel:"noreferrer",onClick:n,children:"Continue in new tab"})]})},i4=e=>{var t;let{blocks:n,startBlockIndex:r,groupTitle:a,onGroupEnd:i,keepShowingHostAvatar:o}=e,{currentTypebotId:s,typebot:c,updateVariableValue:p,createEdge:m,apiHost:h,isPreview:g,parentTypebotIds:b,onNewLog:f,injectLinkedTypebot:y,linkedTypebots:v,setCurrentTypebotId:_,pushEdgeIdInLinkedTypebotQueue:E,pushParentTypebotId:x}=W(),{resultValues:w,updateVariables:I,resultId:S}=aQ(),{scroll:C}=i_(),[j,U]=(0,u.useState)([]),[B,D]=(0,u.useState)([]),[z,Z]=(0,u.useState)(),V=e=>{if(U([...j,e]),P(e)){let t=H(j);t&&O(t)?D(B.map((t,n)=>n===B.length-1?{bubbles:[...t.bubbles,e]}:t)):D([...B,{bubbles:[e]}])}k(e)&&(0===B.length||T(B[B.length-1].input)?D([...B,{bubbles:[],input:e}]):D(B.map((t,n)=>n===B.length-1?(0,d.b)((0,d.a)({},t),{input:e}):t)))};(0,u.useEffect)(()=>{let e=n[r];e&&V(e)},[]),(0,u.useEffect)(()=>{C(),G()},[j]);let G=()=>(0,d.d)(void 0,null,function*(){let e=[...j].pop();if(e){if(N(e)){let{nextEdgeId:t,linkedTypebot:n,blockedPopupUrl:r}=yield i2(e,{isPreview:g,apiHost:h,typebot:c,linkedTypebots:v,updateVariableValue:p,updateVariables:I,injectLinkedTypebot:y,onNewLog:f,createEdge:m,setCurrentTypebotId:_,pushEdgeIdInLinkedTypebotQueue:E,currentTypebotId:s,pushParentTypebotId:x});if(r&&Z(r),"Redirect"===e.type&&!1===e.options.isNewTab)return;t?i({edgeId:t,updatedTypebot:n}):F()}if(A(e)){let t=yield iF({block:e,context:{apiHost:h,typebotId:s,groupId:e.groupId,blockId:e.id,variables:c.variables,isPreview:g,updateVariableValue:p,updateVariables:I,resultValues:w,groups:c.groups,onNewLog:f,resultId:S,parentTypebotIds:b}});t?i({edgeId:t}):F()}"start"===e.type&&i({edgeId:e.outgoingEdgeId})}}),F=(e,t)=>{var a,o;C();let s=[...j].pop();if(s){if(t&&il(s))return V(id(s,c.variables,m));if(k(s)&&(null==(a=s.options)?void 0:a.variableId)&&e&&p(s.options.variableId,e.value),R(s)&&!s.options.isMultipleChoice){let t=null==(o=s.items.find(L(null==e?void 0:e.itemId)))?void 0:o.outgoingEdgeId;if(t)return i({edgeId:t})}if((null==s?void 0:s.outgoingEdgeId)||j.length===n.length)return i({edgeId:s.outgoingEdgeId})}let l=n[j.length+r];l?V(l):i({})},Y=null==(t=c.theme.chat.hostAvatar)?void 0:t.url;return(0,l.jsx)("div",{className:"flex w-full","data-group-name":a,children:(0,l.jsx)("div",{className:"flex flex-col w-full min-w-0",children:B.map((e,t)=>{var n,r,a,i;return(0,l.jsx)(i3,{displayChunk:e,hostAvatar:{isEnabled:null==(r=null==(n=c.theme.chat.hostAvatar)?void 0:n.isEnabled)||r,src:Y&&M(c.variables)(Y)},hasGuestAvatar:null!=(i=null==(a=c.theme.chat.guestAvatar)?void 0:a.isEnabled)&&i,onDisplayNextBlock:F,keepShowingHostAvatar:o,blockedPopupUrl:z,onBlockedPopupLinkClick:()=>Z(void 0)},t)})})})},i3=e=>{let{displayChunk:{bubbles:t,input:n},hostAvatar:r,hasGuestAvatar:a,keepShowingHostAvatar:i,blockedPopupUrl:o,onBlockedPopupLinkClick:s,onDisplayNextBlock:d}=e,[m,h]=(0,u.useState)(!1),g=(0,u.useRef)();(0,u.useEffect)(()=>{f()});let b=()=>{d(),h(!0)},f=()=>{var e;return null==(e=g.current)?void 0:e.refreshTopOffset()};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex",children:[r.isEnabled&&t.length>0&&(0,l.jsx)(q,{ref:g,hostAvatarSrc:r.src,keepShowing:(i||T(n))&&!m}),(0,l.jsx)("div",{className:"flex-1",style:{marginRight:a?"50px":"0.5rem"},children:(0,l.jsx)(c.Z,{children:t.map(e=>(0,l.jsx)(p.Z,{classNames:"bubble",timeout:500,unmountOnExit:!0,children:(0,l.jsx)(aq,{block:e,onTransitionEnd:()=>{d(),f()}})},e.id))})})]}),!m&&(0,l.jsx)(p.Z,{classNames:"bubble",timeout:500,unmountOnExit:!0,in:T(n),children:n?(0,l.jsx)(iR,{block:n,onTransitionEnd:d,onSkip:b,hasAvatar:r.isEnabled,hasGuestAvatar:a}):(0,l.jsx)("div",{})}),o?(0,l.jsx)("div",{className:"flex justify-end",children:(0,l.jsx)(i5,{url:o,onLinkClick:s})}):null]})},i9={general:{bgImage:"--typebot-container-bg-image",bgColor:"--typebot-container-bg-color",fontFamily:"--typebot-container-font-family"},chat:{hostBubbles:{bgColor:"--typebot-host-bubble-bg-color",color:"--typebot-host-bubble-color"},guestBubbles:{bgColor:"--typebot-guest-bubble-bg-color",color:"--typebot-guest-bubble-color"},inputs:{bgColor:"--typebot-input-bg-color",color:"--typebot-input-color",placeholderColor:"--typebot-input-placeholder-color"},buttons:{bgColor:"--typebot-button-bg-color",color:"--typebot-button-color"}}},i6=(e,t)=>{!e||(e.general&&i7(e.general,t),e.chat&&i8(e.chat,t))},i7=(e,t)=>{let{background:n,font:r}=e;r&&t.setProperty(i9.general.fontFamily,r)},i8=(e,t)=>{let{hostBubbles:n,guestBubbles:r,buttons:a,inputs:i}=e;n&&oe(n,t),r&&ot(r,t),a&&on(a,t),i&&or(i,t)},oe=(e,t)=>{e.backgroundColor&&t.setProperty(i9.chat.hostBubbles.bgColor,e.backgroundColor),e.color&&t.setProperty(i9.chat.hostBubbles.color,e.color)},ot=(e,t)=>{e.backgroundColor&&t.setProperty(i9.chat.guestBubbles.bgColor,e.backgroundColor),e.color&&t.setProperty(i9.chat.guestBubbles.color,e.color)},on=(e,t)=>{e.backgroundColor&&t.setProperty(i9.chat.buttons.bgColor,e.backgroundColor),e.color&&t.setProperty(i9.chat.buttons.color,e.color)},or=(e,t)=>{e.backgroundColor&&t.setProperty(i9.chat.inputs.bgColor,e.backgroundColor),e.color&&t.setProperty(i9.chat.inputs.color,e.color),e.placeholderColor&&t.setProperty(i9.chat.inputs.placeholderColor,e.placeholderColor)},oa=e=>{let{theme:t,predefinedVariables:n,startGroupId:r,onNewGroupVisible:a,onCompleted:i}=e,{typebot:o,updateVariableValue:s,linkedBotQueue:c,popEdgeIdFromLinkedTypebotQueue:p}=W(),[m,h]=(0,u.useState)([]),{updateVariables:g}=aQ(),b=(0,u.useRef)(null),f=(0,u.useRef)(null),[v,_]=(0,u.useState)(!1),E=e=>{let{edgeId:t,updatedTypebot:n,groupId:r}=e,s=null!=n?n:o;if(r){let e=s.groups.find(L(r));return e?(a({id:"edgeId",from:{groupId:"block",blockId:"block"},to:{groupId:r}}),h([...m,{group:e,startBlockIndex:0}])):void 0}let l=s.edges.find(L(t));if(!l){if(c.length>0){let e=c[0].edgeId;p(),E({edgeId:e})}return i()}let d=s.groups.find(L(l.to.groupId));if(!d)return i();let u=l.to.blockId?d.blocks.findIndex(L(l.to.blockId)):0;a(l),h([...m,{group:d,startBlockIndex:-1===u?0:u}])};(0,u.useEffect)(()=>{if(v)return;T(n)&&Object.keys(n).length>0&&g(x(n)),_(!0);let e=o.groups[0].blocks[0].outgoingEdgeId;(e||r)&&E({edgeId:r?void 0:e,groupId:r})},[n]);let x=e=>{let t=[];return Object.keys(e).forEach(n=>{let r=o.variables.find(e=>e.name.toLowerCase()===n.toLowerCase());if(!e||S(r))return;let a=e[n];a&&(s(null==r?void 0:r.id,a),t.push((0,d.b)((0,d.a)({},r),{value:a})))}),t};return(0,u.useEffect)(()=>{document&&i6(t,document.body.style)},[t]),(0,l.jsxs)("div",{ref:f,className:"overflow-y-scroll w-full lg:w-3/4 min-h-full rounded lg:px-5 px-3 pt-10 relative scrollable-container typebot-chat-view",children:[(0,l.jsx)(iv,{onScroll:()=>{f.current&&setTimeout(()=>{y.NY.scrollToBottom({duration:500,container:f.current})},1)},children:m.map((e,t)=>{let n=m[t+1],r=n&&k(n.group.blocks[n.startBlockIndex]);return(0,l.jsx)(i4,{blocks:e.group.blocks,startBlockIndex:e.startBlockIndex,onGroupEnd:E,groupTitle:e.group.title,keepShowingHostAvatar:t===m.length-1||r},e.group.id+t)})}),(0,l.jsx)("div",{className:"w-full h-32",ref:b})]})},oi=()=>{let e=(0,u.useRef)(null);return(0,u.useEffect)(()=>{if(!document)return;let t=document.querySelector('[data-testid="container"]'),n=new MutationObserver(function(n){n.forEach(function(n){n.removedNodes.forEach(function(n){"lite-badge"==n.id&&t.append(e.current)})})});return n.observe(t,{subtree:!1,childList:!0}),()=>{n.disconnect()}},[]),(0,l.jsxs)("a",{ref:e,href:"https://www.typebot.io/?utm_source=litebadge",target:"_blank",rel:"noopener noreferrer",className:"fixed py-1 px-2 bg-white z-50 rounded shadow-md lite-badge",style:{bottom:"20px"},id:"lite-badge",children:["Made with ",(0,l.jsx)("span",{className:"text-blue-500",children:"Typebot"}),"."]})},oo=e=>window.__ENV?window.__ENV[e]:void 0,os=tX.enum(["true","false"]).transform(e=>"true"===e),ol={server:{NODE_ENV:tX.enum(["development","production","test"]).optional(),DATABASE_URL:tX.string().url().refine(e=>e.startsWith("postgres")||e.startsWith("mysql")),ENCRYPTION_SECRET:tX.string().length(32),NEXTAUTH_URL:tX.string().url(),DISABLE_SIGNUP:os.optional().default("false"),ADMIN_EMAIL:tX.string().email().optional(),DEFAULT_WORKSPACE_PLAN:tX.enum(["FREE","STARTER","PRO","LIFETIME","UNLIMITED"]).refine(e=>["FREE","STARTER","PRO","LIFETIME","UNLIMITED"].includes(e)).default("FREE"),DEBUG:os.optional().default("false")},client:{NEXT_PUBLIC_E2E_TEST:os.optional(),NEXT_PUBLIC_VIEWER_URL:tX.string().min(1).transform(e=>e.split(",")),NEXT_PUBLIC_VIEWER_INTERNAL_URL:tX.string().url().optional(),NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID:tX.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_E2E_TEST:oo("NEXT_PUBLIC_E2E_TEST"),NEXT_PUBLIC_VIEWER_URL:oo("NEXT_PUBLIC_VIEWER_URL"),NEXT_PUBLIC_VIEWER_INTERNAL_URL:oo("NEXT_PUBLIC_VIEWER_INTERNAL_URL"),NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID:oo("NEXT_PUBLIC_ONBOARDING_TYPEBOT_ID")}},od={server:{GITHUB_CLIENT_ID:tX.string().min(1).optional(),GITHUB_CLIENT_SECRET:tX.string().min(1).optional()}},ou={server:{FACEBOOK_CLIENT_ID:tX.string().min(1).optional(),FACEBOOK_CLIENT_SECRET:tX.string().min(1).optional()}},oc={server:{SMTP_USERNAME:tX.string().min(1).optional(),SMTP_PASSWORD:tX.string().min(1).optional(),SMTP_HOST:tX.string().min(1).optional(),SMTP_PORT:tX.coerce.number().optional().default(25),SMTP_AUTH_DISABLED:os.optional().default("false"),SMTP_SECURE:os.optional().default("false")},client:{NEXT_PUBLIC_SMTP_FROM:tX.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_SMTP_FROM:oo("NEXT_PUBLIC_SMTP_FROM")}},op={server:{GITLAB_CLIENT_ID:tX.string().min(1).optional(),GITLAB_CLIENT_SECRET:tX.string().min(1).optional(),GITLAB_BASE_URL:tX.string().url().optional().default("https://gitlab.com"),GITLAB_NAME:tX.string().min(1).optional().default("GitLab"),GITLAB_REQUIRED_GROUPS:tX.string().transform(e=>e?e.split(","):void 0).optional()}},om={server:{AZURE_AD_CLIENT_ID:tX.string().min(1).optional(),AZURE_AD_CLIENT_SECRET:tX.string().min(1).optional(),AZURE_AD_TENANT_ID:tX.string().min(1).optional()}},oh={server:{CUSTOM_OAUTH_NAME:tX.string().min(1).optional().default("Custom OAuth"),CUSTOM_OAUTH_SCOPE:tX.string().min(1).optional().default("openid profile email"),CUSTOM_OAUTH_CLIENT_ID:tX.string().min(1).optional(),CUSTOM_OAUTH_CLIENT_SECRET:tX.string().min(1).optional(),CUSTOM_OAUTH_WELL_KNOWN_URL:tX.string().url().optional(),CUSTOM_OAUTH_USER_ID_PATH:tX.string().min(1).optional().default("id"),CUSTOM_OAUTH_USER_EMAIL_PATH:tX.string().min(1).optional().default("email"),CUSTOM_OAUTH_USER_NAME_PATH:tX.string().min(1).optional().default("name"),CUSTOM_OAUTH_USER_IMAGE_PATH:tX.string().min(1).optional().default("image")}},og={server:{GOOGLE_CLIENT_ID:tX.string().min(1).optional(),GOOGLE_CLIENT_SECRET:tX.string().min(1).optional()},client:{NEXT_PUBLIC_GOOGLE_API_KEY:tX.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_GOOGLE_API_KEY:oo("NEXT_PUBLIC_GOOGLE_API_KEY")}},ob={server:{STRIPE_SECRET_KEY:tX.string().min(1).optional(),STRIPE_WEBHOOK_SECRET:tX.string().min(1).optional(),STRIPE_STARTER_PRODUCT_ID:tX.string().min(1).optional(),STRIPE_STARTER_MONTHLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_STARTER_YEARLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_STARTER_CHATS_MONTHLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_STARTER_CHATS_YEARLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_STARTER_STORAGE_MONTHLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_STARTER_STORAGE_YEARLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_PRO_PRODUCT_ID:tX.string().min(1).optional(),STRIPE_PRO_MONTHLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_PRO_YEARLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_PRO_CHATS_MONTHLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_PRO_CHATS_YEARLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_PRO_STORAGE_MONTHLY_PRICE_ID:tX.string().min(1).optional(),STRIPE_PRO_STORAGE_YEARLY_PRICE_ID:tX.string().min(1).optional()},client:{NEXT_PUBLIC_STRIPE_PUBLIC_KEY:tX.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_STRIPE_PUBLIC_KEY:oo("NEXT_PUBLIC_STRIPE_PUBLIC_KEY")}},of={server:{S3_ACCESS_KEY:tX.string().min(1).optional(),S3_SECRET_KEY:tX.string().min(1).optional(),S3_BUCKET:tX.string().min(1).optional().default("typebot"),S3_PORT:tX.coerce.number().optional(),S3_ENDPOINT:tX.string().min(1).optional(),S3_SSL:os.optional().default("true"),S3_REGION:tX.string().min(1).optional()}},oy={client:{NEXT_PUBLIC_GIPHY_API_KEY:tX.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_GIPHY_API_KEY:oo("NEXT_PUBLIC_GIPHY_API_KEY")}},ov={server:{VERCEL_TOKEN:tX.string().min(1).optional(),VERCEL_TEAM_ID:tX.string().min(1).optional(),VERCEL_GIT_COMMIT_SHA:tX.string().min(1).optional()},client:{NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME:tX.string().min(1).optional(),NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA:tX.string().min(1).optional(),NEXT_PUBLIC_VERCEL_ENV:tX.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME:oo("NEXT_PUBLIC_VERCEL_VIEWER_PROJECT_NAME"),NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA:oo("NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA"),NEXT_PUBLIC_VERCEL_ENV:oo("NEXT_PUBLIC_VERCEL_ENV")}},o_={server:{SLEEKPLAN_SSO_KEY:tX.string().min(1).optional()}},oE={client:{NEXT_PUBLIC_UNSPLASH_APP_NAME:tX.string().min(1).optional(),NEXT_PUBLIC_UNSPLASH_ACCESS_KEY:tX.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_UNSPLASH_APP_NAME:oo("NEXT_PUBLIC_UNSPLASH_APP_NAME"),NEXT_PUBLIC_UNSPLASH_ACCESS_KEY:oo("NEXT_PUBLIC_UNSPLASH_ACCESS_KEY")}},ox={server:{META_SYSTEM_USER_TOKEN:tX.string().min(1).optional(),WHATSAPP_PREVIEW_FROM_PHONE_NUMBER_ID:tX.string().min(1).optional()}},ow={server:{UPSTASH_REDIS_REST_URL:tX.string().url().optional(),UPSTASH_REDIS_REST_TOKEN:tX.string().min(1).optional()}},oI={client:{NEXT_PUBLIC_SENTRY_DSN:tX.string().min(1).optional()},server:{SENTRY_AUTH_TOKEN:tX.string().min(1).optional(),SENTRY_PROJECT:tX.string().min(1).optional(),SENTRY_ORG:tX.string().min(1).optional()},runtimeEnv:{NEXT_PUBLIC_SENTRY_DSN:oo("NEXT_PUBLIC_SENTRY_DSN")}},oT={server:{TELEMETRY_WEBHOOK_URL:tX.string().url().optional(),TELEMETRY_WEBHOOK_BEARER_TOKEN:tX.string().min(1).optional(),USER_CREATED_WEBHOOK_URL:tX.string().url().optional()}},oS={client:{NEXT_PUBLIC_POSTHOG_KEY:tX.string().min(1).optional(),NEXT_PUBLIC_POSTHOG_HOST:tX.string().min(1).optional().default("https://app.posthog.com")},runtimeEnv:{NEXT_PUBLIC_POSTHOG_KEY:oo("NEXT_PUBLIC_POSTHOG_KEY"),NEXT_PUBLIC_POSTHOG_HOST:oo("NEXT_PUBLIC_POSTHOG_HOST")}},oC=(r="object"==typeof(s={server:(0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)({},ol.server),od.server),ou.server),oc.server),og.server),ob.server),of.server),ov.server),o_.server),ox.server),ow.server),op.server),om.server),oh.server),oI.server),oT.server),client:(0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)({},ol.client),oc.client),og.client),ob.client),oy.client),ov.client),oE.client),oI.client),oS.client),experimental__runtimeEnv:(0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)((0,d.a)({},ol.runtimeEnv),oc.runtimeEnv),og.runtimeEnv),ob.runtimeEnv),oy.runtimeEnv),ov.runtimeEnv),oE.runtimeEnv),oI.runtimeEnv),oS.runtimeEnv),skipValidation:void 0===window.__ENV,onInvalidAccess:e=>{throw Error("❌ Attempted to access a server-side environment variable on the client: ".concat(e))}}).client?s.client:{},a="object"==typeof s.server?s.server:{},i="object"==typeof s.shared?s.shared:{},o=s.runtimeEnv?s.runtimeEnv:(0,d.a)((0,d.a)({},v.env),s.experimental__runtimeEnv),function(e){var t,n,r,a,i;let o=null!=(n=null!=(t=e.runtimeEnvStrict)?t:e.runtimeEnv)?n:v.env;if(e.skipValidation)return o;let s="object"==typeof e.client?e.client:{},l="object"==typeof e.server?e.server:{},d="object"==typeof e.shared?e.shared:{},u=tX.object(s),c=tX.object(l),p=tX.object(d),m=null!=(r=e.isServer)&&r,h=u.merge(p),g=c.merge(p).merge(u),b=m?g.safeParse(o):h.safeParse(o),f=null!=(a=e.onValidationError)?a:e=>{throw console.error("❌ Invalid environment variables:",e.flatten().fieldErrors),Error("Invalid environment variables")},y=null!=(i=e.onInvalidAccess)?i:e=>{throw Error("❌ Attempted to access a server-side environment variable on the client")};return!1===b.success?f(b.error):new Proxy(b.data,{get(t,n){if("string"==typeof n)return m||!e.clientPrefix||n.startsWith(e.clientPrefix)||void 0!==p.shape[n]?t[n]:y(n)}})}((0,d.b)((0,d.a)({},s),{shared:i,client:r,server:a,clientPrefix:"NEXT_PUBLIC_",runtimeEnv:o}))),oj=()=>{var e;return null!=(e=oC.NEXT_PUBLIC_VIEWER_INTERNAL_URL)?e:oC.NEXT_PUBLIC_VIEWER_URL[0]},ok=e=>{var t,n,r,a,i,o;let{typebot:s,apiHost:d=oj(),isPreview:c=!1,isLoading:p=!1,resultId:m,startGroupId:h,predefinedVariables:g,onNewLog:b,onNewGroupVisible:f,onNewAnswer:y,onCompleted:v,onVariablesUpdated:_}=e,E=(0,u.useMemo)(()=>{var e,t,n;return(null==(n=null==(t=null==(e=null==s?void 0:s.theme)?void 0:e.general)?void 0:t.background)?void 0:n.type)==="Color"?s.theme.general.background.content:"transparent"},[null==(n=null==(t=null==s?void 0:s.theme)?void 0:t.general)?void 0:n.background]),x=e=>f&&f(e),w=e=>y&&y(e),I=e=>b&&b(e),T=()=>v&&v();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("style",{children:["/* CSS variables. */\n:root {\n  --PhoneInput-color--focus: #03b2cb;\n  --PhoneInputInternationalIconPhone-opacity: 0.8;\n  --PhoneInputInternationalIconGlobe-opacity: 0.65;\n  --PhoneInputCountrySelect-marginRight: 0.35em;\n  --PhoneInputCountrySelectArrow-width: 0.3em;\n  --PhoneInputCountrySelectArrow-marginLeft: var(\n    --PhoneInputCountrySelect-marginRight\n  );\n  --PhoneInputCountrySelectArrow-borderWidth: 1px;\n  --PhoneInputCountrySelectArrow-opacity: 0.45;\n  --PhoneInputCountrySelectArrow-color: currentColor;\n  --PhoneInputCountrySelectArrow-color--focus: var(--PhoneInput-color--focus);\n  --PhoneInputCountrySelectArrow-transform: rotate(45deg);\n  --PhoneInputCountryFlag-aspectRatio: 1.5;\n  --PhoneInputCountryFlag-height: 1em;\n  --PhoneInputCountryFlag-borderWidth: 1px;\n  --PhoneInputCountryFlag-borderColor: rgba(0, 0, 0, 0.5);\n  --PhoneInputCountryFlag-borderColor--focus: var(--PhoneInput-color--focus);\n  --PhoneInputCountryFlag-backgroundColor--loading: rgba(0, 0, 0, 0.1);\n}\n\n.PhoneInput {\n  /* This is done to stretch the contents of this component. */\n  display: flex;\n  align-items: center;\n}\n\n.PhoneInputInput {\n  /* The phone number input stretches to fill all empty space */\n  flex: 1;\n  /* The phone number input should shrink\n	   to make room for the extension input */\n  min-width: 0;\n}\n\n.PhoneInputCountryIcon {\n  width: calc(\n    var(--PhoneInputCountryFlag-height) *\n      var(--PhoneInputCountryFlag-aspectRatio)\n  );\n  height: var(--PhoneInputCountryFlag-height);\n}\n\n.PhoneInputCountryIcon--square {\n  width: var(--PhoneInputCountryFlag-height);\n}\n\n.PhoneInputCountryIcon--border {\n  /* Removed `background-color` because when an `<img/>` was still loading\n	   it would show a dark gray rectangle. */\n  /* For some reason the `<img/>` is not stretched to 100% width and height\n	   and sometime there can be seen white pixels of the background at top and bottom. */\n  background-color: var(--PhoneInputCountryFlag-backgroundColor--loading);\n  /* Border is added via `box-shadow` because `border` interferes with `width`/`height`. */\n  /* For some reason the `<img/>` is not stretched to 100% width and height\n	   and sometime there can be seen white pixels of the background at top and bottom,\n	   so an additional \"inset\" border is added. */\n  box-shadow: 0 0 0 var(--PhoneInputCountryFlag-borderWidth)\n      var(--PhoneInputCountryFlag-borderColor),\n    inset 0 0 0 var(--PhoneInputCountryFlag-borderWidth)\n      var(--PhoneInputCountryFlag-borderColor);\n}\n\n.PhoneInputCountryIconImg {\n  /* Fixes weird vertical space above the flag icon. */\n  /* https://gitlab.com/catamphetamine/react-phone-number-input/-/issues/7#note_348586559 */\n  display: block;\n  /* 3rd party <SVG/> flag icons won't stretch if they have `width` and `height`.\n	   Also, if an <SVG/> icon's aspect ratio was different, it wouldn't fit too. */\n  width: 100%;\n  height: 100%;\n}\n\n.PhoneInputInternationalIconPhone {\n  opacity: var(--PhoneInputInternationalIconPhone-opacity);\n}\n\n.PhoneInputInternationalIconGlobe {\n  opacity: var(--PhoneInputInternationalIconGlobe-opacity);\n}\n\n/* Styling native country `<select/>`. */\n\n.PhoneInputCountry {\n  position: relative;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  margin-right: var(--PhoneInputCountrySelect-marginRight);\n}\n\n.PhoneInputCountrySelect {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  z-index: 1;\n  border: 0;\n  opacity: 0;\n  cursor: pointer;\n}\n\n.PhoneInputCountrySelect[disabled],\n.PhoneInputCountrySelect[readonly] {\n  cursor: default;\n}\n\n.PhoneInputCountrySelectArrow {\n  display: block;\n  content: '';\n  width: var(--PhoneInputCountrySelectArrow-width);\n  height: var(--PhoneInputCountrySelectArrow-width);\n  margin-left: var(--PhoneInputCountrySelectArrow-marginLeft);\n  border-style: solid;\n  border-color: var(--PhoneInputCountrySelectArrow-color);\n  border-top-width: 0;\n  border-bottom-width: var(--PhoneInputCountrySelectArrow-borderWidth);\n  border-left-width: 0;\n  border-right-width: var(--PhoneInputCountrySelectArrow-borderWidth);\n  transform: var(--PhoneInputCountrySelectArrow-transform);\n  opacity: var(--PhoneInputCountrySelectArrow-opacity);\n}\n\n.PhoneInputCountrySelect:focus\n  + .PhoneInputCountryIcon\n  + .PhoneInputCountrySelectArrow {\n  opacity: 1;\n  color: var(--PhoneInputCountrySelectArrow-color--focus);\n}\n\n.PhoneInputCountrySelect:focus + .PhoneInputCountryIcon--border {\n  box-shadow: 0 0 0 var(--PhoneInputCountryFlag-borderWidth)\n      var(--PhoneInputCountryFlag-borderColor--focus),\n    inset 0 0 0 var(--PhoneInputCountryFlag-borderWidth)\n      var(--PhoneInputCountryFlag-borderColor--focus);\n}\n\n.PhoneInputCountrySelect:focus\n  + .PhoneInputCountryIcon\n  .PhoneInputInternationalIconGlobe {\n  opacity: 1;\n  color: var(--PhoneInputCountrySelectArrow-color--focus);\n}\n\n.PhoneInputInput {\n  padding: 1rem 0.5rem;\n  outline: none !important;\n  background: transparent;\n  flex: 1 1 0%;\n  width: 100%;\n  font-size: 16px;\n}\n\n.PhoneInputCountry {\n  padding-left: 0.5rem;\n}\n\n.PhoneInputCountryIcon,\n.PhoneInputCountryIconImg {\n  border-radius: 3px;\n}\n\ninput.PhoneInputInput::-moz-placeholder {\n  color: var(--typebot-input-placeholder-color);\n}\n\ninput.PhoneInputInput::placeholder {\n  color: var(--typebot-input-placeholder-color);\n}\n",'/*\n! tailwindcss v3.2.4 | MIT License | https://tailwindcss.com\n*//*\n1. Prevent padding and border from affecting element width. (https://github.com/mozdevs/cssremedy/issues/4)\n2. Allow adding a border to an element by just adding a border-width. (https://github.com/tailwindcss/tailwindcss/pull/116)\n*/\n\n*,\n::before,\n::after {\n  box-sizing: border-box; /* 1 */\n  border-width: 0; /* 2 */\n  border-style: solid; /* 2 */\n  border-color: #e5e7eb; /* 2 */\n}\n\n::before,\n::after {\n  --tw-content: \'\';\n}\n\n/*\n1. Use a consistent sensible line-height in all browsers.\n2. Prevent adjustments of font size after orientation changes in iOS.\n3. Use a more readable tab size.\n4. Use the user\'s configured `sans` font-family by default.\n5. Use the user\'s configured `sans` font-feature-settings by default.\n*/\n\nhtml {\n  line-height: 1.5; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n  -moz-tab-size: 4; /* 3 */\n  -o-tab-size: 4;\n     tab-size: 4; /* 3 */\n  font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; /* 4 */\n  font-feature-settings: normal; /* 5 */\n}\n\n/*\n1. Remove the margin in all browsers.\n2. Inherit line-height from `html` so users can set them as a class directly on the `html` element.\n*/\n\nbody {\n  margin: 0; /* 1 */\n  line-height: inherit; /* 2 */\n}\n\n/*\n1. Add the correct height in Firefox.\n2. Correct the inheritance of border color in Firefox. (https://bugzilla.mozilla.org/show_bug.cgi?id=190655)\n3. Ensure horizontal rules are visible by default.\n*/\n\nhr {\n  height: 0; /* 1 */\n  color: inherit; /* 2 */\n  border-top-width: 1px; /* 3 */\n}\n\n/*\nAdd the correct text decoration in Chrome, Edge, and Safari.\n*/\n\nabbr:where([title]) {\n  -webkit-text-decoration: underline dotted;\n          text-decoration: underline dotted;\n}\n\n/*\nRemove the default font size and weight for headings.\n*/\n\nh1,\nh2,\nh3,\nh4,\nh5,\nh6 {\n  font-size: inherit;\n  font-weight: inherit;\n}\n\n/*\nReset links to optimize for opt-in styling instead of opt-out.\n*/\n\na {\n  color: inherit;\n  text-decoration: inherit;\n}\n\n/*\nAdd the correct font weight in Edge and Safari.\n*/\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/*\n1. Use the user\'s configured `mono` font family by default.\n2. Correct the odd `em` font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/*\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n  font-size: 80%;\n}\n\n/*\nPrevent `sub` and `sup` elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/*\n1. Remove text indentation from table contents in Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=999088, https://bugs.webkit.org/show_bug.cgi?id=201297)\n2. Correct table border color inheritance in all Chrome and Safari. (https://bugs.chromium.org/p/chromium/issues/detail?id=935729, https://bugs.webkit.org/show_bug.cgi?id=195016)\n3. Remove gaps between table borders by default.\n*/\n\ntable {\n  text-indent: 0; /* 1 */\n  border-color: inherit; /* 2 */\n  border-collapse: collapse; /* 3 */\n}\n\n/*\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n3. Remove default padding in all browsers.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  font-weight: inherit; /* 1 */\n  line-height: inherit; /* 1 */\n  color: inherit; /* 1 */\n  margin: 0; /* 2 */\n  padding: 0; /* 3 */\n}\n\n/*\nRemove the inheritance of text transform in Edge and Firefox.\n*/\n\nbutton,\nselect {\n  text-transform: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Remove default button styles.\n*/\n\nbutton,\n[type=\'button\'],\n[type=\'reset\'],\n[type=\'submit\'] {\n  -webkit-appearance: button; /* 1 */\n  background-color: transparent; /* 2 */\n  background-image: none; /* 2 */\n}\n\n/*\nUse the modern Firefox focus style for all focusable elements.\n*/\n\n:-moz-focusring {\n  outline: auto;\n}\n\n/*\nRemove the additional `:invalid` styles in Firefox. (https://github.com/mozilla/gecko-dev/blob/2f9eacd9d3d995c937b4251a5557d95d494c9be1/layout/style/res/forms.css#L728-L737)\n*/\n\n:-moz-ui-invalid {\n  box-shadow: none;\n}\n\n/*\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n  vertical-align: baseline;\n}\n\n/*\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/*\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type=\'search\'] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/*\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/*\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to `inherit` in Safari.\n*/\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n  display: list-item;\n}\n\n/*\nRemoves the default spacing and border for appropriate elements.\n*/\n\nblockquote,\ndl,\ndd,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\nhr,\nfigure,\np,\npre {\n  margin: 0;\n}\n\nfieldset {\n  margin: 0;\n  padding: 0;\n}\n\nlegend {\n  padding: 0;\n}\n\nol,\nul,\nmenu {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n}\n\n/*\nPrevent resizing textareas horizontally by default.\n*/\n\ntextarea {\n  resize: vertical;\n}\n\n/*\n1. Reset the default placeholder opacity in Firefox. (https://github.com/tailwindlabs/tailwindcss/issues/3300)\n2. Set the default placeholder color to the user\'s configured gray 400 color.\n*/\n\ninput::-moz-placeholder, textarea::-moz-placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\ninput::placeholder,\ntextarea::placeholder {\n  opacity: 1; /* 1 */\n  color: #9ca3af; /* 2 */\n}\n\n/*\nSet the default cursor for buttons.\n*/\n\nbutton,\n[role="button"] {\n  cursor: pointer;\n}\n\n/*\nMake sure disabled buttons don\'t get the pointer cursor.\n*/\n:disabled {\n  cursor: default;\n}\n\n/*\n1. Make replaced elements `display: block` by default. (https://github.com/mozdevs/cssremedy/issues/14)\n2. Add `vertical-align: middle` to align replaced elements more sensibly by default. (https://github.com/jensimmons/cssremedy/issues/14#issuecomment-634934210)\n   This can trigger a poorly considered lint error in some tools but is included by design.\n*/\n\nimg,\nsvg,\nvideo,\ncanvas,\naudio,\niframe,\nembed,\nobject {\n  display: block; /* 1 */\n  vertical-align: middle; /* 2 */\n}\n\n/*\nConstrain images and videos to the parent width and preserve their intrinsic aspect ratio. (https://github.com/mozdevs/cssremedy/issues/14)\n*/\n\nimg,\nvideo {\n  max-width: 100%;\n  height: auto;\n}\n\n/* Make elements with the HTML hidden attribute stay hidden by default */\n[hidden] {\n  display: none;\n}\n\n*, ::before, ::after {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n}\n\n::backdrop {\n  --tw-border-spacing-x: 0;\n  --tw-border-spacing-y: 0;\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-rotate: 0;\n  --tw-skew-x: 0;\n  --tw-skew-y: 0;\n  --tw-scale-x: 1;\n  --tw-scale-y: 1;\n  --tw-pan-x:  ;\n  --tw-pan-y:  ;\n  --tw-pinch-zoom:  ;\n  --tw-scroll-snap-strictness: proximity;\n  --tw-ordinal:  ;\n  --tw-slashed-zero:  ;\n  --tw-numeric-figure:  ;\n  --tw-numeric-spacing:  ;\n  --tw-numeric-fraction:  ;\n  --tw-ring-inset:  ;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-color: rgb(59 130 246 / 0.5);\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-shadow: 0 0 #0000;\n  --tw-shadow-colored: 0 0 #0000;\n  --tw-blur:  ;\n  --tw-brightness:  ;\n  --tw-contrast:  ;\n  --tw-grayscale:  ;\n  --tw-hue-rotate:  ;\n  --tw-invert:  ;\n  --tw-saturate:  ;\n  --tw-sepia:  ;\n  --tw-drop-shadow:  ;\n  --tw-backdrop-blur:  ;\n  --tw-backdrop-brightness:  ;\n  --tw-backdrop-contrast:  ;\n  --tw-backdrop-grayscale:  ;\n  --tw-backdrop-hue-rotate:  ;\n  --tw-backdrop-invert:  ;\n  --tw-backdrop-opacity:  ;\n  --tw-backdrop-saturate:  ;\n  --tw-backdrop-sepia:  ;\n}\n.container {\n  width: 100%;\n}\n@media (min-width: 400px) {\n\n  .container {\n    max-width: 400px;\n  }\n}\n@media (min-width: 640px) {\n\n  .container {\n    max-width: 640px;\n  }\n}\n@media (min-width: 768px) {\n\n  .container {\n    max-width: 768px;\n  }\n}\n@media (min-width: 1024px) {\n\n  .container {\n    max-width: 1024px;\n  }\n}\n@media (min-width: 1280px) {\n\n  .container {\n    max-width: 1280px;\n  }\n}\n@media (min-width: 1536px) {\n\n  .container {\n    max-width: 1536px;\n  }\n}\n.fixed {\n  position: fixed;\n}\n.absolute {\n  position: absolute;\n}\n.relative {\n  position: relative;\n}\n.top-0 {\n  top: 0px;\n}\n.left-0 {\n  left: 0px;\n}\n.right-0 {\n  right: 0px;\n}\n.-right-1 {\n  right: -0.25rem;\n}\n.z-50 {\n  z-index: 50;\n}\n.z-10 {\n  z-index: 10;\n}\n.z-20 {\n  z-index: 20;\n}\n.m-2 {\n  margin: 0.5rem;\n}\n.mx-4 {\n  margin-left: 1rem;\n  margin-right: 1rem;\n}\n.my-2 {\n  margin-top: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.mb-1 {\n  margin-bottom: 0.25rem;\n}\n.mb-2 {\n  margin-bottom: 0.5rem;\n}\n.-ml-1 {\n  margin-left: -0.25rem;\n}\n.mr-3 {\n  margin-right: 0.75rem;\n}\n.mr-1 {\n  margin-right: 0.25rem;\n}\n.mr-2 {\n  margin-right: 0.5rem;\n}\n.mb-4 {\n  margin-bottom: 1rem;\n}\n.mt-1 {\n  margin-top: 0.25rem;\n}\n.ml-2 {\n  margin-left: 0.5rem;\n}\n.-mt-1 {\n  margin-top: -0.25rem;\n}\n.-mr-1 {\n  margin-right: -0.25rem;\n}\n.mb-3 {\n  margin-bottom: 0.75rem;\n}\n.mt-4 {\n  margin-top: 1rem;\n}\n.block {\n  display: block;\n}\n.\\!block {\n  display: block !important;\n}\n.inline {\n  display: inline;\n}\n.flex {\n  display: flex;\n}\n.inline-flex {\n  display: inline-flex;\n}\n.hidden {\n  display: none;\n}\n.h-32 {\n  height: 8rem;\n}\n.h-5 {\n  height: 1.25rem;\n}\n.h-screen {\n  height: 100vh;\n}\n.h-full {\n  height: 100%;\n}\n.h-2 {\n  height: 0.5rem;\n}\n.h-6 {\n  height: 1.5rem;\n}\n.h-3 {\n  height: 0.75rem;\n}\n.h-2\\.5 {\n  height: 0.625rem;\n}\n.h-4 {\n  height: 1rem;\n}\n.min-h-full {\n  min-height: 100%;\n}\n.w-full {\n  width: 100%;\n}\n.w-5 {\n  width: 1.25rem;\n}\n.w-screen {\n  width: 100vw;\n}\n.w-2 {\n  width: 0.5rem;\n}\n.w-6 {\n  width: 1.5rem;\n}\n.w-auto {\n  width: auto;\n}\n.w-3 {\n  width: 0.75rem;\n}\n.min-w-0 {\n  min-width: 0px;\n}\n.max-w-xs {\n  max-width: 20rem;\n}\n.max-w-full {\n  max-width: 100%;\n}\n.max-w-lg {\n  max-width: 32rem;\n}\n.flex-1 {\n  flex: 1 1 0%;\n}\n.flex-shrink-0 {\n  flex-shrink: 0;\n}\n.transform {\n  transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));\n}\n@keyframes spin {\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n.animate-spin {\n  animation: spin 1s linear infinite;\n}\n@keyframes ping {\n\n  75%, 100% {\n    transform: scale(2);\n    opacity: 0;\n  }\n}\n.animate-ping {\n  animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;\n}\n.cursor-pointer {\n  cursor: pointer;\n}\n.flex-col {\n  flex-direction: column;\n}\n.flex-wrap {\n  flex-wrap: wrap;\n}\n.items-start {\n  align-items: flex-start;\n}\n.items-end {\n  align-items: flex-end;\n}\n.items-center {\n  align-items: center;\n}\n.justify-end {\n  justify-content: flex-end;\n}\n.justify-center {\n  justify-content: center;\n}\n.justify-between {\n  justify-content: space-between;\n}\n.gap-2 {\n  gap: 0.5rem;\n}\n.overflow-hidden {\n  overflow: hidden;\n}\n.overflow-y-scroll {\n  overflow-y: scroll;\n}\n.whitespace-pre-wrap {\n  white-space: pre-wrap;\n}\n.rounded {\n  border-radius: 0.25rem;\n}\n.rounded-lg {\n  border-radius: 0.5rem;\n}\n.rounded-md {\n  border-radius: 0.375rem;\n}\n.rounded-full {\n  border-radius: 9999px;\n}\n.border-2 {\n  border-width: 2px;\n}\n.border-dashed {\n  border-style: dashed;\n}\n.border-gray-300 {\n  --tw-border-opacity: 1;\n  border-color: rgb(209 213 219 / var(--tw-border-opacity));\n}\n.bg-white {\n  --tw-bg-opacity: 1;\n  background-color: rgb(255 255 255 / var(--tw-bg-opacity));\n}\n.bg-transparent {\n  background-color: transparent;\n}\n.bg-gray-50 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(249 250 251 / var(--tw-bg-opacity));\n}\n.bg-gray-200 {\n  --tw-bg-opacity: 1;\n  background-color: rgb(229 231 235 / var(--tw-bg-opacity));\n}\n.bg-cover {\n  background-size: cover;\n}\n.object-cover {\n  -o-object-fit: cover;\n     object-fit: cover;\n}\n.p-4 {\n  padding: 1rem;\n}\n.px-3 {\n  padding-left: 0.75rem;\n  padding-right: 0.75rem;\n}\n.py-1 {\n  padding-top: 0.25rem;\n  padding-bottom: 0.25rem;\n}\n.px-2 {\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n}\n.px-4 {\n  padding-left: 1rem;\n  padding-right: 1rem;\n}\n.py-2 {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n}\n.py-4 {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n}\n.py-6 {\n  padding-top: 1.5rem;\n  padding-bottom: 1.5rem;\n}\n.px-8 {\n  padding-left: 2rem;\n  padding-right: 2rem;\n}\n.px-1 {\n  padding-left: 0.25rem;\n  padding-right: 0.25rem;\n}\n.pt-10 {\n  padding-top: 2.5rem;\n}\n.pr-2 {\n  padding-right: 0.5rem;\n}\n.pb-0 {\n  padding-bottom: 0px;\n}\n.text-left {\n  text-align: left;\n}\n.text-center {\n  text-align: center;\n}\n.text-right {\n  text-align: right;\n}\n.text-sm {\n  font-size: 0.875rem;\n  line-height: 1.25rem;\n}\n.text-base {\n  font-size: 1rem;\n  line-height: 1.5rem;\n}\n.font-semibold {\n  font-weight: 600;\n}\n.font-normal {\n  font-weight: 400;\n}\n.text-blue-500 {\n  --tw-text-opacity: 1;\n  color: rgb(59 130 246 / var(--tw-text-opacity));\n}\n.text-gray-500 {\n  --tw-text-opacity: 1;\n  color: rgb(107 114 128 / var(--tw-text-opacity));\n}\n.text-gray-900 {\n  --tw-text-opacity: 1;\n  color: rgb(17 24 39 / var(--tw-text-opacity));\n}\n.text-white {\n  --tw-text-opacity: 1;\n  color: rgb(255 255 255 / var(--tw-text-opacity));\n}\n.text-red-500 {\n  --tw-text-opacity: 1;\n  color: rgb(239 68 68 / var(--tw-text-opacity));\n}\n.opacity-25 {\n  opacity: 0.25;\n}\n.opacity-75 {\n  opacity: 0.75;\n}\n.opacity-0 {\n  opacity: 0;\n}\n.opacity-100 {\n  opacity: 1;\n}\n.shadow-md {\n  --tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.shadow {\n  --tw-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n  --tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);\n  box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);\n}\n.brightness-225 {\n  --tw-brightness: brightness(2.25);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.brightness-200 {\n  --tw-brightness: brightness(2);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.filter {\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n.transition-all {\n  transition-property: all;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.transition {\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;\n  transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-backdrop-filter;\n  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n  transition-duration: 150ms;\n}\n.duration-100 {\n  transition-duration: 100ms;\n}\n\n:root {\n  --typebot-container-bg-image: none;\n  --typebot-container-bg-color: transparent;\n  --typebot-container-font-family: \'Open Sans\';\n\n  --typebot-button-bg-color: #0042da;\n  --typebot-button-color: #ffffff;\n\n  --typebot-host-bubble-bg-color: #f7f8ff;\n  --typebot-host-bubble-color: #303235;\n\n  --typebot-guest-bubble-bg-color: #ff8e21;\n  --typebot-guest-bubble-color: #ffffff;\n\n  --typebot-input-bg-color: #ffffff;\n  --typebot-input-color: #303235;\n  --typebot-input-placeholder-color: #9095a0;\n\n  --typebot-header-bg-color: #ffffff;\n  --typebot-header-color: #303235;\n\n  /* Phone input */\n  --PhoneInputCountryFlag-borderColor: transparent;\n  --PhoneInput-color--focus: transparent;\n}\n\n/* Hide scrollbar for Chrome, Safari and Opera */\n.scrollable-container::-webkit-scrollbar {\n  display: none;\n}\n\n/* Hide scrollbar for IE, Edge and Firefox */\n.scrollable-container {\n  -ms-overflow-style: none; /* IE and Edge */\n  scrollbar-width: none; /* Firefox */\n}\n\n/* Transitions */\n.bubble-enter {\n  opacity: 0;\n}\n.bubble-enter-active {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 500ms;\n  transition-timing-function: ease-out;\n}\n.bubble-exit {\n  opacity: 1;\n}\n.bubble-exit-active {\n  opacity: 0;\n  transition-delay: 0ms !important;\n  transition-property: opacity;\n  transition-duration: 400ms;\n  transition-timing-function: ease-out;\n}\n\n.bubble-typing {\n  transition: width 400ms ease-out, height 400ms ease-out;\n}\n\n.content-opacity {\n  transition: opacity 400ms ease-in 200ms;\n}\n\n.bubble1,\n.bubble2,\n.bubble3 {\n  background-color: var(--typebot-host-bubble-color);\n  opacity: 0.5;\n}\n\n.bubble1 {\n  animation: chatBubbles 1s ease-in-out infinite;\n}\n\n.bubble2 {\n  animation: chatBubbles 1s ease-in-out infinite;\n  animation-delay: 0.3s;\n}\n\n.bubble3 {\n  animation: chatBubbles 1s ease-in-out infinite;\n  animation-delay: 0.5s;\n}\n\n@keyframes chatBubbles {\n  0% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(-5px);\n  }\n  100% {\n    transform: translateY(0);\n  }\n}\n\nbutton,\ninput,\ntextarea {\n  font-weight: 300;\n}\n\n.slate-a {\n  text-decoration: underline;\n}\n\n.slate-html-container > div {\n  min-height: 24px;\n}\n\n.slate-bold {\n  font-weight: bold;\n}\n\n.slate-italic {\n  font-style: oblique;\n}\n\n.slate-underline {\n  text-decoration: underline;\n}\n.text-input::-moz-placeholder {\n  color: var(--typebot-input-placeholder-color) !important;\n  opacity: 1 !important;\n}\n.text-input::placeholder {\n  color: var(--typebot-input-placeholder-color) !important;\n  opacity: 1 !important;\n}\n\n.typebot-container {\n  background-image: var(--typebot-container-bg-image);\n  background-color: var(--typebot-container-bg-color);\n  font-family: var(--typebot-container-font-family);\n}\n\n.custom-header {\n  color: var(--typebot-header-color);\n  background-color: var(--typebot-header-bg-color);\n}\n\n.typebot-button {\n  color: var(--typebot-button-color);\n  background-color: var(--typebot-button-bg-color);\n  border: 1px solid var(--typebot-button-bg-color);\n}\n\n.typebot-button.selectable {\n  color: var(--typebot-host-bubble-color);\n  background-color: var(--typebot-host-bubble-bg-color);\n  border: 1px solid var(--typebot-button-bg-color);\n}\n\n.typebot-host-bubble {\n  color: var(--typebot-host-bubble-color);\n}\n\n.typebot-host-bubble > .bubble-typing {\n  background-color: var(--typebot-host-bubble-bg-color);\n  border: var(--typebot-host-bubble-border);\n}\n\n.typebot-guest-bubble {\n  color: var(--typebot-guest-bubble-color);\n  background-color: var(--typebot-guest-bubble-bg-color);\n}\n\n.typebot-input {\n  color: var(--typebot-input-color);\n  background-color: var(--typebot-input-bg-color);\n  box-shadow: 0 2px 6px -1px rgba(0, 0, 0, 0.1);\n}\n\n.typebot-input-error-message {\n  color: var(--typebot-input-color);\n}\n\n.typebot-button > .send-icon {\n  fill: var(--typebot-button-color);\n}\n\n.typebot-chat-view {\n  max-width: 800px;\n}\n\n.ping span {\n  background-color: var(--typebot-button-bg-color);\n}\n\n.rating-icon-container svg {\n  width: 42px;\n  height: 42px;\n  stroke: var(--typebot-button-bg-color);\n  fill: var(--typebot-host-bubble-bg-color);\n  transition: fill 100ms ease-out;\n}\n\n.rating-icon-container.selected svg {\n  fill: var(--typebot-button-bg-color);\n}\n\n.rating-icon-container:hover svg {\n  filter: brightness(0.9);\n}\n\n.rating-icon-container:active svg {\n  filter: brightness(0.75);\n}\n\n.upload-progress-bar {\n  background-color: var(--typebot-button-bg-color);\n}\n\n.total-files-indicator {\n  background-color: var(--typebot-button-bg-color);\n  color: var(--typebot-button-color);\n  font-size: 10px;\n}\n\n.typebot-upload-input {\n  transition: border-color 100ms ease-out;\n}\n\n.typebot-upload-input.dragging-over {\n  border-color: var(--typebot-button-bg-color);\n}\n\n.secondary-button {\n  background-color: var(--typebot-host-bubble-bg-color);\n  color: var(--typebot-host-bubble-color);\n}\n\n.hover\\:bg-gray-100:hover {\n  --tw-bg-opacity: 1;\n  background-color: rgb(243 244 246 / var(--tw-bg-opacity));\n}\n\n.hover\\:brightness-90:hover {\n  --tw-brightness: brightness(.9);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n.focus\\:outline-none:focus {\n  outline: 2px solid transparent;\n  outline-offset: 2px;\n}\n\n.active\\:brightness-75:active {\n  --tw-brightness: brightness(.75);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n.disabled\\:cursor-not-allowed:disabled {\n  cursor: not-allowed;\n}\n\n.disabled\\:opacity-50:disabled {\n  opacity: 0.5;\n}\n\n.disabled\\:brightness-100:disabled {\n  --tw-brightness: brightness(1);\n  filter: var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow);\n}\n\n@media (min-width: 400px) {\n\n  .xs\\:mb-2 {\n    margin-bottom: 0.5rem;\n  }\n\n  .xs\\:flex {\n    display: flex;\n  }\n\n  .xs\\:hidden {\n    display: none;\n  }\n\n  .xs\\:h-10 {\n    height: 2.5rem;\n  }\n\n  .xs\\:h-full {\n    height: 100%;\n  }\n\n  .xs\\:w-10 {\n    width: 2.5rem;\n  }\n\n  .xs\\:w-full {\n    width: 100%;\n  }\n\n  .xs\\:text-xl {\n    font-size: 1.25rem;\n    line-height: 1.75rem;\n  }\n}\n\n@media (min-width: 1024px) {\n\n  .lg\\:w-3\\/4 {\n    width: 75%;\n  }\n\n  .lg\\:w-11\\/12 {\n    width: 91.666667%;\n  }\n\n  .lg\\:w-4\\/6 {\n    width: 66.666667%;\n  }\n\n  .lg\\:px-5 {\n    padding-left: 1.25rem;\n    padding-right: 1.25rem;\n  }\n}\n']}),(0,l.jsx)("style",{children:null==(r=s.theme)?void 0:r.customCss}),(0,l.jsx)("style",{children:".lite-badge {\n  display: block !important;\n}\n"}),j(null==(i=null==(a=null==s?void 0:s.theme)?void 0:a.general)?void 0:i.font)&&(0,l.jsx)("style",{dangerouslySetInnerHTML:{__html:"@import url('https://fonts.googleapis.com/css2?family=".concat(null!=(o=s.theme.general.font)?o:"Open Sans",":ital,wght@0,300;0,400;0,600;1,300;1,400;1,600&display=swap');")}}),(0,l.jsx)(Y,{typebot:s,apiHost:d,isPreview:c,onNewLog:I,isLoading:p,children:(0,l.jsx)(a$,{resultId:m,onNewAnswer:w,onVariablesUpdated:_,children:(0,l.jsxs)("div",{className:"flex text-base overflow-hidden bg-cover h-screen w-screen flex-col items-center typebot-container",style:{backgroundColor:null!=E?E:"transparent"},"data-testid":"container",children:[(0,l.jsx)("div",{className:"flex w-full h-full justify-center",children:(0,l.jsx)(oa,{theme:s.theme,onNewGroupVisible:x,onCompleted:T,predefinedVariables:g,startGroupId:h})}),s.settings.general.isBrandingEnabled&&(0,l.jsx)(oi,{})]})})})]})},oP=n(1798),oN=n(4455),oR=n(9749),oA=n(590),oO=n(3060);let oL="resultId",oU=()=>{try{return sessionStorage.getItem(oL)}catch(e){}},oB=e=>{try{return sessionStorage.setItem(oL,e)}catch(e){}},oM=async e=>(0,oN.wG)({url:"/api/typebots/t/results/r/answers",method:"PUT",body:e}),oD=async e=>(0,oN.wG)({url:"/api/typebots/".concat(e,"/results"),method:"POST"}),oz=async(e,t)=>(0,oN.wG)({url:"/api/typebots/t/results/".concat(e),method:"PATCH",body:t}),oZ=e=>{let{publishedTypebot:t,isIE:n,url:r,customHeadCode:a}=e,{asPath:i,push:o}=(0,oP.useRouter)(),[s,d]=(0,u.useState)(!1),[c,p]=(0,u.useState)(),[m,h]=(0,u.useState)(n?Error("Internet explorer is not supported"):void 0),[g,b]=(0,u.useState)(),[f,y]=(0,u.useState)([]),[v,_]=(0,u.useState)(!1);(0,u.useEffect)(()=>{d(!0);let e=new URLSearchParams(location.search);E();let n={};e.forEach((e,t)=>{n[t]=e}),p(n),x().then(),(0,oN.$K)(a)&&(0,oN.vt)(a);let r=t.settings.metadata.googleTagManagerId;(0,oN.UE)(r)&&document.body.prepend((0,oO.I)(r))},[]);let E=()=>{let e=i.includes("?");e&&!1!==t.settings.general.isHideQueryParamsEnabled&&o(i.split("?")[0],void 0,{shallow:!0})},x=async()=>{let e=oU();if(e)b(e);else{let{error:e,data:n}=await oD(t.typebotId);if(e)return h(e);if(null==n?void 0:n.hasReachedLimit)return h(Error("This bot is now closed."));(null==n?void 0:n.result)&&(b(n.result.id),!0!==t.settings.general.isNewResultOnRefreshEnabled&&oB(n.result.id))}};(0,u.useEffect)(()=>{g&&0!==f.length&&(Promise.all(f.map(I(g))).then(),y([]))},[g]);let w=async e=>{if(!g)return y([...f,e]);await I(g)(e)},I=e=>async t=>{let{error:n}=await oz(e,{variables:t});n&&h(n)},T=async e=>{if(!g)return h(Error("Error: result was not created"));let{error:t}=await oM({...e,resultId:g});t&&h(t),v||oz(g,{hasStarted:!0}).then(e=>{let{error:t}=e;return t?h(t):_(!0)})},S=async()=>{if(!g)return h(Error("Error: result was not created"));let{error:e}=await oz(g,{isCompleted:!0});e&&h(e)};return m?(0,l.jsx)(oA.m,{error:m}):(0,l.jsxs)("div",{style:{height:"100vh"},children:[(0,l.jsx)(oR.H,{url:r,typebotName:t.typebot.name,metadata:t.settings.metadata}),s&&(0,l.jsx)(ok,{typebot:t,resultId:g,predefinedVariables:c,onNewAnswer:T,onCompleted:S,onVariablesUpdated:w,isLoading:(0,oN.z4)(g)})]})}},3060:function(e,t,n){"use strict";n.d(t,{I:function(){return a},J:function(){return r}});let r=e=>"<!-- Google Tag Manager -->\n(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','".concat(e,"');\n<!-- End Google Tag Manager -->"),a=e=>{if(document.getElementById("gtm-noscript"))return"";let t=document.createElement("noscript");t.id="gtm-noscript";let n=document.createElement("iframe");return n.src="https://www.googletagmanager.com/ns.html?id=".concat(e),n.height="0",n.width="0",n.style.display="none",n.style.visibility="hidden",t.appendChild(n),t}},4455:function(e,t,n){"use strict";var r,a,i,o,s,l,d,u;n.d(t,{vt:function(){return g},$K:function(){return p},z4:function(){return m},UE:function(){return h},wG:function(){return c}}),(s=r||(r={})).TEXT="text input",s.NUMBER="number input",s.EMAIL="email input",s.URL="url input",s.DATE="date input",s.PHONE="phone number input",s.CHOICE="choice input",s.PICTURE_CHOICE="picture choice input",s.PAYMENT="payment input",s.RATING="rating input",s.FILE="file input",(l=a||(a={})).TEXT="text",l.IMAGE="image",l.VIDEO="video",l.EMBED="embed",l.AUDIO="audio",(d=i||(i={})).SET_VARIABLE="Set variable",d.CONDITION="Condition",d.REDIRECT="Redirect",d.SCRIPT="Code",d.TYPEBOT_LINK="Typebot link",d.WAIT="Wait",d.JUMP="Jump",d.AB_TEST="AB test",(u=o||(o={})).GOOGLE_SHEETS="Google Sheets",u.OPEN_AI="OpenAI",u.GOOGLE_ANALYTICS="Google Analytics",u.WEBHOOK="Webhook",u.EMAIL="Email",u.ZAPIER="Zapier",u.MAKE_COM="Make.com",u.PABBLY_CONNECT="Pabbly",u.CHATWOOT="Chatwoot",u.PIXEL="Pixel";let c=async e=>{try{let t="string"==typeof e?e:e.url,n=await fetch(t,{method:"string"==typeof e?"GET":e.method,mode:"cors",headers:"string"!=typeof e&&p(e.body)?{"Content-Type":"application/json"}:void 0,body:"string"!=typeof e&&p(e.body)?JSON.stringify(e.body):void 0}),r=await n.json();if(!n.ok)throw"error"in r?r.error:r;return{data:r}}catch(e){return console.error(e),{error:e}}},p=e=>null!=e,m=e=>null==e,h=e=>null!=e&&""!==e,g=e=>{let t=e.split("</noscript>");t.forEach(e=>{let[t,n]=e.split("<noscript>"),r=document.createRange().createContextualFragment(t);if(document.head.append(r),m(n))return;let a=document.createElement("noscript"),i=document.createRange().createContextualFragment(n);a.append(i),document.head.append(a)})}},5710:function(){},6196:function(e,t,n){"use strict";n.d(t,{a:function(){return u},b:function(){return c},c:function(){return p},d:function(){return m},e:function(){return h},f:function(){return g}});var r=Object.defineProperty,a=Object.defineProperties,i=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(e,t,n)=>t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u=(e,t)=>{for(var n in t||(t={}))s.call(t,n)&&d(e,n,t[n]);if(o)for(var n of o(t))l.call(t,n)&&d(e,n,t[n]);return e},c=(e,t)=>a(e,i(t)),p=(e,t)=>{var n={};for(var r in e)s.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&o)for(var r of o(e))0>t.indexOf(r)&&l.call(e,r)&&(n[r]=e[r]);return n},m=(e,t,n)=>new Promise((r,a)=>{var i=e=>{try{s(n.next(e))}catch(e){a(e)}},o=e=>{try{s(n.throw(e))}catch(e){a(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,o);s((n=n.apply(e,t)).next())}),h=e=>{e&&gtag("event",e.action,{event_category:e.category,event_label:e.label,value:e.value})},g=e=>new Promise(t=>{let n=document.getElementById("gtag");if(!n){let n=document.createElement("script");n.src="https://www.googletagmanager.com/gtag/js?id=".concat(e),n.id="gtag";let r=document.createElement("script");r.innerHTML="window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag('js', new Date());\n    \n      gtag('config', '".concat(e,"');\n      "),document.body.appendChild(n),document.body.appendChild(r),n.onload=()=>{t()}}n&&t()})}}]);